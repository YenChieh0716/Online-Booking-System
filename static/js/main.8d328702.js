/*! For license information please see main.8d328702.js.LICENSE.txt */
!function(){var e={142:function(e,t){"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,a=n?Symbol.for("react.fragment"):60107,o=n?Symbol.for("react.strict_mode"):60108,u=n?Symbol.for("react.profiler"):60114,s=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,l=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,h=n?Symbol.for("react.forward_ref"):60112,d=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,v=n?Symbol.for("react.memo"):60115,m=n?Symbol.for("react.lazy"):60116,y=n?Symbol.for("react.block"):60121,g=n?Symbol.for("react.fundamental"):60117,k=n?Symbol.for("react.responder"):60118,b=n?Symbol.for("react.scope"):60119;function w(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case l:case f:case a:case u:case o:case d:return e;default:switch(e=e&&e.$$typeof){case c:case h:case m:case v:case s:return e;default:return t}}case i:return t}}}function _(e){return w(e)===f}t.isForwardRef=function(e){return w(e)===h}},33:function(e,t,n){"use strict";e.exports=n(142)},630:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(618);n(7);var i=n(791);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}var p=function(){function e(t){o(this,e),c(this,"handlers",void 0),this.handlers=t.slice(0)}return s(e,[{key:"addHandlers",value:function(t){for(var n=this.handlers.slice(0),r=t.length,i=0;i<r;i+=1)n.push(t[i]);return new e(n)}},{key:"dispatchEvent",value:function(e,t){var n=this.handlers.length-1;if(t){for(var r=n;r>=0;r-=1)this.handlers[r].called||(this.handlers[r].called=!0,this.handlers[r](e));for(var i=n;i>=0;i-=1)this.handlers[i].called=!1}else(0,this.handlers[n])(e)}},{key:"hasHandlers",value:function(){return this.handlers.length>0}},{key:"removeHandlers",value:function(t){for(var n=[],r=this.handlers.length,i=0;i<r;i+=1){var a=this.handlers[i];-1===t.indexOf(a)&&n.push(a)}return new e(n)}}]),e}();function v(e){var t=new Map;return e.forEach((function(e,n){t.set(n,e)})),t}function m(e){return Array.isArray(e)?e:[e]}function y(e){return"document"===e?document:"window"===e?window:function(e){return null!==e&&"object"===a(e)&&e.hasOwnProperty("current")}(e)?e.current||document:e||document}var g=function(){function e(t,n){o(this,e),c(this,"handlerSets",void 0),c(this,"poolName",void 0),this.handlerSets=n,this.poolName=t}return s(e,[{key:"addHandlers",value:function(t,n){var r=v(this.handlerSets);if(r.has(t)){var i=r.get(t);r.set(t,i.addHandlers(n))}else r.set(t,new p(n));return new e(this.poolName,r)}},{key:"dispatchEvent",value:function(e,t){var n=this.handlerSets.get(e),r="default"===this.poolName;n&&n.dispatchEvent(t,r)}},{key:"hasHandlers",value:function(e){if(!e)return this.handlerSets.size>0;var t=this.handlerSets.get(e);return!!t&&t.hasHandlers()}},{key:"removeHandlers",value:function(t,n){var r=v(this.handlerSets);if(!r.has(t))return new e(this.poolName,r);var i=r.get(t).removeHandlers(n);return i.hasHandlers()?r.set(t,i):r.delete(t),new e(this.poolName,r)}}]),e}();c(g,"createByType",(function(e,t,n){var r=new Map;return r.set(t,new p(n)),new g(e,r)}));var k=function(){function e(t){var n=this;o(this,e),c(this,"handlers",new Map),c(this,"pools",new Map),c(this,"target",void 0),c(this,"createEmitter",(function(e){return function(t){n.pools.forEach((function(n){n.dispatchEvent(e,t)}))}})),this.target=t}return s(e,[{key:"addHandlers",value:function(e,t,n){if(this.pools.has(e)){var r=this.pools.get(e);this.pools.set(e,r.addHandlers(t,n))}else this.pools.set(e,g.createByType(e,t,n));this.handlers.has(t)||this.addTargetHandler(t)}},{key:"hasHandlers",value:function(){return this.handlers.size>0}},{key:"removeHandlers",value:function(e,t,n){if(this.pools.has(e)){var r=this.pools.get(e).removeHandlers(t,n);r.hasHandlers()?this.pools.set(e,r):this.pools.delete(e);var i=!1;this.pools.forEach((function(e){return i=i||e.hasHandlers(t)})),i||this.removeTargetHandler(t)}}},{key:"addTargetHandler",value:function(e){var t=this.createEmitter(e);this.handlers.set(e,t),this.target.addEventListener(e,t,!0)}},{key:"removeTargetHandler",value:function(e){this.handlers.has(e)&&(this.target.removeEventListener(e,this.handlers.get(e),!0),this.handlers.delete(e))}}]),e}(),b=function(){function e(){var t=this;o(this,e),c(this,"targets",new Map),c(this,"getTarget",(function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=y(e);if(t.targets.has(r))return t.targets.get(r);if(!n)return null;var i=new k(r);return t.targets.set(r,i),i})),c(this,"removeTarget",(function(e){t.targets.delete(y(e))}))}return s(e,[{key:"sub",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r.canUseDOM){var i=n.target,a=void 0===i?document:i,o=n.pool,u=void 0===o?"default":o;this.getTarget(a).addHandlers(u,e,m(t))}}},{key:"unsub",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(r.canUseDOM){var i=n.target,a=void 0===i?document:i,o=n.pool,u=void 0===o?"default":o,s=this.getTarget(a,!1);s&&(s.removeHandlers(u,e,m(t)),s.hasHandlers()||this.removeTarget(a))}}}]),e}(),w=new b,_=function(e){function t(){return o(this,t),d(this,f(t).apply(this,arguments))}return l(t,i.PureComponent),s(t,[{key:"componentDidMount",value:function(){this.subscribe(this.props)}},{key:"componentDidUpdate",value:function(e){this.unsubscribe(e),this.subscribe(this.props)}},{key:"componentWillUnmount",value:function(){this.unsubscribe(this.props)}},{key:"subscribe",value:function(e){var t=e.name,n=e.on,r=e.pool,i=e.target;w.sub(t,n,{pool:r,target:i})}},{key:"unsubscribe",value:function(e){var t=e.name,n=e.on,r=e.pool,i=e.target;w.unsub(t,n,{pool:r,target:i})}},{key:"render",value:function(){return null}}]),t}();c(_,"defaultProps",{pool:"default",target:"document"}),_.propTypes={},t.instance=w,t.default=_},775:function(e,t,n){"use strict";var r;r=n(630),e.exports=r.default,e.exports.instance=r.instance},618:function(e,t,n){var r;!function(){"use strict";var i=!("undefined"===typeof window||!window.document||!window.document.createElement),a={canUseDOM:i,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:i&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:i&&!!window.screen};void 0===(r=function(){return a}.call(t,n,t,e))||(e.exports=r)}()},854:function(e){"use strict";for(var t=function(e){return null!==e&&!Array.isArray(e)&&"object"===typeof e},n={3:"Cancel",6:"Help",8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",28:"Convert",29:"NonConvert",30:"Accept",31:"ModeChange",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",41:"Select",42:"Print",43:"Execute",44:"PrintScreen",45:"Insert",46:"Delete",48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],91:"OS",93:"ContextMenu",144:"NumLock",145:"ScrollLock",181:"VolumeMute",182:"VolumeDown",183:"VolumeUp",186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"'],224:"Meta",225:"AltGraph",246:"Attn",247:"CrSel",248:"ExSel",249:"EraseEof",250:"Play",251:"ZoomOut"},r=0;r<24;r+=1)n[112+r]="F"+(r+1);for(var i=0;i<26;i+=1){var a=i+65;n[a]=[String.fromCharCode(a+32),String.fromCharCode(a)]}var o={codes:n,getCode:function(e){return t(e)?e.keyCode||e.which||this[e.key]:this[e]},getKey:function(e){var r=t(e);if(r&&e.key)return e.key;var i=n[r?e.keyCode||e.which:e];return Array.isArray(i)&&(i=r?i[e.shiftKey?1:0]:i[0]),i},Cancel:3,Help:6,Backspace:8,Tab:9,Clear:12,Enter:13,Shift:16,Control:17,Alt:18,Pause:19,CapsLock:20,Escape:27,Convert:28,NonConvert:29,Accept:30,ModeChange:31," ":32,PageUp:33,PageDown:34,End:35,Home:36,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40,Select:41,Print:42,Execute:43,PrintScreen:44,Insert:45,Delete:46,0:48,")":48,1:49,"!":49,2:50,"@":50,3:51,"#":51,4:52,$:52,5:53,"%":53,6:54,"^":54,7:55,"&":55,8:56,"*":56,9:57,"(":57,a:65,A:65,b:66,B:66,c:67,C:67,d:68,D:68,e:69,E:69,f:70,F:70,g:71,G:71,h:72,H:72,i:73,I:73,j:74,J:74,k:75,K:75,l:76,L:76,m:77,M:77,n:78,N:78,o:79,O:79,p:80,P:80,q:81,Q:81,r:82,R:82,s:83,S:83,t:84,T:84,u:85,U:85,v:86,V:86,w:87,W:87,x:88,X:88,y:89,Y:89,z:90,Z:90,OS:91,ContextMenu:93,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,F16:127,F17:128,F18:129,F19:130,F20:131,F21:132,F22:133,F23:134,F24:135,NumLock:144,ScrollLock:145,VolumeMute:181,VolumeDown:182,VolumeUp:183,";":186,":":186,"=":187,"+":187,",":188,"<":188,"-":189,_:189,".":190,">":190,"/":191,"?":191,"`":192,"~":192,"[":219,"{":219,"\\":220,"|":220,"]":221,"}":221,"'":222,'"':222,Meta:224,AltGraph:225,Attn:246,CrSel:247,ExSel:248,EraseEof:249,Play:250,ZoomOut:251};o.Spacebar=o[" "],o.Digit0=o[0],o.Digit1=o[1],o.Digit2=o[2],o.Digit3=o[3],o.Digit4=o[4],o.Digit5=o[5],o.Digit6=o[6],o.Digit7=o[7],o.Digit8=o[8],o.Digit9=o[9],o.Tilde=o["~"],o.GraveAccent=o["`"],o.ExclamationPoint=o["!"],o.AtSign=o["@"],o.PoundSign=o["#"],o.PercentSign=o["%"],o.Caret=o["^"],o.Ampersand=o["&"],o.PlusSign=o["+"],o.MinusSign=o["-"],o.EqualsSign=o["="],o.DivisionSign=o["/"],o.MultiplicationSign=o["*"],o.Comma=o[","],o.Decimal=o["."],o.Colon=o[":"],o.Semicolon=o[";"],o.Pipe=o["|"],o.BackSlash=o["\\"],o.QuestionMark=o["?"],o.SingleQuote=o["'"],o.DoubleQuote=o['"'],o.LeftCurlyBrace=o["{"],o.RightCurlyBrace=o["}"],o.LeftParenthesis=o["("],o.RightParenthesis=o[")"],o.LeftAngleBracket=o["<"],o.RightAngleBracket=o[">"],o.LeftSquareBracket=o["["],o.RightSquareBracket=o["]"],e.exports=o},888:function(e,t,n){"use strict";var r=n(47);function i(){}function a(){}a.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,a,o){if(o!==r){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:a,resetWarningCache:i};return n.PropTypes=n,n}},7:function(e,t,n){e.exports=n(888)()},47:function(e){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},463:function(e,t,n){"use strict";var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),S=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),N=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var j=!1;function V(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function q(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case T:return"Profiler";case I:return"StrictMode";case N:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case S:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case R:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function z(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function $(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){X(e,t);var n=W(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),r=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Ie=null;function Te(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Ee(e){xe?Ie?Ie.push(e):Ie=[e]:xe=e}function Se(){if(xe){var e=xe,t=Ie;if(Ie=xe=null,Te(e),t)for(e=0;e<t.length;e++)Te(t[e])}}function Ce(e,t){return e(t)}function Ne(){}var Ae=!1;function Re(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==xe||null!==Ie)&&(Ne(),Se())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var De=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){De=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,je=null,Ve={onError:function(e){Me=!0,Fe=e}};function qe(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Be(e)!==e)throw Error(a(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return We(i),e;if(o===r)return We(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,$e=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,xt,It,Tt,Et=!1,St=[],Ct=null,Nt=null,At=null,Rt=new Map,Pt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Nt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Rt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=ze(n)))return e.blockedOn=t,void Tt(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=$t(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function jt(e,t,n){Ut(e)&&n.delete(t)}function Vt(){Et=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==Nt&&Ut(Nt)&&(Nt=null),null!==At&&Ut(At)&&(At=null),Rt.forEach(jt),Pt.forEach(jt)}function qt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return qt(t,e)}if(0<St.length){qt(St[0],e);for(var n=1;n<St.length;n++){var r=St[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&qt(Ct,e),null!==Nt&&qt(Nt,e),null!==At&&qt(At,e),Rt.forEach(t),Pt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var zt=b.ReactCurrentBatchConfig,Wt=!0;function Kt(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=1,Gt(e,t,n,r)}finally{kt=i,zt.transition=a}}function Ht(e,t,n,r){var i=kt,a=zt.transition;zt.transition=null;try{kt=4,Gt(e,t,n,r)}finally{kt=i,zt.transition=a}}function Gt(e,t,n,r){if(Wt){var i=$t(e,t,n,r);if(null===i)Wr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Nt=Mt(Nt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=$t(e,t,n,r))&&Wr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Wr(e,t,r,null,n)}}var Qt=null;function $t(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Tn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),mn=an(F({},fn,{relatedTarget:0})),yn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function Tn(){return In}var En=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Tn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sn=an(En),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Nn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Tn})),An=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Rn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=an(Rn),Dn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),jn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zn[e.type]:"textarea"===t}function Kn(e,t,n,r){Ee(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Gn=null;function Qn(e){Ur(e,0)}function $n(e){if(G(bi(e)))return e}function Yn(e,t){if("change"===e)return t}var Xn=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Gn=Hn=null)}function nr(e){if("value"===e.propertyName&&$n(Gn)){var t=[];Kn(t,Gn,e,we(e)),Re(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return $n(Gn)}function ar(e,t){if("click"===e)return $n(t)}function or(e,t){if("input"===e||"change"===e)return $n(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Hr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Ir={};function Tr(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return xr[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Er=Tr("animationend"),Sr=Tr("animationiteration"),Cr=Tr("animationstart"),Nr=Tr("transitionend"),Ar=new Map,Rr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Ar.set(e,t),s(t,[e])}for(var Dr=0;Dr<Rr.length;Dr++){var Or=Rr[Dr];Pr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Pr(Er,"onAnimationEnd"),Pr(Sr,"onAnimationIteration"),Pr(Cr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Nr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(qe.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,je=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ue)throw e=je,Ue=!1,je=null,e}function jr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(zr(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),zr(n,e,r,t)}var qr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[qr]){e[qr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Vr(t,!1,e),Vr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[qr]||(t[qr]=!0,Vr("selectionchange",!1,t))}}function zr(e,t,n,r){switch(Yt(t)){case 1:var i=Kt;break;case 4:i=Ht;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Wr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Re((function(){var r=a,i=we(n),o=[];e:{var u=Ar.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Sn;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Nn;break;case Er:case Sr:case Cr:s=yn;break;case Nr:s=An;break;case"scroll":s=hn;break;case"wheel":s=Pn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Pe(p,h))&&l.push(Kr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Gr(d))p++;for(d=0,v=h;v;v=Gr(v))d++;for(;0<p-d;)l=Gr(l),p--;for(;0<d-p;)h=Gr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Gr(l),h=Gr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=Yn;else if(Wn(u))if(Xn)m=or;else{m=ir;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ar);switch(m&&(m=m(e,r))?Kn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?bi(r):window,e){case"focusin":(Wn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else Bn?Vn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==k?"onCompositionEnd"===k&&Bn&&(g=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,Bn=!0)),0<(y=Hr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=qn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return qn(t);case"keypress":return 32!==t.which?null:(jn=!0,Un);case"textInput":return(e=t.data)===Un&&jn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Zt=Jt=Xt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Pe(e,n))&&r.unshift(Kr(e,a,i)),null!=(a=Pe(e,t))&&r.push(Kr(e,a,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Pe(n,a))&&o.unshift(Kr(n,s,u)):i||null!=(s=Pe(n,a))&&o.push(Kr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var $r=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace($r,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var _i=[],xi=-1;function Ii(e){return{current:e}}function Ti(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function Ei(e,t){xi++,_i[xi]=e.current,e.current=t}var Si={},Ci=Ii(Si),Ni=Ii(!1),Ai=Si;function Ri(e,t){var n=e.type.contextTypes;if(!n)return Si;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ti(Ni),Ti(Ci)}function Oi(e,t,n){if(Ci.current!==Si)throw Error(a(168));Ei(Ci,t),Ei(Ni,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,z(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Si,Ai=Ci.current,Ei(Ci,e),Ei(Ni,Ni.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Ti(Ni),Ti(Ci),Ei(Ci,e)):Ti(Ni),Ei(Ni,n)}var Ui=null,ji=!1,Vi=!1;function qi(e){null===Ui?Ui=[e]:Ui.push(e)}function Bi(){if(!Vi&&null!==Ui){Vi=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,ji=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Ge(Ze,Bi),i}finally{kt=t,Vi=!1}}return null}var zi=[],Wi=0,Ki=null,Hi=0,Gi=[],Qi=0,$i=null,Yi=1,Xi="";function Ji(e,t){zi[Wi++]=Hi,zi[Wi++]=Ki,Ki=e,Hi=t}function Zi(e,t,n){Gi[Qi++]=Yi,Gi[Qi++]=Xi,Gi[Qi++]=$i,$i=e;var r=Yi;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Xi=a+e}else Yi=1<<a|n<<i|r,Xi=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Ki;)Ki=zi[--Wi],zi[Wi]=null,Hi=zi[--Wi],zi[Wi]=null;for(;e===$i;)$i=Gi[--Qi],Gi[Qi]=null,Xi=Gi[--Qi],Gi[Qi]=null,Yi=Gi[--Qi],Gi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==$i?{id:Yi,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=b.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Ii(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function _a(e){var t=ya.current;Ti(ya),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ia(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Ta(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ea=null;function Sa(e){null===Ea?Ea=[e]:Ea.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Sa(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Aa=!1;function Ra(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Da(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cs)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Sa(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Aa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Aa=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Ms|=o,e.lanes=o,e.memoizedState=f}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var ja=(new r.Component).refs;function Va(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var qa={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Da(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),a=Da(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(nc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Da(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(nc(t,e,r,n),La(t,e,r))}};function Ba(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function za(e,t,n){var r=!1,i=Si,a=t.contextType;return"object"===typeof a&&null!==a?a=Ta(a):(i=Pi(t)?Ai:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ri(e,i):Si),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=qa,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Wa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&qa.enqueueReplaceState(t,t.state,null)}function Ka(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ja,Ra(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ta(a):(a=Pi(t)?Ai:Ci.current,i.context=Ri(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Va(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&qa.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ha(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===ja&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Ga(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function $a(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===P&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ha(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=Ha(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Lc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=Ha(e,null,t),n.return=e,n;case _:return(t=Uc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Lc(t,e.mode,n,null)).return=e,t;Ga(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case P:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Ga(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Ga(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,m=null;null!==f&&v<u.length;v++){f.index>v?(m=f,f=null):m=f.sibling;var y=d(i,f,u[v],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y,f=m}if(v===u.length)return n(i,f),ia&&Ji(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Ji(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(m=p(f,i,v,u[v],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?v:m.key),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&Ji(i,v),c}function m(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,m=u=0,y=null,g=s.next();null!==v&&!g.done;m++,g=s.next()){v.index>m?(y=v,v=null):y=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=y);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,m),null===f?l=k:f.sibling=k,f=k,v=y}if(g.done)return n(i,v),ia&&Ji(i,m),l;if(null===v){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return ia&&Ji(i,m),l}for(v=r(i,v);!g.done;m++,g=s.next())null!==(g=p(v,i,m,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Ji(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ha(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Lc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Oc(o.type,o.key,o.props,null,r.mode,s)).ref=Ha(r,a,o),s.return=r,r=s)}return u(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,s)).return=r,r=a}return u(r);case P:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return m(r,a,o,s);Ga(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Fc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Ya=$a(!0),Xa=$a(!1),Ja={},Za=Ii(Ja),eo=Ii(Ja),to=Ii(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Ei(to,t),Ei(eo,e),Ei(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ti(Za),Ei(Za,t)}function io(){Ti(Za),Ti(eo),Ti(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ei(eo,e),Ei(Za,n))}function oo(e){eo.current===e&&(Ti(Za),Ti(eo))}var uo=Ii(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,po=0,vo=null,mo=null,yo=null,go=!1,ko=!1,bo=0,wo=0;function _o(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==mo&&null!==mo.next,po=0,yo=mo=vo=null,go=!1,t)throw Error(a(300));return e}function To(){var e=0!==bo;return bo=0,e}function Eo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?vo.memoizedState=yo=e:yo=yo.next=e,yo}function So(){if(null===mo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?vo.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?vo.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"===typeof t?t(e):t}function No(e){var t=So(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Ms|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Ms|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=So(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ro(){}function Po(e,t){var n=vo,r=So(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,Wo(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,jo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Ns)throw Error(a(349));0!==(30&po)||Do(n,t,i)}return i}function Do(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Na(e,1);null!==t&&nc(t,e,1,-1)}function Uo(e){var t=Eo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function jo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Vo(){return So().memoizedState}function qo(e,t,n,r){var i=Eo();vo.flags|=e,i.memoizedState=jo(1|t,n,void 0,void 0===r?null:r)}function Bo(e,t,n,r){var i=So();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=jo(t,n,a,r))}vo.flags|=e,i.memoizedState=jo(1|t,n,a,r)}function zo(e,t){return qo(8390656,8,e,t)}function Wo(e,t){return Bo(2048,8,e,t)}function Ko(e,t){return Bo(4,2,e,t)}function Ho(e,t){return Bo(4,4,e,t)}function Go(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Bo(4,4,Go.bind(null,t,e),n)}function $o(){}function Yo(e,t){var n=So();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=So();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Ms|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return So().memoizedState}function tu(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){nc(n,e,r,ec()),au(n,t,r)}}function nu(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Sa(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(nc(n,e,r,i=ec()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Ta,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},uu={readContext:Ta,useCallback:function(e,t){return Eo().memoizedState=[e,void 0===t?null:t],e},useContext:Ta,useEffect:zo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,qo(4194308,4,Go.bind(null,t,e),n)},useLayoutEffect:function(e,t){return qo(4194308,4,e,t)},useInsertionEffect:function(e,t){return qo(4,2,e,t)},useMemo:function(e,t){var n=Eo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Eo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Eo().memoizedState=e},useState:Uo,useDebugValue:$o,useDeferredValue:function(e){return Eo().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),Eo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=Eo();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ns)throw Error(a(349));0!==(30&po)||Do(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,zo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,jo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Eo(),t=Ns.identifierPrefix;if(ia){var n=Xi;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Ta,useCallback:Yo,useContext:Ta,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:Xo,useReducer:No,useRef:Vo,useState:function(){return No(Co)},useDebugValue:$o,useDeferredValue:function(e){return Jo(So(),mo.memoizedState,e)},useTransition:function(){return[No(Co)[0],So().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Ta,useCallback:Yo,useContext:Ta,useEffect:Wo,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:Xo,useReducer:Ao,useRef:Vo,useState:function(){return Ao(Co)},useDebugValue:$o,useDeferredValue:function(e){var t=So();return null===mo?t.memoizedState=e:Jo(t,mo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],So().memoizedState]},useMutableSource:Ro,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=q(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Da(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ws||(Ws=!0,Ks=r),hu(0,t)},n}function vu(e,t,n){(n=Da(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Hs?Hs=new Set([this]):Hs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function yu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Da(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=b.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?Xa(t,null,n,r):Ya(t,e.child,n,r)}function _u(e,t,n,r,i){n=n.render;var a=t.ref;return Ia(t,i),r=Io(e,t,n,r,a,i),n=To(),null===e||bu?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i))}function xu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Pc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Iu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Wu(e,t,i)}return t.flags|=1,(e=Dc(a,r)).ref=t.ref,e.return=t,t.child=e}function Iu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Wu(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Su(e,t,n,r,i)}function Tu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ei(Ds,Ps),Ps|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ei(Ds,Ps),Ps|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ei(Ds,Ps),Ps|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ei(Ds,Ps),Ps|=r;return wu(e,t,i,n),t.child}function Eu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Su(e,t,n,r,i){var a=Pi(n)?Ai:Ci.current;return a=Ri(t,a),Ia(t,i),n=Io(e,t,n,r,a,i),r=To(),null===e||bu?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Wu(e,t,i))}function Cu(e,t,n,r,i){if(Pi(n)){var a=!0;Mi(t)}else a=!1;if(Ia(t,i),null===t.stateNode)zu(e,t),za(t,n,r),Ka(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ta(c):c=Ri(t,c=Pi(n)?Ai:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Wa(t,o,r,c),Aa=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ni.current||Aa?("function"===typeof l&&(Va(t,n,l,r),s=t.memoizedState),(u=Aa||Ba(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Pa(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ma(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ta(s):s=Ri(t,s=Pi(n)?Ai:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Wa(t,o,r,s),Aa=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ni.current||Aa?("function"===typeof d&&(Va(t,n,d,r),p=t.memoizedState),(c=Aa||Ba(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Nu(e,t,n,r,a,i)}function Nu(e,t,n,r,i,a){Eu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Wu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ya(t,e.child,null,a),t.child=Ya(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Au(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Ru(e,t,n,r,i){return da(),pa(i),t.flags|=256,wu(e,t,n,r),t.child}var Pu,Du,Ou,Lu={dehydrated:null,treeContext:null,retryLane:0};function Mu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ei(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Mc(s,i,0,null),e=Lc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Mu(n),t.memoizedState=Lu,e):Uu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,ju(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Mc({mode:"visible",children:r.children},i,0,null),(o=Lc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ya(t,e.child,null,u),t.child.memoizedState=Mu(u),t.memoizedState=Lu,o);if(0===(1&t.mode))return ju(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,ju(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=Ns)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),nc(r,e,i,-1))}return vc(),ju(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Sc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Gi[Qi++]=Yi,Gi[Qi++]=Xi,Gi[Qi++]=$i,Yi=e.id,Xi=e.overflow,$i=t),t=Uu(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Dc(r,u):(u=Lc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Mu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Lu,i}return e=(u=e.child).sibling,i=Dc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Uu(e,t){return(t=Mc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function ju(e,t,n,r){return null!==r&&pa(r),Ya(t,e.child,null,n),(e=Uu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Vu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function qu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Bu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Vu(e,n,t);else if(19===e.tag)Vu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ei(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),qu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}qu(t,!0,n,null,a);break;case"together":qu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function zu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ms|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ku(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Gu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hu(t),null;case 1:case 17:return Pi(t.type)&&Di(),Hu(t),null;case 3:return r=t.stateNode,io(),Ti(Ni),Ti(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(oc(aa),aa=null))),Hu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Du(e,t,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Hu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":jr("cancel",r),jr("close",r);break;case"iframe":case"object":case"embed":jr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],r);break;case"source":jr("error",r);break;case"img":case"image":case"link":jr("error",r),jr("load",r);break;case"details":jr("toggle",r);break;case"input":Y(r,o),jr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},jr("invalid",r);break;case"textarea":ie(r,o),jr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&jr("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Pu(e,t),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":jr("cancel",e),jr("close",e),i=r;break;case"iframe":case"object":case"embed":jr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)jr(Lr[i],e);i=r;break;case"source":jr("error",e),i=r;break;case"img":case"image":case"link":jr("error",e),jr("load",e),i=r;break;case"details":jr("toggle",e),i=r;break;case"input":Y(e,r),i=$(e,r),jr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),jr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),jr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&jr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+W(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Hu(t),null;case 6:if(e&&null!=t.stateNode)Ou(0,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Hu(t),null;case 13:if(Ti(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Hu(t),o=!1}else null!==aa&&(oc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Os&&(Os=3):vc())),null!==t.updateQueue&&(t.flags|=4),Hu(t),null);case 4:return io(),null===e&&Br(t.stateNode.containerInfo),Hu(t),null;case 10:return _a(t.type._context),Hu(t),null;case 19:if(Ti(uo),null===(o=t.memoizedState))return Hu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Ku(o,!1);else{if(0!==Os||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Ku(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ei(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>Bs&&(t.flags|=128,r=!0,Ku(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ku(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Hu(t),null}else 2*Xe()-o.renderingStartTime>Bs&&1073741824!==n&&(t.flags|=128,r=!0,Ku(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=uo.current,Ei(uo,r?1&n|2:1&n),t):(Hu(t),null);case 22:case 23:return fc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ps)&&(Hu(t),6&t.subtreeFlags&&(t.flags|=8192)):Hu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Qu(e,t){switch(ta(t),t.tag){case 1:return Pi(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ti(Ni),Ti(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ti(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ti(uo),null;case 4:return io(),null;case 10:return _a(t.type._context),null;case 22:case 23:return fc(),null;default:return null}}Pu=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Du=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=$(e,i),r=$(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&jr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Ou=function(e,t,n,r){n!==r&&(t.flags|=4)};var $u=!1,Yu=!1,Xu="function"===typeof WeakSet?WeakSet:Set,Ju=null;function Zu(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ic(e,t,r)}else n.current=null}function es(e,t,n){try{n()}catch(r){Ic(e,t,r)}}var ts=!1;function ns(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&es(t,n,a)}i=i.next}while(i!==r)}}function rs(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function is(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function as(e){var t=e.alternate;null!==t&&(e.alternate=null,as(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function os(e){return 5===e.tag||3===e.tag||4===e.tag}function us(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||os(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ss(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ss(e,t,n),e=e.sibling;null!==e;)ss(e,t,n),e=e.sibling}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}var ls=null,fs=!1;function hs(e,t,n){for(n=n.child;null!==n;)ds(e,t,n),n=n.sibling}function ds(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Yu||Zu(n,t);case 6:var r=ls,i=fs;ls=null,hs(e,t,n),fs=i,null!==(ls=r)&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ls.removeChild(n.stateNode));break;case 18:null!==ls&&(fs?(e=ls,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),Bt(e)):si(ls,n.stateNode));break;case 4:r=ls,i=fs,ls=n.stateNode.containerInfo,fs=!0,hs(e,t,n),ls=r,fs=i;break;case 0:case 11:case 14:case 15:if(!Yu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&es(n,t,o),i=i.next}while(i!==r)}hs(e,t,n);break;case 1:if(!Yu&&(Zu(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ic(n,t,u)}hs(e,t,n);break;case 21:hs(e,t,n);break;case 22:1&n.mode?(Yu=(r=Yu)||null!==n.memoizedState,hs(e,t,n),Yu=r):hs(e,t,n);break;default:hs(e,t,n)}}function ps(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xu),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function vs(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:ls=s.stateNode,fs=!1;break e;case 3:case 4:ls=s.stateNode.containerInfo,fs=!0;break e}s=s.return}if(null===ls)throw Error(a(160));ds(o,u,i),ls=null,fs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ic(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ms(t,e),t=t.sibling}function ms(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vs(t,e),ys(e),4&r){try{ns(3,e,e.return),rs(3,e)}catch(m){Ic(e,e.return,m)}try{ns(5,e,e.return)}catch(m){Ic(e,e.return,m)}}break;case 1:vs(t,e),ys(e),512&r&&null!==n&&Zu(n,n.return);break;case 5:if(vs(t,e),ys(e),512&r&&null!==n&&Zu(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Ic(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&X(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Ic(e,e.return,m)}}break;case 6:if(vs(t,e),ys(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Ic(e,e.return,m)}}break;case 3:if(vs(t,e),ys(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(m){Ic(e,e.return,m)}break;case 4:default:vs(t,e),ys(e);break;case 13:vs(t,e),ys(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(qs=Xe())),4&r&&ps(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Yu=(l=Yu)||f,vs(t,e),Yu=l):vs(t,e),ys(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Ju=e,f=e.child;null!==f;){for(h=Ju=f;null!==Ju;){switch(p=(d=Ju).child,d.tag){case 0:case 11:case 14:case 15:ns(4,d,d.return);break;case 1:Zu(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(m){Ic(r,n,m)}}break;case 5:Zu(d,d.return);break;case 22:if(null!==d.memoizedState){ws(h);continue}}null!==p?(p.return=d,Ju=p):ws(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(m){Ic(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){Ic(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:vs(t,e),ys(e),4&r&&ps(e);case 21:}}function ys(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(os(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cs(e,us(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;ss(e,us(e),o);break;default:throw Error(a(161))}}catch(u){Ic(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function gs(e,t,n){Ju=e,ks(e,t,n)}function ks(e,t,n){for(var r=0!==(1&e.mode);null!==Ju;){var i=Ju,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$u;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Yu;u=$u;var c=Yu;if($u=o,(Yu=s)&&!c)for(Ju=i;null!==Ju;)s=(o=Ju).child,22===o.tag&&null!==o.memoizedState?_s(i):null!==s?(s.return=o,Ju=s):_s(i);for(;null!==a;)Ju=a,ks(a,t,n),a=a.sibling;Ju=i,$u=u,Yu=c}bs(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Ju=a):bs(e)}}function bs(e){for(;null!==Ju;){var t=Ju;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Yu||rs(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Yu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(a(163))}Yu||512&t.flags&&is(t)}catch(d){Ic(t,t.return,d)}}if(t===e){Ju=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ju=n;break}Ju=t.return}}function ws(e){for(;null!==Ju;){var t=Ju;if(t===e){Ju=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ju=n;break}Ju=t.return}}function _s(e){for(;null!==Ju;){var t=Ju;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rs(4,t)}catch(s){Ic(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ic(t,i,s)}}var a=t.return;try{is(t)}catch(s){Ic(t,a,s)}break;case 5:var o=t.return;try{is(t)}catch(s){Ic(t,o,s)}}}catch(s){Ic(t,t.return,s)}if(t===e){Ju=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Ju=u;break}Ju=t.return}}var xs,Is=Math.ceil,Ts=b.ReactCurrentDispatcher,Es=b.ReactCurrentOwner,Ss=b.ReactCurrentBatchConfig,Cs=0,Ns=null,As=null,Rs=0,Ps=0,Ds=Ii(0),Os=0,Ls=null,Ms=0,Fs=0,Us=0,js=null,Vs=null,qs=0,Bs=1/0,zs=null,Ws=!1,Ks=null,Hs=null,Gs=!1,Qs=null,$s=0,Ys=0,Xs=null,Js=-1,Zs=0;function ec(){return 0!==(6&Cs)?Xe():-1!==Js?Js:Js=Xe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cs)&&0!==Rs?Rs&-Rs:null!==va.transition?(0===Zs&&(Zs=vt()),Zs):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nc(e,t,n,r){if(50<Ys)throw Ys=0,Xs=null,Error(a(185));yt(e,n,r),0!==(2&Cs)&&e===Ns||(e===Ns&&(0===(2&Cs)&&(Fs|=n),4===Os&&uc(e,Rs)),rc(e,r),1===n&&0===Cs&&0===(1&t.mode)&&(Bs=Xe()+500,ji&&Bi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ns?Rs:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){ji=!0,qi(e)}(sc.bind(null,e)):qi(sc.bind(null,e)),oi((function(){0===(6&Cs)&&Bi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Js=-1,Zs=0,0!==(6&Cs))throw Error(a(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===Ns?Rs:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Cs;Cs|=2;var o=pc();for(Ns===e&&Rs===t||(zs=null,Bs=Xe()+500,hc(e,t));;)try{gc();break}catch(s){dc(e,s)}wa(),Ts.current=o,Cs=i,null!==As?t=0:(Ns=null,Rs=0,t=Os)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=ac(e,i))),1===t)throw n=Ls,hc(e,0),uc(e,r),rc(e,Xe()),n;if(6===t)uc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(o=pt(e))&&(r=o,t=ac(e,o))),1===t))throw n=Ls,hc(e,0),uc(e,r),rc(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,Vs,zs);break;case 3:if(uc(e,r),(130023424&r)===r&&10<(t=qs+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,Vs,zs),t);break}wc(e,Vs,zs);break;case 4:if(uc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Is(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,Vs,zs),r);break}wc(e,Vs,zs);break;default:throw Error(a(329))}}}return rc(e,Xe()),e.callbackNode===n?ic.bind(null,e):null}function ac(e,t){var n=js;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Vs,Vs=n,null!==t&&oc(t)),e}function oc(e){null===Vs?Vs=e:Vs.push.apply(Vs,e)}function uc(e,t){for(t&=~Us,t&=~Fs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function sc(e){if(0!==(6&Cs))throw Error(a(327));_c();var t=ht(e,0);if(0===(1&t))return rc(e,Xe()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=ac(e,r))}if(1===n)throw n=Ls,hc(e,0),uc(e,t),rc(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Vs,zs),rc(e,Xe()),null}function cc(e,t){var n=Cs;Cs|=1;try{return e(t)}finally{0===(Cs=n)&&(Bs=Xe()+500,ji&&Bi())}}function lc(e){null!==Qs&&0===Qs.tag&&0===(6&Cs)&&_c();var t=Cs;Cs|=1;var n=Ss.transition,r=kt;try{if(Ss.transition=null,kt=1,e)return e()}finally{kt=r,Ss.transition=n,0===(6&(Cs=t))&&Bi()}}function fc(){Ps=Ds.current,Ti(Ds)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==As)for(n=As.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:io(),Ti(Ni),Ti(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ti(uo);break;case 10:_a(r.type._context);break;case 22:case 23:fc()}n=n.return}if(Ns=e,As=e=Dc(e.current,null),Rs=Ps=t,Os=0,Ls=null,Us=Fs=Ms=0,Vs=js=null,null!==Ea){for(t=0;t<Ea.length;t++)if(null!==(r=(n=Ea[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ea=null}return e}function dc(e,t){for(;;){var n=As;try{if(wa(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,yo=mo=vo=null,ko=!1,bo=0,Es.current=null,null===n||null===n.return){Os=1,Ls=t,As=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Rs,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=yu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&mu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var m=new Set;m.add(c),t.updateQueue=m}else v.add(c);break e}if(0===(1&t)){mu(o,l,t),vc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var y=yu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gu(y,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Os&&(Os=2),null===js?js=[o]:js.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Hs||!Hs.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(b){t=b,As===n&&null!==n&&(As=n=n.return);continue}break}}function pc(){var e=Ts.current;return Ts.current=ou,null===e?ou:e}function vc(){0!==Os&&3!==Os&&2!==Os||(Os=4),null===Ns||0===(268435455&Ms)&&0===(268435455&Fs)||uc(Ns,Rs)}function mc(e,t){var n=Cs;Cs|=2;var r=pc();for(Ns===e&&Rs===t||(zs=null,hc(e,t));;)try{yc();break}catch(i){dc(e,i)}if(wa(),Cs=n,Ts.current=r,null!==As)throw Error(a(261));return Ns=null,Rs=0,Os}function yc(){for(;null!==As;)kc(As)}function gc(){for(;null!==As&&!$e();)kc(As)}function kc(e){var t=xs(e.alternate,e,Ps);e.memoizedProps=e.pendingProps,null===t?bc(e):As=t,Es.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Gu(n,t,Ps)))return void(As=n)}else{if(null!==(n=Qu(n,t)))return n.flags&=32767,void(As=n);if(null===e)return Os=6,void(As=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(As=t);As=t=e}while(null!==t);0===Os&&(Os=5)}function wc(e,t,n){var r=kt,i=Ss.transition;try{Ss.transition=null,kt=1,function(e,t,n,r){do{_c()}while(null!==Qs);if(0!==(6&Cs))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ns&&(As=Ns=null,Rs=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gs||(Gs=!0,Nc(tt,(function(){return _c(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Ss.transition,Ss.transition=null;var u=kt;kt=1;var s=Cs;Cs|=4,Es.current=null,function(e,t){if(ei=Wt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Wt=!1,Ju=t;null!==Ju;)if(e=(t=Ju).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ju=e;else for(;null!==Ju;){t=Ju;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var m=v.memoizedProps,y=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Ic(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Ju=e;break}Ju=t.return}v=ts,ts=!1}(e,n),ms(n,e),pr(ti),Wt=!!ei,ti=ei=null,e.current=n,gs(n,e,i),Ye(),Cs=s,kt=u,Ss.transition=o}else e.current=n;if(Gs&&(Gs=!1,Qs=e,$s=i),o=e.pendingLanes,0===o&&(Hs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ws)throw Ws=!1,e=Ks,Ks=null,e;0!==(1&$s)&&0!==e.tag&&_c(),o=e.pendingLanes,0!==(1&o)?e===Xs?Ys++:(Ys=0,Xs=e):Ys=0,Bi()}(e,t,n,r)}finally{Ss.transition=i,kt=r}return null}function _c(){if(null!==Qs){var e=bt($s),t=Ss.transition,n=kt;try{if(Ss.transition=null,kt=16>e?16:e,null===Qs)var r=!1;else{if(e=Qs,Qs=null,$s=0,0!==(6&Cs))throw Error(a(331));var i=Cs;for(Cs|=4,Ju=e.current;null!==Ju;){var o=Ju,u=o.child;if(0!==(16&Ju.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Ju=l;null!==Ju;){var f=Ju;switch(f.tag){case 0:case 11:case 15:ns(8,f,o)}var h=f.child;if(null!==h)h.return=f,Ju=h;else for(;null!==Ju;){var d=(f=Ju).sibling,p=f.return;if(as(f),f===l){Ju=null;break}if(null!==d){d.return=p,Ju=d;break}Ju=p}}}var v=o.alternate;if(null!==v){var m=v.child;if(null!==m){v.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Ju=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Ju=u;else e:for(;null!==Ju;){if(0!==(2048&(o=Ju).flags))switch(o.tag){case 0:case 11:case 15:ns(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Ju=g;break e}Ju=o.return}}var k=e.current;for(Ju=k;null!==Ju;){var b=(u=Ju).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Ju=b;else e:for(u=k;null!==Ju;){if(0!==(2048&(s=Ju).flags))try{switch(s.tag){case 0:case 11:case 15:rs(9,s)}}catch(_){Ic(s,s.return,_)}if(s===u){Ju=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Ju=w;break e}Ju=s.return}}if(Cs=i,Bi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,Ss.transition=t}}return!1}function xc(e,t,n){e=Oa(e,t=pu(0,t=lu(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function Ic(e,t,n){if(3===e.tag)xc(e,e,n);else for(;null!==t;){if(3===t.tag){xc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Hs||!Hs.has(r))){t=Oa(t,e=vu(t,e=lu(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Tc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Ns===e&&(Rs&n)===n&&(4===Os||3===Os&&(130023424&Rs)===Rs&&500>Xe()-qs?hc(e,0):Us|=n),rc(e,t)}function Ec(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=ec();null!==(e=Na(e,t))&&(yt(e,t,n),rc(e,n))}function Sc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ec(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ec(e,n)}function Nc(e,t){return Ge(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Ac(e,t,n,r)}function Pc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Pc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Lc(n.children,i,o,t);case I:u=8,i|=8;break;case T:return(e=Rc(12,n,t,2|i)).elementType=T,e.lanes=o,e;case N:return(e=Rc(13,n,t,i)).elementType=N,e.lanes=o,e;case A:return(e=Rc(19,n,t,i)).elementType=A,e.lanes=o,e;case D:return Mc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:u=10;break e;case S:u=9;break e;case C:u=11;break e;case R:u=14;break e;case P:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Rc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Lc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Mc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Vc(e,t,n,r,i,a,o,u,s){return e=new jc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Rc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ra(a),e}function qc(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Bc(e){if(!e)return Si;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Li(e,n,t)}return t}function zc(e,t,n,r,i,a,o,u,s){return(e=Vc(n,r,!0,e,0,a,0,u,s)).context=Bc(null),n=e.current,(a=Da(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function Wc(e,t,n,r){var i=t.current,a=ec(),o=tc(i);return n=Bc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Da(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(nc(e,i,o,a),La(e,i,o)),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}xs=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ni.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Au(t),da();break;case 5:ao(t);break;case 1:Pi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ei(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ei(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fu(e,t,n):(Ei(uo,1&uo.current),null!==(e=Wu(e,t,n))?e.sibling:null);Ei(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Bu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ei(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Tu(e,t,n)}return Wu(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;zu(e,t),e=t.pendingProps;var i=Ri(t,Ci.current);Ia(t,n),i=Io(null,t,r,e,i,n);var o=To();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Ra(t),i.updater=qa,t.stateNode=i,i._reactInternals=t,Ka(t,r,e,n),t=Nu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(zu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Pc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===R)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Su(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=_u(null,t,r,e,n);break e;case 14:t=xu(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Su(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Au(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Pa(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Ru(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Ru(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Xa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Wu(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Eu(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Fu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ya(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_u(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ei(ya,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ni.current){t=Wu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Da(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),xa(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ia(t,n),r=r(i=Ta(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),xu(e,t,r,i=ma(r.type,i),n);case 15:return Iu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),zu(e,t),t.tag=1,Pi(r)?(e=!0,Mi(t)):e=!1,Ia(t,n),za(t,r,i),Ka(t,r,i,n),Nu(null,t,r,!0,e,n);case 19:return Bu(e,t,n);case 22:return Tu(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Kc(o);u.call(e)}}Wc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Kc(o);a.call(e)}}var o=zc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[pi]=o.current,Br(8===e.nodeType?e.parentNode:e),lc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Kc(s);u.call(e)}}var s=Vc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[pi]=s.current,Br(8===e.nodeType?e.parentNode:e),lc((function(){Wc(t,s,n,r)})),s}(n,t,e,i,r);return Kc(o)}Yc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Wc(e,t,null,null)},Yc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;lc((function(){Wc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),rc(t,Xe()),0===(6&Cs)&&(Bs=Xe()+500,Bi()))}break;case 13:lc((function(){var t=Na(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Gc(e,1)}},_t=function(e){if(13===e.tag){var t=Na(e,134217728);if(null!==t)nc(t,e,134217728,ec());Gc(e,134217728)}},xt=function(e){if(13===e.tag){var t=tc(e),n=Na(e,t);if(null!==n)nc(n,e,t,ec());Gc(e,t)}},It=function(){return kt},Tt=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));G(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Ne=lc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Ee,Se,cc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(a(200));return qc(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Vc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return lc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(lc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){"use strict";var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){"use strict";var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var b=k.prototype=new g;b.constructor=k,v(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var S=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function N(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(S,"$&/")+"/"),N(o,t,i,"",(function(e){return e}))):null!=o&&(E(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(S,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=N(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=N(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return N(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function R(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},D={transition:null},O={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:D,ReactCurrentOwner:x};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)_.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=T,t.createFactory=function(e){var t=T.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:R}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){"use strict";e.exports=n(117)},184:function(e,t,n){"use strict";e.exports=n(374)},813:function(e,t){"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,b(e),!v)if(null!==r(c))v=!0,D(_);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function _(e,n){v=!1,m&&(m=!1,g(E),E=-1),p=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!N());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&O(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,I=!1,T=null,E=-1,S=5,C=-1;function N(){return!(t.unstable_now()-C<S)}function A(){if(null!==T){var e=t.unstable_now();C=e;var n=!0;try{n=T(!0,e)}finally{n?x():(I=!1,T=null)}}else I=!1}if("function"===typeof k)x=function(){k(A)};else if("undefined"!==typeof MessageChannel){var R=new MessageChannel,P=R.port2;R.port1.onmessage=A,x=function(){P.postMessage(null)}}else x=function(){y(A,0)};function D(e){T=e,I||(I=!0,x())}function O(e,n){E=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,D(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(E),E=-1):m=!0,O(w,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,D(_))),e},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){"use strict";e.exports=n(813)},613:function(e){e.exports=function(e,t,n,r){var i=n?n.call(r,e,t):void 0;if(void 0!==i)return!!i;if(e===t)return!0;if("object"!==typeof e||!e||"object"!==typeof t||!t)return!1;var a=Object.keys(e),o=Object.keys(t);if(a.length!==o.length)return!1;for(var u=Object.prototype.hasOwnProperty.bind(t),s=0;s<a.length;s++){var c=a[s];if(!u(c))return!1;var l=e[c],f=t[c];if(!1===(i=n?n.call(r,l,f,c):void 0)||void 0===i&&l!==f)return!1}return!0}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var a=Object.create(null);n.r(a);var o={};e=e||[null,t({}),t([]),t(t)];for(var u=2&i&&r;"object"==typeof u&&!~e.indexOf(u);u=t(u))Object.getOwnPropertyNames(u).forEach((function(e){o[e]=function(){return r[e]}}));return o.default=function(){return r},n.d(a,o),a}}(),n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";var e={};n.r(e),n.d(e,{FirebaseError:function(){return wu},SDK_VERSION:function(){return qs},_DEFAULT_ENTRY_NAME:function(){return Cs},_addComponent:function(){return Ps},_addOrOverwriteComponent:function(){return Ds},_apps:function(){return As},_clearComponents:function(){return Fs},_components:function(){return Rs},_getProvider:function(){return Ls},_registerComponent:function(){return Os},_removeServiceInstance:function(){return Ms},deleteApp:function(){return Ks},getApp:function(){return zs},getApps:function(){return Ws},initializeApp:function(){return Bs},onLog:function(){return Qs},registerVersion:function(){return Gs},setLogLevel:function(){return $s}});var t,r=n(791),i=n.t(r,2),a=n(250);function o(e){if(Array.isArray(e))return e}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){if(e){if("string"===typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){return o(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||s(e,t)||c()}function f(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function h(e){return function(e){if(Array.isArray(e))return u(e)}(e)||f(e)||s(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function v(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===p(t)?t:String(t)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,v(r.key),r)}}function y(e,t,n){return t&&m(e.prototype,t),n&&m(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function k(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}function b(e){return b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},b(e)}function w(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t){if(t&&("object"===p(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _(e)}function I(e){var t=w();return function(){var n,r=b(e);if(t){var i=b(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x(this,n)}}function T(e,t,n){return T=w()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&g(i,n.prototype),i},T.apply(null,arguments)}function E(e){var t="function"===typeof Map?new Map:void 0;return E=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return T(e,arguments,b(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),g(n,e)},E(e)}function S(e){return o(e)||f(e)||s(e)||c()}function C(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=s(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function N(){return N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(t||(t={}));var A,R="popstate";function P(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function D(e){return{usr:e.state,key:e.key}}function O(e,t,n,r){return void 0===n&&(n=null),N({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?M(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function L(e){var t=e.pathname,n=void 0===t?"/":t,r=e.search,i=void 0===r?"":r,a=e.hash,o=void 0===a?"":a;return i&&"?"!==i&&(n+="?"===i.charAt(0)?i:"?"+i),o&&"#"!==o&&(n+="#"===o.charAt(0)?o:"#"+o),n}function M(e){var t={};if(e){var n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));var r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function F(e){var t="undefined"!==typeof window&&"undefined"!==typeof window.location&&"null"!==window.location.origin?window.location.origin:window.location.href,n="string"===typeof e?e:L(e);return P(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}function U(e,n,r,i){void 0===i&&(i={});var a=i,o=a.window,u=void 0===o?document.defaultView:o,s=a.v5Compat,c=void 0!==s&&s,l=u.history,f=t.Pop,h=null;function d(){f=t.Pop,h&&h({action:f,location:p.location})}var p={get action(){return f},get location(){return e(u,l)},listen:function(e){if(h)throw new Error("A history only accepts one active listener");return u.addEventListener(R,d),h=e,function(){u.removeEventListener(R,d),h=null}},createHref:function(e){return n(u,e)},encodeLocation:function(e){var t=F("string"===typeof e?e:L(e));return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,n){f=t.Push;var i=O(p.location,e,n);r&&r(i,e);var a=D(i),o=p.createHref(i);try{l.pushState(a,"",o)}catch(Rg){u.location.assign(o)}c&&h&&h({action:f,location:p.location})},replace:function(e,n){f=t.Replace;var i=O(p.location,e,n);r&&r(i,e);var a=D(i),o=p.createHref(i);l.replaceState(a,"",o),c&&h&&h({action:f,location:p.location})},go:function(e){return l.go(e)}};return p}function j(e,t,n){void 0===n&&(n="/");var r=Q(("string"===typeof t?M(t):t).pathname||"/",n);if(null==r)return null;var i=V(e);!function(e){e.sort((function(e,t){return e.score!==t.score?t.score-e.score:function(e,t){var n=e.length===t.length&&e.slice(0,-1).every((function(e,n){return e===t[n]}));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((function(e){return e.childrenIndex})),t.routesMeta.map((function(e){return e.childrenIndex})))}))}(i);for(var a=null,o=0;null==a&&o<i.length;++o)a=K(i[o],G(r));return a}function V(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");var i=function(e,i,a){var o={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};o.relativePath.startsWith("/")&&(P(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));var u=Z([r,o.relativePath]),s=n.concat(o);e.children&&e.children.length>0&&(P(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+u+'".'),V(e.children,t,s,u)),(null!=e.path||e.index)&&t.push({path:u,score:W(u,e.index),routesMeta:s})};return e.forEach((function(e,t){var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?")){var r,a=C(q(e.path));try{for(a.s();!(r=a.n()).done;){var o=r.value;i(e,t,o)}}catch(u){a.e(u)}finally{a.f()}}else i(e,t)})),t}function q(e){var t=e.split("/");if(0===t.length)return[];var n=S(t),r=n[0],i=n.slice(1),a=r.endsWith("?"),o=r.replace(/\?$/,"");if(0===i.length)return a?[o,""]:[o];var u=q(i.join("/")),s=[];return s.push.apply(s,h(u.map((function(e){return""===e?o:[o,e].join("/")})))),a&&s.push.apply(s,h(u)),s.map((function(t){return e.startsWith("/")&&""===t?"/":t}))}!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(A||(A={}));var B=/^:\w+$/,z=function(e){return"*"===e};function W(e,t){var n=e.split("/"),r=n.length;return n.some(z)&&(r+=-2),t&&(r+=2),n.filter((function(e){return!z(e)})).reduce((function(e,t){return e+(B.test(t)?3:""===t?1:10)}),r)}function K(e,t){for(var n=e.routesMeta,r={},i="/",a=[],o=0;o<n.length;++o){var u=n[o],s=o===n.length-1,c="/"===i?t:t.slice(i.length)||"/",l=H({path:u.relativePath,caseSensitive:u.caseSensitive,end:s},c);if(!l)return null;Object.assign(r,l.params);var f=u.route;a.push({params:r,pathname:Z([i,l.pathname]),pathnameBase:ee(Z([i,l.pathnameBase])),route:f}),"/"!==l.pathnameBase&&(i=Z([i,l.pathnameBase]))}return a}function H(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});var n=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);$("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');var r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(function(e,t){return r.push(t),"/([^\\/]+)"}));e.endsWith("*")?(r.push("*"),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");var a=new RegExp(i,t?void 0:"i");return[a,r]}(e.path,e.caseSensitive,e.end),r=l(n,2),i=r[0],a=r[1],o=t.match(i);if(!o)return null;var u=o[0],s=u.replace(/(.)\/+$/,"$1"),c=o.slice(1),f=a.reduce((function(e,t,n){if("*"===t){var r=c[n]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return e[t]=function(e,t){try{return decodeURIComponent(e)}catch(Rg){return $(!1,'The value for the URL param "'+t+'" will not be decoded because the string "'+e+'" is a malformed URL segment. This is probably due to a bad percent encoding ('+Rg+")."),e}}(c[n]||"",t),e}),{});return{params:f,pathname:u,pathnameBase:s,pattern:e}}function G(e){try{return decodeURI(e)}catch(Rg){return $(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+Rg+")."),e}}function Q(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;var n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function $(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function Y(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function X(e){return e.filter((function(e,t){return 0===t||e.route.path&&e.route.path.length>0}))}function J(e,t,n,r){var i;void 0===r&&(r=!1),"string"===typeof e?i=M(e):(P(!(i=N({},e)).pathname||!i.pathname.includes("?"),Y("?","pathname","search",i)),P(!i.pathname||!i.pathname.includes("#"),Y("#","pathname","hash",i)),P(!i.search||!i.search.includes("#"),Y("#","search","hash",i)));var a,o=""===e||""===i.pathname,u=o?"/":i.pathname;if(r||null==u)a=n;else{var s=t.length-1;if(u.startsWith("..")){for(var c=u.split("/");".."===c[0];)c.shift(),s-=1;i.pathname=c.join("/")}a=s>=0?t[s]:"/"}var l=function(e,t){void 0===t&&(t="/");var n="string"===typeof e?M(e):e,r=n.pathname,i=n.search,a=void 0===i?"":i,o=n.hash,u=void 0===o?"":o,s=r?r.startsWith("/")?r:function(e,t){var n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((function(e){".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(r,t):t;return{pathname:s,search:te(a),hash:ne(u)}}(i,a),f=u&&"/"!==u&&u.endsWith("/"),h=(o||"."===u)&&n.endsWith("/");return l.pathname.endsWith("/")||!f&&!h||(l.pathname+="/"),l}var Z=function(e){return e.join("/").replace(/\/\/+/g,"/")},ee=function(e){return e.replace(/\/+$/,"").replace(/^\/*/,"/")},te=function(e){return e&&"?"!==e?e.startsWith("?")?e:"?"+e:""},ne=function(e){return e&&"#"!==e?e.startsWith("#")?e:"#"+e:""},re=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n)}(E(Error));var ie=y((function e(t,n,r,i){d(this,e),void 0===i&&(i=!1),this.status=t,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}));function ae(e){return e instanceof ie}var oe=["post","put","patch","delete"],ue=(new Set(oe),["get"].concat(oe));new Set(ue),new Set([301,302,303,307,308]),new Set([307,308]),"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;function se(){return se=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},se.apply(this,arguments)}var ce="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},le=r.useState,fe=r.useEffect,he=r.useLayoutEffect,de=r.useDebugValue;function pe(e){var t=e.getSnapshot,n=e.value;try{var r=t();return!ce(n,r)}catch(Rg){return!0}}"undefined"===typeof window||"undefined"===typeof window.document||window.document.createElement,function(e){e.useSyncExternalStore}(i);var ve=r.createContext(null);var me=r.createContext(null);var ye=r.createContext(null);var ge=r.createContext(null);var ke=r.createContext(null);var be=r.createContext(null);var we=r.createContext({outlet:null,matches:[]});var _e=r.createContext(null);function xe(){return null!=r.useContext(be)}function Ie(){return xe()||P(!1),r.useContext(be).location}function Te(){xe()||P(!1);var e=r.useContext(ke),t=e.basename,n=e.navigator,i=r.useContext(we).matches,a=Ie().pathname,o=JSON.stringify(X(i).map((function(e){return e.pathnameBase}))),u=r.useRef(!1);r.useEffect((function(){u.current=!0}));var s=r.useCallback((function(e,r){if(void 0===r&&(r={}),u.current)if("number"!==typeof e){var i=J(e,JSON.parse(o),a,"path"===r.relative);"/"!==t&&(i.pathname="/"===i.pathname?t:Z([t,i.pathname])),(r.replace?n.replace:n.push)(i,r.state,r)}else n.go(e)}),[t,n,o,a]);return s}var Ee=r.createContext(null);function Se(e,t){var n=(void 0===t?{}:t).relative,i=r.useContext(we).matches,a=Ie().pathname,o=JSON.stringify(X(i).map((function(e){return e.pathnameBase})));return r.useMemo((function(){return J(e,JSON.parse(o),a,"path"===n)}),[e,o,a,n])}function Ce(){var e=function(){var e,t=r.useContext(_e),n=Oe(Ae.UseRouteError),i=Le(Ae.UseRouteError);if(t)return t;return null==(e=n.errors)?void 0:e[i]}(),t=ae(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:i},o={padding:"2px 4px",backgroundColor:i};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unhandled Thrown Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:a},n):null,r.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),r.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own\xa0",r.createElement("code",{style:o},"errorElement")," props on\xa0",r.createElement("code",{style:o},"<Route>")))}var Ne,Ae,Re=function(e){k(n,e);var t=I(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).state={location:e.location,error:e.error},r}return y(n,[{key:"componentDidCatch",value:function(e,t){console.error("React Router caught the following error during render",e,t)}},{key:"render",value:function(){return this.state.error?r.createElement(we.Provider,{value:this.props.routeContext},r.createElement(_e.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}},{key:"getDerivedStateFromProps",value:function(e,t){return t.location!==e.location?{error:e.error,location:e.location}:{error:e.error||t.error,location:t.location}}}]),n}(r.Component);function Pe(e){var t=e.routeContext,n=e.match,i=e.children,a=r.useContext(ve);return a&&n.route.errorElement&&(a._deepestRenderedBoundaryId=n.route.id),r.createElement(we.Provider,{value:t},i)}function De(e,t,n){if(void 0===t&&(t=[]),null==e){if(null==n||!n.errors)return null;e=n.matches}var i=e,a=null==n?void 0:n.errors;if(null!=a){var o=i.findIndex((function(e){return e.route.id&&(null==a?void 0:a[e.route.id])}));o>=0||P(!1),i=i.slice(0,Math.min(i.length,o+1))}return i.reduceRight((function(e,o,u){var s=o.route.id?null==a?void 0:a[o.route.id]:null,c=n?o.route.errorElement||r.createElement(Ce,null):null,l=t.concat(i.slice(0,u+1)),f=function(){return r.createElement(Pe,{match:o,routeContext:{outlet:e,matches:l}},s?c:void 0!==o.route.element?o.route.element:e)};return n&&(o.route.errorElement||0===u)?r.createElement(Re,{location:n.location,component:c,error:s,children:f(),routeContext:{outlet:null,matches:l}}):f()}),null)}function Oe(e){var t=r.useContext(ye);return t||P(!1),t}function Le(e){var t=function(e){var t=r.useContext(we);return t||P(!1),t}(),n=t.matches[t.matches.length-1];return n.route.id||P(!1),n.route.id}!function(e){e.UseRevalidator="useRevalidator"}(Ne||(Ne={})),function(e){e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator"}(Ae||(Ae={}));var Me;function Fe(e){return function(e){var t=r.useContext(we).outlet;return t?r.createElement(Ee.Provider,{value:e},t):t}(e.context)}function Ue(e){P(!1)}function je(e){var n=e.basename,i=void 0===n?"/":n,a=e.children,o=void 0===a?null:a,u=e.location,s=e.navigationType,c=void 0===s?t.Pop:s,l=e.navigator,f=e.static,h=void 0!==f&&f;xe()&&P(!1);var d=i.replace(/^\/*/,"/"),p=r.useMemo((function(){return{basename:d,navigator:l,static:h}}),[d,l,h]);"string"===typeof u&&(u=M(u));var v=u,m=v.pathname,y=void 0===m?"/":m,g=v.search,k=void 0===g?"":g,b=v.hash,w=void 0===b?"":b,_=v.state,x=void 0===_?null:_,I=v.key,T=void 0===I?"default":I,E=r.useMemo((function(){var e=Q(y,d);return null==e?null:{pathname:e,search:k,hash:w,state:x,key:T}}),[d,y,k,w,x,T]);return null==E?null:r.createElement(ke.Provider,{value:p},r.createElement(be.Provider,{children:o,value:{location:E,navigationType:c}}))}function Ve(e){var n=e.children,i=e.location,a=r.useContext(me);return function(e,n){xe()||P(!1);var i,a=r.useContext(ke).navigator,o=r.useContext(ye),u=r.useContext(we).matches,s=u[u.length-1],c=s?s.params:{},l=(s&&s.pathname,s?s.pathnameBase:"/"),f=(s&&s.route,Ie());if(n){var h,d="string"===typeof n?M(n):n;"/"===l||(null==(h=d.pathname)?void 0:h.startsWith(l))||P(!1),i=d}else i=f;var p=i.pathname||"/",v=j(e,{pathname:"/"===l?p:p.slice(l.length)||"/"}),m=De(v&&v.map((function(e){return Object.assign({},e,{params:Object.assign({},c,e.params),pathname:Z([l,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?l:Z([l,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})})),u,o||void 0);return n&&m?r.createElement(be.Provider,{value:{location:se({pathname:"/",search:"",hash:"",state:null,key:"default"},i),navigationType:t.Pop}},m):m}(a&&!n?a.router.routes:Be(n),i)}!function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"}(Me||(Me={}));var qe=new Promise((function(){}));r.Component;function Be(e,t){void 0===t&&(t=[]);var n=[];return r.Children.forEach(e,(function(e,i){if(r.isValidElement(e))if(e.type!==r.Fragment){e.type!==Ue&&P(!1),e.props.index&&e.props.children&&P(!1);var a=[].concat(h(t),[i]),o={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,hasErrorBoundary:null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle};e.props.children&&(o.children=Be(e.props.children,a)),n.push(o)}else n.push.apply(n,Be(e.props.children,t))})),n}function ze(){return ze=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ze.apply(this,arguments)}function We(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var Ke=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset"];function He(e){var t,n=e.basename,i=e.children,a=e.window,o=r.useRef();null==o.current&&(o.current=(void 0===(t={window:a,v5Compat:!0})&&(t={}),U((function(e,t){var n=e.location;return O("",{pathname:n.pathname,search:n.search,hash:n.hash},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:L(t)}),null,t)));var u=o.current,s=l(r.useState({action:u.action,location:u.location}),2),c=s[0],f=s[1];return r.useLayoutEffect((function(){return u.listen(f)}),[u]),r.createElement(je,{basename:n,children:i,location:c.location,navigationType:c.action,navigator:u})}var Ge=r.forwardRef((function(e,t){var n=e.onClick,i=e.relative,a=e.reloadDocument,o=e.replace,u=e.state,s=e.target,c=e.to,l=e.preventScrollReset,f=We(e,Ke),h=function(e,t){var n=(void 0===t?{}:t).relative;xe()||P(!1);var i=r.useContext(ke),a=i.basename,o=i.navigator,u=Se(e,{relative:n}),s=u.hash,c=u.pathname,l=u.search,f=c;return"/"!==a&&(f="/"===c?a:Z([a,c])),o.createHref({pathname:f,search:l,hash:s})}(c,{relative:i}),d=function(e,t){var n=void 0===t?{}:t,i=n.target,a=n.replace,o=n.state,u=n.preventScrollReset,s=n.relative,c=Te(),l=Ie(),f=Se(e,{relative:s});return r.useCallback((function(t){if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,i)){t.preventDefault();var n=void 0!==a?a:L(l)===L(f);c(e,{replace:n,state:o,preventScrollReset:u,relative:s})}}),[l,c,f,a,o,i,e,u,s])}(c,{replace:o,state:u,target:s,preventScrollReset:l,relative:i});return r.createElement("a",ze({},f,{href:h,onClick:a?n:function(e){n&&n(e),e.defaultPrevented||d(e)},ref:t,target:s}))}));var Qe,$e;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(Qe||(Qe={})),function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}($e||($e={}));function Ye(){return Ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ye.apply(this,arguments)}function Xe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,g(e,t)}var Je=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i};var Ze=function(){this.__data__=[],this.size=0};var et=function(e,t){return e===t||e!==e&&t!==t};var tt=function(e,t){for(var n=e.length;n--;)if(et(e[n][0],t))return n;return-1},nt=Array.prototype.splice;var rt=function(e){var t=this.__data__,n=tt(t,e);return!(n<0)&&(n==t.length-1?t.pop():nt.call(t,n,1),--this.size,!0)};var it=function(e){var t=this.__data__,n=tt(t,e);return n<0?void 0:t[n][1]};var at=function(e){return tt(this.__data__,e)>-1};var ot=function(e,t){var n=this.__data__,r=tt(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function ut(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}ut.prototype.clear=Ze,ut.prototype.delete=rt,ut.prototype.get=it,ut.prototype.has=at,ut.prototype.set=ot;var st=ut;var ct=function(){this.__data__=new st,this.size=0};var lt=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};var ft=function(e){return this.__data__.get(e)};var ht=function(e){return this.__data__.has(e)},dt="object"==typeof global&&global&&global.Object===Object&&global,pt="object"==typeof self&&self&&self.Object===Object&&self,vt=dt||pt||Function("return this")(),mt=vt.Symbol,yt=Object.prototype,gt=yt.hasOwnProperty,kt=yt.toString,bt=mt?mt.toStringTag:void 0;var wt=function(e){var t=gt.call(e,bt),n=e[bt];try{e[bt]=void 0;var r=!0}catch(a){}var i=kt.call(e);return r&&(t?e[bt]=n:delete e[bt]),i},_t=Object.prototype.toString;var xt=function(e){return _t.call(e)},It=mt?mt.toStringTag:void 0;var Tt=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":It&&It in Object(e)?wt(e):xt(e)};var Et=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var St=function(e){if(!Et(e))return!1;var t=Tt(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},Ct=vt["__core-js_shared__"],Nt=function(){var e=/[^.]+$/.exec(Ct&&Ct.keys&&Ct.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();var At=function(e){return!!Nt&&Nt in e},Rt=Function.prototype.toString;var Pt=function(e){if(null!=e){try{return Rt.call(e)}catch(t){}try{return e+""}catch(t){}}return""},Dt=/^\[object .+?Constructor\]$/,Ot=Function.prototype,Lt=Object.prototype,Mt=Ot.toString,Ft=Lt.hasOwnProperty,Ut=RegExp("^"+Mt.call(Ft).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var jt=function(e){return!(!Et(e)||At(e))&&(St(e)?Ut:Dt).test(Pt(e))};var Vt=function(e,t){return null==e?void 0:e[t]};var qt=function(e,t){var n=Vt(e,t);return jt(n)?n:void 0},Bt=qt(vt,"Map"),zt=qt(Object,"create");var Wt=function(){this.__data__=zt?zt(null):{},this.size=0};var Kt=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Ht=Object.prototype.hasOwnProperty;var Gt=function(e){var t=this.__data__;if(zt){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Ht.call(t,e)?t[e]:void 0},Qt=Object.prototype.hasOwnProperty;var $t=function(e){var t=this.__data__;return zt?void 0!==t[e]:Qt.call(t,e)};var Yt=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=zt&&void 0===t?"__lodash_hash_undefined__":t,this};function Xt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Xt.prototype.clear=Wt,Xt.prototype.delete=Kt,Xt.prototype.get=Gt,Xt.prototype.has=$t,Xt.prototype.set=Yt;var Jt=Xt;var Zt=function(){this.size=0,this.__data__={hash:new Jt,map:new(Bt||st),string:new Jt}};var en=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};var tn=function(e,t){var n=e.__data__;return en(t)?n["string"==typeof t?"string":"hash"]:n.map};var nn=function(e){var t=tn(this,e).delete(e);return this.size-=t?1:0,t};var rn=function(e){return tn(this,e).get(e)};var an=function(e){return tn(this,e).has(e)};var on=function(e,t){var n=tn(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function un(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}un.prototype.clear=Zt,un.prototype.delete=nn,un.prototype.get=rn,un.prototype.has=an,un.prototype.set=on;var sn=un;var cn=function(e,t){var n=this.__data__;if(n instanceof st){var r=n.__data__;if(!Bt||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new sn(r)}return n.set(e,t),this.size=n.size,this};function ln(e){var t=this.__data__=new st(e);this.size=t.size}ln.prototype.clear=ct,ln.prototype.delete=lt,ln.prototype.get=ft,ln.prototype.has=ht,ln.prototype.set=cn;var fn=ln;var hn=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};var dn=function(e){return this.__data__.has(e)};function pn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new sn;++t<n;)this.add(e[t])}pn.prototype.add=pn.prototype.push=hn,pn.prototype.has=dn;var vn=pn;var mn=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1};var yn=function(e,t){return e.has(t)};var gn=function(e,t,n,r,i,a){var o=1&n,u=e.length,s=t.length;if(u!=s&&!(o&&s>u))return!1;var c=a.get(e),l=a.get(t);if(c&&l)return c==t&&l==e;var f=-1,h=!0,d=2&n?new vn:void 0;for(a.set(e,t),a.set(t,e);++f<u;){var p=e[f],v=t[f];if(r)var m=o?r(v,p,f,t,e,a):r(p,v,f,e,t,a);if(void 0!==m){if(m)continue;h=!1;break}if(d){if(!mn(t,(function(e,t){if(!yn(d,t)&&(p===e||i(p,e,n,r,a)))return d.push(t)}))){h=!1;break}}else if(p!==v&&!i(p,v,n,r,a)){h=!1;break}}return a.delete(e),a.delete(t),h},kn=vt.Uint8Array;var bn=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n};var wn=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n},_n=mt?mt.prototype:void 0,xn=_n?_n.valueOf:void 0;var In=function(e,t,n,r,i,a,o){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!a(new kn(e),new kn(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return et(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var u=bn;case"[object Set]":var s=1&r;if(u||(u=wn),e.size!=t.size&&!s)return!1;var c=o.get(e);if(c)return c==t;r|=2,o.set(e,t);var l=gn(u(e),u(t),r,i,a,o);return o.delete(e),l;case"[object Symbol]":if(xn)return xn.call(e)==xn.call(t)}return!1};var Tn=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e},En=Array.isArray;var Sn=function(e,t,n){var r=t(e);return En(e)?r:Tn(r,n(e))};var Cn=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a};var Nn=function(){return[]},An=Object.prototype.propertyIsEnumerable,Rn=Object.getOwnPropertySymbols,Pn=Rn?function(e){return null==e?[]:(e=Object(e),Cn(Rn(e),(function(t){return An.call(e,t)})))}:Nn;var Dn=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};var On=function(e){return null!=e&&"object"==typeof e};var Ln=function(e){return On(e)&&"[object Arguments]"==Tt(e)},Mn=Object.prototype,Fn=Mn.hasOwnProperty,Un=Mn.propertyIsEnumerable,jn=Ln(function(){return arguments}())?Ln:function(e){return On(e)&&Fn.call(e,"callee")&&!Un.call(e,"callee")},Vn=jn;var qn=function(){return!1},Bn="object"==typeof exports&&exports&&!exports.nodeType&&exports,zn=Bn&&"object"==typeof module&&module&&!module.nodeType&&module,Wn=zn&&zn.exports===Bn?vt.Buffer:void 0,Kn=(Wn?Wn.isBuffer:void 0)||qn,Hn=/^(?:0|[1-9]\d*)$/;var Gn=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&Hn.test(e))&&e>-1&&e%1==0&&e<t};var Qn=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991},$n={};$n["[object Float32Array]"]=$n["[object Float64Array]"]=$n["[object Int8Array]"]=$n["[object Int16Array]"]=$n["[object Int32Array]"]=$n["[object Uint8Array]"]=$n["[object Uint8ClampedArray]"]=$n["[object Uint16Array]"]=$n["[object Uint32Array]"]=!0,$n["[object Arguments]"]=$n["[object Array]"]=$n["[object ArrayBuffer]"]=$n["[object Boolean]"]=$n["[object DataView]"]=$n["[object Date]"]=$n["[object Error]"]=$n["[object Function]"]=$n["[object Map]"]=$n["[object Number]"]=$n["[object Object]"]=$n["[object RegExp]"]=$n["[object Set]"]=$n["[object String]"]=$n["[object WeakMap]"]=!1;var Yn=function(e){return On(e)&&Qn(e.length)&&!!$n[Tt(e)]};var Xn=function(e){return function(t){return e(t)}},Jn="object"==typeof exports&&exports&&!exports.nodeType&&exports,Zn=Jn&&"object"==typeof module&&module&&!module.nodeType&&module,er=Zn&&Zn.exports===Jn&&dt.process,tr=function(){try{var e=Zn&&Zn.require&&Zn.require("util").types;return e||er&&er.binding&&er.binding("util")}catch(t){}}(),nr=tr&&tr.isTypedArray,rr=nr?Xn(nr):Yn,ir=Object.prototype.hasOwnProperty;var ar=function(e,t){var n=En(e),r=!n&&Vn(e),i=!n&&!r&&Kn(e),a=!n&&!r&&!i&&rr(e),o=n||r||i||a,u=o?Dn(e.length,String):[],s=u.length;for(var c in e)!t&&!ir.call(e,c)||o&&("length"==c||i&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Gn(c,s))||u.push(c);return u},or=Object.prototype;var ur=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||or)};var sr=function(e,t){return function(n){return e(t(n))}},cr=sr(Object.keys,Object),lr=Object.prototype.hasOwnProperty;var fr=function(e){if(!ur(e))return cr(e);var t=[];for(var n in Object(e))lr.call(e,n)&&"constructor"!=n&&t.push(n);return t};var hr=function(e){return null!=e&&Qn(e.length)&&!St(e)};var dr=function(e){return hr(e)?ar(e):fr(e)};var pr=function(e){return Sn(e,dr,Pn)},vr=Object.prototype.hasOwnProperty;var mr=function(e,t,n,r,i,a){var o=1&n,u=pr(e),s=u.length;if(s!=pr(t).length&&!o)return!1;for(var c=s;c--;){var l=u[c];if(!(o?l in t:vr.call(t,l)))return!1}var f=a.get(e),h=a.get(t);if(f&&h)return f==t&&h==e;var d=!0;a.set(e,t),a.set(t,e);for(var p=o;++c<s;){var v=e[l=u[c]],m=t[l];if(r)var y=o?r(m,v,l,t,e,a):r(v,m,l,e,t,a);if(!(void 0===y?v===m||i(v,m,n,r,a):y)){d=!1;break}p||(p="constructor"==l)}if(d&&!p){var g=e.constructor,k=t.constructor;g==k||!("constructor"in e)||!("constructor"in t)||"function"==typeof g&&g instanceof g&&"function"==typeof k&&k instanceof k||(d=!1)}return a.delete(e),a.delete(t),d},yr=qt(vt,"DataView"),gr=qt(vt,"Promise"),kr=qt(vt,"Set"),br=qt(vt,"WeakMap"),wr="[object Map]",_r="[object Promise]",xr="[object Set]",Ir="[object WeakMap]",Tr="[object DataView]",Er=Pt(yr),Sr=Pt(Bt),Cr=Pt(gr),Nr=Pt(kr),Ar=Pt(br),Rr=Tt;(yr&&Rr(new yr(new ArrayBuffer(1)))!=Tr||Bt&&Rr(new Bt)!=wr||gr&&Rr(gr.resolve())!=_r||kr&&Rr(new kr)!=xr||br&&Rr(new br)!=Ir)&&(Rr=function(e){var t=Tt(e),n="[object Object]"==t?e.constructor:void 0,r=n?Pt(n):"";if(r)switch(r){case Er:return Tr;case Sr:return wr;case Cr:return _r;case Nr:return xr;case Ar:return Ir}return t});var Pr=Rr,Dr="[object Arguments]",Or="[object Array]",Lr="[object Object]",Mr=Object.prototype.hasOwnProperty;var Fr=function(e,t,n,r,i,a){var o=En(e),u=En(t),s=o?Or:Pr(e),c=u?Or:Pr(t),l=(s=s==Dr?Lr:s)==Lr,f=(c=c==Dr?Lr:c)==Lr,h=s==c;if(h&&Kn(e)){if(!Kn(t))return!1;o=!0,l=!1}if(h&&!l)return a||(a=new fn),o||rr(e)?gn(e,t,n,r,i,a):In(e,t,s,n,r,i,a);if(!(1&n)){var d=l&&Mr.call(e,"__wrapped__"),p=f&&Mr.call(t,"__wrapped__");if(d||p){var v=d?e.value():e,m=p?t.value():t;return a||(a=new fn),i(v,m,n,r,a)}}return!!h&&(a||(a=new fn),mr(e,t,n,r,i,a))};var Ur=function e(t,n,r,i,a){return t===n||(null==t||null==n||!On(t)&&!On(n)?t!==t&&n!==n:Fr(t,n,r,i,e,a))};var jr=function(e,t,n,r){var i=n.length,a=i,o=!r;if(null==e)return!a;for(e=Object(e);i--;){var u=n[i];if(o&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++i<a;){var s=(u=n[i])[0],c=e[s],l=u[1];if(o&&u[2]){if(void 0===c&&!(s in e))return!1}else{var f=new fn;if(r)var h=r(c,l,s,e,t,f);if(!(void 0===h?Ur(l,c,3,r,f):h))return!1}}return!0};var Vr=function(e){return e===e&&!Et(e)};var qr=function(e){for(var t=dr(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Vr(i)]}return t};var Br=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}};var zr=function(e){var t=qr(e);return 1==t.length&&t[0][2]?Br(t[0][0],t[0][1]):function(n){return n===e||jr(n,e,t)}};var Wr=function(e){return"symbol"==typeof e||On(e)&&"[object Symbol]"==Tt(e)},Kr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Hr=/^\w*$/;var Gr=function(e,t){if(En(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!Wr(e))||(Hr.test(e)||!Kr.test(e)||null!=t&&e in Object(t))};function Qr(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function n(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(Qr.Cache||sn),n}Qr.Cache=sn;var $r=Qr;var Yr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Xr=/\\(\\)?/g,Jr=function(e){var t=$r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Yr,(function(e,n,r,i){t.push(r?i.replace(Xr,"$1"):n||e)})),t})),Zr=mt?mt.prototype:void 0,ei=Zr?Zr.toString:void 0;var ti=function e(t){if("string"==typeof t)return t;if(En(t))return Je(t,e)+"";if(Wr(t))return ei?ei.call(t):"";var n=t+"";return"0"==n&&1/t==-Infinity?"-0":n};var ni=function(e){return null==e?"":ti(e)};var ri=function(e,t){return En(e)?e:Gr(e,t)?[e]:Jr(ni(e))};var ii=function(e){if("string"==typeof e||Wr(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t};var ai=function(e,t){for(var n=0,r=(t=ri(t,e)).length;null!=e&&n<r;)e=e[ii(t[n++])];return n&&n==r?e:void 0};var oi=function(e,t,n){var r=null==e?void 0:ai(e,t);return void 0===r?n:r};var ui=function(e,t){return null!=e&&t in Object(e)};var si=function(e,t,n){for(var r=-1,i=(t=ri(t,e)).length,a=!1;++r<i;){var o=ii(t[r]);if(!(a=null!=e&&n(e,o)))break;e=e[o]}return a||++r!=i?a:!!(i=null==e?0:e.length)&&Qn(i)&&Gn(o,i)&&(En(e)||Vn(e))};var ci=function(e,t){return null!=e&&si(e,t,ui)};var li=function(e,t){return Gr(e)&&Vr(t)?Br(ii(e),t):function(n){var r=oi(n,e);return void 0===r&&r===t?ci(n,e):Ur(t,r,3)}};var fi=function(e){return e};var hi=function(e){return function(t){return null==t?void 0:t[e]}};var di=function(e){return function(t){return ai(t,e)}};var pi=function(e){return Gr(e)?hi(ii(e)):di(e)};var vi=function(e){return"function"==typeof e?e:null==e?fi:"object"==typeof e?En(e)?li(e[0],e[1]):zr(e):pi(e)};var mi=function(e){return function(t,n,r){for(var i=-1,a=Object(t),o=r(t),u=o.length;u--;){var s=o[e?u:++i];if(!1===n(a[s],s,a))break}return t}}();var yi=function(e,t){return function(n,r){if(null==n)return n;if(!hr(n))return e(n,r);for(var i=n.length,a=t?i:-1,o=Object(n);(t?a--:++a<i)&&!1!==r(o[a],a,o););return n}}((function(e,t){return e&&mi(e,t,dr)}));var gi=function(e,t){var n=-1,r=hr(e)?Array(e.length):[];return yi(e,(function(e,i,a){r[++n]=t(e,i,a)})),r};var ki=function(e,t){return(En(e)?Je:gi)(e,vi(t,3))};var bi=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)};var wi=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0};var _i=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=Array(i);++r<i;)a[r]=e[r+t];return a};var xi=function(e,t){return t.length<2?e:ai(e,_i(t,0,-1))};var Ii=function(e,t,n){t=ri(t,e);var r=null==(e=xi(e,t))?e:e[ii(wi(t))];return null==r?void 0:bi(r,e,n)},Ti=Math.max;var Ei=function(e,t,n){return t=Ti(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,a=Ti(r.length-t,0),o=Array(a);++i<a;)o[i]=r[t+i];i=-1;for(var u=Array(t+1);++i<t;)u[i]=r[i];return u[t]=n(o),bi(e,this,u)}};var Si=function(e){return function(){return e}},Ci=function(){try{var e=qt(Object,"defineProperty");return e({},"",{}),e}catch(t){}}(),Ni=Ci?function(e,t){return Ci(e,"toString",{configurable:!0,enumerable:!1,value:Si(t),writable:!0})}:fi,Ai=Date.now;var Ri=function(e){var t=0,n=0;return function(){var r=Ai(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}},Pi=Ri(Ni);var Di=function(e,t){return Pi(Ei(e,t,fi),e+"")},Oi=Di(Ii);function Li(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=Li(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}var Mi=function(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=Li(e))&&(r&&(r+=" "),r+=t);return r},Fi={1:"one",2:"two",3:"three",4:"four",5:"five",6:"six",7:"seven",8:"eight",9:"nine",10:"ten",11:"eleven",12:"twelve",13:"thirteen",14:"fourteen",15:"fifteen",16:"sixteen"};function Ui(e){var t=typeof e;return"string"===t||"number"===t?Fi[e]||e:""}var ji=function(e,t){return e&&t},Vi=function(e,t){return e&&!0!==e&&e+" "+t},qi=function(e,t){return e&&(!0===e?t:e+" "+t)},Bi=function(e,t){return e&&!0!==e?e.replace("large screen","large-screen").replace(/ vertically/g,"-vertically").split(" ").map((function(e){return e.replace("-"," ")+" "+t})).join(" "):null},zi=function(e){return"justified"===e?"justified":Vi(e,"aligned")},Wi=function(e){return Vi(e,"aligned")},Ki=function(e,t,n){if(void 0===t&&(t=""),void 0===n&&(n=!1),n&&"equal"===e)return"equal width";var r=typeof e;return"string"!==r&&"number"!==r||!t?Ui(e):Ui(e)+" "+t},Hi=function(e,t){var n=e.handledProps,r=void 0===n?[]:n;return Object.keys(t).reduce((function(e,n){return"childKey"===n||-1===r.indexOf(n)&&(e[n]=t[n]),e}),{})};var Gi=function(e,t,n){var r=e.defaultProps,i=void 0===r?{}:r;if(t.as&&t.as!==i.as)return t.as;if(n){var a=n();if(a)return a}return t.href?"a":i.as||"div"};var Qi=function(e,t){var n;return yi(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n};var $i=function(e,t,n){if(!Et(n))return!1;var r=typeof t;return!!("number"==r?hr(n)&&Gn(t,n.length):"string"==r&&t in n)&&et(n[t],e)};var Yi=function(e,t,n){var r=En(e)?mn:Qi;return n&&$i(e,t,n)&&(t=void 0),r(e,vi(t,3))},Xi=function(e){return null===e||void 0===e||Array.isArray(e)&&0===e.length};var Ji=function(e){return void 0===e},Zi=function(e,t,n,r){void 0===r&&(r=!1);var i,a=t[e];if(void 0!==a)return a;if(r){var o=t[(i=e,"default"+(i[0].toUpperCase()+i.slice(1)))];if(void 0!==o)return o;if(n){var u=n[e];if(void 0!==u)return u}}return"checked"!==e&&("value"===e?t.multiple?[]:"":void 0)},ea=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var a=(t=e.call.apply(e,[this].concat(r))||this).constructor,o=a.autoControlledProps,u=a.getAutoControlledStateFromProps,s=Oi(_(t),"getInitialAutoControlledState",t.props)||{},c=o.reduce((function(e,n){return e[n]=Zi(n,t.props,s,!0),e}),{});return t.state=Ye({},s,c,{autoControlledProps:o,getAutoControlledStateFromProps:u}),t}return Xe(t,e),t.getDerivedStateFromProps=function(e,t){var n=t.autoControlledProps,r=t.getAutoControlledStateFromProps,i=n.reduce((function(t,n){return!Ji(e[n])&&(t[n]=e[n]),t}),{});if(r){var a=r(e,Ye({},t,i),t);return Ye({},i,a)}return i},t.getAutoControlledStateFromProps=function(){return null},t}(r.Component);var ta=function(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1};var na=function(e){return e!==e};var ra=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1};var ia=function(e,t,n){return t===t?ra(e,t,n):ta(e,na,n)};var aa=function(e,t){return!!(null==e?0:e.length)&&ia(e,t,0)>-1};var oa=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1};var ua=function(){},sa=kr&&1/wn(new kr([,-0]))[1]==1/0?function(e){return new kr(e)}:ua,ca=sa;var la=function(e,t,n){var r=-1,i=aa,a=e.length,o=!0,u=[],s=u;if(n)o=!1,i=oa;else if(a>=200){var c=t?null:ca(e);if(c)return wn(c);o=!1,i=yn,s=new vn}else s=t?[]:u;e:for(;++r<a;){var l=e[r],f=t?t(l):l;if(l=n||0!==l?l:0,o&&f===f){for(var h=s.length;h--;)if(s[h]===f)continue e;t&&s.push(f),u.push(l)}else i(s,f,n)||(s!==u&&s.push(f),u.push(l))}return u};var fa=function(e){return e&&e.length?la(e):[]},ha=sr(Object.getPrototypeOf,Object),da=Function.prototype,pa=Object.prototype,va=da.toString,ma=pa.hasOwnProperty,ya=va.call(Object);var ga=function(e){if(!On(e)||"[object Object]"!=Tt(e))return!1;var t=ha(e);if(null===t)return!0;var n=ma.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&va.call(n)==ya};var ka=function(e){return"number"==typeof e||On(e)&&"[object Number]"==Tt(e)};var ba=function(e){return"string"==typeof e||!En(e)&&On(e)&&"[object String]"==Tt(e)};var wa=function(e){return!0===e||!1===e||On(e)&&"[object Boolean]"==Tt(e)};var _a=function(e){return null==e};function xa(e,t,n,i){if(void 0===i&&(i={}),"function"!==typeof e&&"string"!==typeof e)throw new Error("createShorthand() Component must be a string or function.");if(_a(n)||wa(n))return null;var a=ba(n),o=ka(n),u=St(n),s=r.isValidElement(n),c=ga(n),l=a||o||En(n);if(!u&&!s&&!c&&!l)return null;var f=i.defaultProps,h=void 0===f?{}:f,d=s&&n.props||c&&n||l&&t(n),p=i.overrideProps,v=void 0===p?{}:p;v=St(v)?v(Ye({},h,d)):v;var m=Ye({},h,d,v);if(h.className||v.className||d.className){var y=Mi(h.className,v.className,d.className);m.className=fa(y.split(" ")).join(" ")}if((h.style||v.style||d.style)&&(m.style=Ye({},h.style,d.style,v.style)),_a(m.key)){var g=m.childKey,k=i.autoGenerateKey,b=void 0===k||k;_a(g)?b&&(a||o)&&(m.key=n):(m.key="function"===typeof g?g(m):g,delete m.childKey)}return s?r.cloneElement(n,m):"function"===typeof m.children?m.children(e,Ye({},m,{children:void 0})):l||c?r.createElement(e,m):u?n(e,m,m.children):void 0}function Ia(e,t){if("function"!==typeof e&&"string"!==typeof e)throw new Error("createShorthandFactory() Component must be a string or function.");return function(n,r){return xa(e,t,n,r)}}var Ta=Ia("input",(function(e){return{type:e}})),Ea=Ia("label",(function(e){return{children:e}})),Sa=Ia("p",(function(e){return{children:e}}));function Ca(e){var t=e.children,n=e.className,i=e.content,a=Mi("header",n),o=Hi(Ca,e),u=Gi(Ca,e);return r.createElement(u,Ye({},o,{className:a}),Xi(t)?i:t)}Ca.handledProps=["as","children","className","content"],Ca.propTypes={};var Na=Ca;var Aa=function(e,t,n,r){var i=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n};var Ra=function(e){return function(t){return null==e?void 0:e[t]}}({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),Pa=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Da=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var Oa=function(e){return(e=ni(e))&&e.replace(Pa,Ra).replace(Da,"")},La=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var Ma=function(e){return e.match(La)||[]},Fa=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var Ua=function(e){return Fa.test(e)},ja="\\ud800-\\udfff",Va="\\u2700-\\u27bf",qa="a-z\\xdf-\\xf6\\xf8-\\xff",Ba="A-Z\\xc0-\\xd6\\xd8-\\xde",za="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Wa="["+za+"]",Ka="\\d+",Ha="["+Va+"]",Ga="["+qa+"]",Qa="[^"+ja+za+Ka+Va+qa+Ba+"]",$a="(?:\\ud83c[\\udde6-\\uddff]){2}",Ya="[\\ud800-\\udbff][\\udc00-\\udfff]",Xa="["+Ba+"]",Ja="(?:"+Ga+"|"+Qa+")",Za="(?:"+Xa+"|"+Qa+")",eo="(?:['\u2019](?:d|ll|m|re|s|t|ve))?",to="(?:['\u2019](?:D|LL|M|RE|S|T|VE))?",no="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",ro="[\\ufe0e\\ufe0f]?",io=ro+no+("(?:\\u200d(?:"+["[^"+ja+"]",$a,Ya].join("|")+")"+ro+no+")*"),ao="(?:"+[Ha,$a,Ya].join("|")+")"+io,oo=RegExp([Xa+"?"+Ga+"+"+eo+"(?="+[Wa,Xa,"$"].join("|")+")",Za+"+"+to+"(?="+[Wa,Xa+Ja,"$"].join("|")+")",Xa+"?"+Ja+"+"+eo,Xa+"+"+to,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ka,ao].join("|"),"g");var uo=function(e){return e.match(oo)||[]};var so=function(e,t,n){return e=ni(e),void 0===(t=n?void 0:t)?Ua(e)?uo(e):Ma(e):e.match(t)||[]},co=RegExp("['\u2019]","g");var lo=function(e){return function(t){return Aa(so(Oa(t).replace(co,"")),e,"")}};var fo=function(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:_i(e,t,n)},ho=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var po=function(e){return ho.test(e)};var vo=function(e){return e.split("")},mo="\\ud800-\\udfff",yo="["+mo+"]",go="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",ko="\\ud83c[\\udffb-\\udfff]",bo="[^"+mo+"]",wo="(?:\\ud83c[\\udde6-\\uddff]){2}",_o="[\\ud800-\\udbff][\\udc00-\\udfff]",xo="(?:"+go+"|"+ko+")"+"?",Io="[\\ufe0e\\ufe0f]?",To=Io+xo+("(?:\\u200d(?:"+[bo,wo,_o].join("|")+")"+Io+xo+")*"),Eo="(?:"+[bo+go+"?",go,wo,_o,yo].join("|")+")",So=RegExp(ko+"(?="+ko+")|"+Eo+To,"g");var Co=function(e){return e.match(So)||[]};var No=function(e){return po(e)?Co(e):vo(e)};var Ao=function(e){return function(t){t=ni(t);var n=po(t)?No(t):void 0,r=n?n[0]:t.charAt(0),i=n?fo(n,1).join(""):t.slice(1);return r[e]()+i}}("toUpperCase"),Ro=lo((function(e,t,n){return e+(n?" ":"")+Ao(t)}));function Po(e){var t=e.children,n=e.className,i=e.content,a=e.size,o=Mi(a,"icons",n),u=Hi(Po,e),s=Gi(Po,e);return r.createElement(s,Ye({},u,{className:o}),Xi(t)?i:t)}Po.handledProps=["as","children","className","content","size"],Po.propTypes={},Po.defaultProps={as:"i"};var Do=Po,Oo=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){t.props.disabled?e.preventDefault():Oi(t.props,"onClick",e,t.props)},t}Xe(t,e);var n=t.prototype;return n.getIconAriaOptions=function(){var e={},t=this.props,n=t["aria-label"],r=t["aria-hidden"];return _a(n)?e["aria-hidden"]="true":e["aria-label"]=n,_a(r)||(e["aria-hidden"]=r),e},n.render=function(){var e=this.props,n=e.bordered,i=e.circular,a=e.className,o=e.color,u=e.corner,s=e.disabled,c=e.fitted,l=e.flipped,f=e.inverted,h=e.link,d=e.loading,p=e.name,v=e.rotated,m=e.size,y=Mi(o,p,m,ji(n,"bordered"),ji(i,"circular"),ji(s,"disabled"),ji(c,"fitted"),ji(f,"inverted"),ji(h,"link"),ji(d,"loading"),qi(u,"corner"),Vi(l,"flipped"),Vi(v,"rotated"),"icon",a),g=Hi(t,this.props),k=Gi(t,this.props),b=this.getIconAriaOptions();return r.createElement(k,Ye({},g,b,{className:y,onClick:this.handleClick}))},t}(r.PureComponent);Oo.handledProps=["aria-hidden","aria-label","as","bordered","circular","className","color","corner","disabled","fitted","flipped","inverted","link","loading","name","rotated","size"],Oo.propTypes={},Oo.defaultProps={as:"i"},Oo.Group=Do,Oo.create=Ia(Oo,(function(e){return{name:e}}));var Lo=Oo,Mo=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){t.props.disabled||Oi(t.props,"onClick",e,t.props)},t}return Xe(t,e),t.prototype.render=function(){var e=this.props,n=e.active,i=e.children,a=e.className,o=e.color,u=e.content,s=e.disabled,c=e.fitted,l=e.header,f=e.icon,h=e.link,d=e.name,p=e.onClick,v=e.position,m=Mi(o,v,ji(n,"active"),ji(s,"disabled"),ji(!0===f||f&&!(d||u),"icon"),ji(l,"header"),ji(h,"link"),qi(c,"fitted"),"item",a),y=Gi(t,this.props,(function(){if(p)return"a"})),g=Hi(t,this.props);return Xi(i)?r.createElement(y,Ye({},g,{className:m,onClick:this.handleClick}),Lo.create(f,{autoGenerateKey:!1}),Xi(u)?Ro(d):u):r.createElement(y,Ye({},g,{className:m,onClick:this.handleClick}),i)},t}(r.Component);function Fo(e){var t=e.children,n=e.className,i=e.content,a=e.position,o=Mi(a,"menu",n),u=Hi(Fo,e),s=Gi(Fo,e);return r.createElement(s,Ye({},u,{className:o}),Xi(t)?i:t)}Mo.handledProps=["active","as","children","className","color","content","disabled","fitted","header","icon","index","link","name","onClick","position"],Mo.propTypes={},Mo.create=Ia(Mo,(function(e){return{content:e,name:e}})),Fo.handledProps=["as","children","className","content","position"],Fo.propTypes={};var Uo=Fo,jo=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleItemOverrides=function(e){return{onClick:function(n,r){var i=r.index;t.setState({activeIndex:i}),Oi(e,"onClick",n,r),Oi(t.props,"onItemClick",n,r)}}},t}Xe(t,e);var n=t.prototype;return n.renderItems=function(){var e=this,t=this.props.items,n=this.state.activeIndex;return ki(t,(function(t,r){return Mo.create(t,{defaultProps:{active:parseInt(n,10)===r,index:r},overrideProps:e.handleItemOverrides})}))},n.render=function(){var e=this.props,n=e.attached,i=e.borderless,a=e.children,o=e.className,u=e.color,s=e.compact,c=e.fixed,l=e.floated,f=e.fluid,h=e.icon,d=e.inverted,p=e.pagination,v=e.pointing,m=e.secondary,y=e.size,g=e.stackable,k=e.tabular,b=e.text,w=e.vertical,_=e.widths,x=Mi("ui",u,y,ji(i,"borderless"),ji(s,"compact"),ji(f,"fluid"),ji(d,"inverted"),ji(p,"pagination"),ji(v,"pointing"),ji(m,"secondary"),ji(g,"stackable"),ji(b,"text"),ji(w,"vertical"),qi(n,"attached"),qi(l,"floated"),qi(h,"icon"),qi(k,"tabular"),Vi(c,"fixed"),Ki(_,"item"),o,"menu"),I=Hi(t,this.props),T=Gi(t,this.props);return r.createElement(T,Ye({},I,{className:x}),Xi(a)?this.renderItems():a)},t}(ea);jo.handledProps=["activeIndex","as","attached","borderless","children","className","color","compact","defaultActiveIndex","fixed","floated","fluid","icon","inverted","items","onItemClick","pagination","pointing","secondary","size","stackable","tabular","text","vertical","widths"],jo.propTypes={},jo.autoControlledProps=["activeIndex"],jo.Header=Na,jo.Item=Mo,jo.Menu=Uo,jo.create=Ia(jo,(function(e){return{items:e}}));var Vo=jo;function qo(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}function Bo(){return Bo="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=qo(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Bo.apply(this,arguments)}function zo(){zo=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(N){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof h?t:h,o=Object.create(a.prototype),u=new E(i||[]);return r(o,"_invoke",{value:_(e,n,u)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}e.wrap=c;var f={};function h(){}function d(){}function v(){}var m={};s(m,a,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(S([])));g&&g!==t&&n.call(g,a)&&(m=g);var k=v.prototype=h.prototype=Object.create(m);function b(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function i(r,a,o,u){var s=l(e[r],e,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==p(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(f).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,u)}))}u(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function _(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return C()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=x(o,n);if(u){if(u===f)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,f;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function S(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=v,r(k,"constructor",{value:v,configurable:!0}),r(v,"constructor",{value:d,configurable:!0}),d.displayName=s(v,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,v):(e.__proto__=v,s(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},b(w.prototype),s(w.prototype,o,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new w(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},b(k),s(k,u,"Generator"),s(k,a,(function(){return this})),s(k,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=S,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:S(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function Wo(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(Rg){return void n(Rg)}u.done?t(s):Promise.resolve(s).then(r,i)}function Ko(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){Wo(a,r,i,o,u,"next",e)}function u(e){Wo(a,r,i,o,u,"throw",e)}o(void 0)}))}}function Ho(e,t,n){return(t=v(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Go=!1,Qo=!1,$o="${JSCORE_VERSION}",Yo=function(e,t){if(!e)throw Xo(t)},Xo=function(e){return new Error("Firebase Database ("+$o+") INTERNAL ASSERT FAILED: "+e)},Jo=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Zo={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Jo(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw Error();var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},eu=function(e){var t=Jo(e);return Zo.encodeByteArray(t,!0)},tu=function(e){return eu(e).replace(/\./g,"")},nu=function(e){try{return Zo.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function ru(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=ru(e[n],t[n]));return e}function iu(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function au(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(iu())}function ou(){try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(e){return!1}}function uu(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function su(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function cu(){var e=iu();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function lu(){return!0===Go||!0===Qo}function fu(){try{return"object"===typeof indexedDB}catch(e){return!1}}function hu(){return new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(Rg){t(Rg)}}))}var du=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},pu=function(){try{return du()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/Online-Booking-System",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&nu(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},vu=function(e){var t,n;return null===(n=null===(t=pu())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},mu=function(e){var t=vu(e);if(t){var n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));var r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]}},yu=function(){var e;return null===(e=pu())||void 0===e?void 0:e.config},gu=function(e){var t;return null===(t=pu())||void 0===t?void 0:t["_".concat(e)]},ku=function(){function e(){var t=this;d(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return y(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function bu(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[tu(JSON.stringify({alg:"none",type:"JWT"})),tu(JSON.stringify(a)),""].join(".")}var wu=function(e){k(n,e);var t=I(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(_(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(_(a),_u.prototype.create),a}return y(n)}(E(Error)),_u=function(){function e(t,n,r){d(this,e),this.service=t,this.serviceName=n,this.errors=r}return y(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?xu(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,")."),o=new wu(n,a,t);return o}}]),e}();function xu(e,t){return e.replace(Iu,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}var Iu=/\{\$([^}]+)}/g;function Tu(e){return JSON.parse(e)}function Eu(e){return JSON.stringify(e)}var Su=function(e){var t={},n={},r={},i="";try{var a=e.split(".");t=Tu(nu(a[0])||""),n=Tu(nu(a[1])||""),i=a[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}};function Cu(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Nu(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function Au(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function Ru(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function Pu(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Du(u)&&Du(s)){if(!Pu(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Du(e){return null!==e&&"object"===typeof e}function Ou(e){for(var t=[],n=function(){var e=l(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function Lu(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=l(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function Mu(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var Fu=function(){function e(){d(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return y(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"===typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var a=16;a<80;a++){var o=n[a-3]^n[a-8]^n[a-14]^n[a-16];n[a]=4294967295&(o<<1|o>>>31)}for(var u,s,c=this.chain_[0],l=this.chain_[1],f=this.chain_[2],h=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(u=h^l&(f^h),s=1518500249):(u=l^f^h,s=1859775393):p<60?(u=l&f|h&(l|f),s=2400959708):(u=l^f^h,s=3395469782);var v=(c<<5|c>>>27)+u+d+s+n[p]&4294967295;d=h,h=f,f=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+f&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,a=this.inbuf_;r<t;){if(0===a)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(i[a]=e.charCodeAt(r),++r,++a===this.blockSize){this.compress_(i),a=0;break}}else for(;r<t;)if(i[a]=e[r],++r,++a===this.blockSize){this.compress_(i),a=0;break}}this.inbuf_=a,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var a=24;a>=0;a-=8)e[r]=this.chain_[i]>>a&255,++r;return e}}]),e}();function Uu(e,t){var n=new ju(e,t);return n.subscribe.bind(n)}var ju=function(){function e(t,n){var r=this;d(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return y(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=C(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Vu),void 0===r.error&&(r.error=Vu),void 0===r.complete&&(r.complete=Vu);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Vu(){}function qu(e,t){return"".concat(e," failed: ").concat(t," argument ")}var Bu=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},zu=144e5;function Wu(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(zu,r+i)}function Ku(e){return e&&e._delegate?e._delegate:e}var Hu=function(){function e(t,n,r){d(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return y(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Gu="[DEFAULT]",Qu=function(){function e(t,n){d(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return y(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new ku;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Gu})}catch(s){}var t,n=C(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=l(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gu;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=Ko(zo().mark((function e(){var t;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(h(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),h(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gu;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gu;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=C(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=l(i.value,2),s=u[0],c=u[1],f=this.normalizeInstanceIdentifier(s);r===f&&c.resolve(a)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=C(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(mF){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Gu?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(mF){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gu;return this.component?this.component.multipleInstances?e:Gu:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var $u,Yu,Xu=function(){function e(t){d(this,e),this.name=t,this.providers=new Map}return y(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new Qu(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),Ju=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Yu||(Yu={}));var Zu={debug:Yu.DEBUG,verbose:Yu.VERBOSE,info:Yu.INFO,warn:Yu.WARN,error:Yu.ERROR,silent:Yu.SILENT},es=Yu.INFO,ts=(Ho($u={},Yu.DEBUG,"log"),Ho($u,Yu.VERBOSE,"log"),Ho($u,Yu.INFO,"info"),Ho($u,Yu.WARN,"warn"),Ho($u,Yu.ERROR,"error"),$u),ns=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=ts[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},rs=function(){function e(t){d(this,e),this.name=t,this._logLevel=es,this._logHandler=ns,this._userLogHandler=null,Ju.push(this)}return y(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in Yu))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?Zu[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Yu.DEBUG].concat(t)),this._logHandler.apply(this,[this,Yu.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Yu.VERBOSE].concat(t)),this._logHandler.apply(this,[this,Yu.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Yu.INFO].concat(t)),this._logHandler.apply(this,[this,Yu.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Yu.WARN].concat(t)),this._logHandler.apply(this,[this,Yu.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,Yu.ERROR].concat(t)),this._logHandler.apply(this,[this,Yu.ERROR].concat(t))}}]),e}();function is(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function as(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?is(Object(n),!0).forEach((function(t){Ho(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):is(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var os,us;var ss=new WeakMap,cs=new WeakMap,ls=new WeakMap,fs=new WeakMap,hs=new WeakMap;var ds={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return cs.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ls.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ms(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function ps(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(us||(us=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ys(this),n),ms(ss.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ms(e.apply(ys(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[ys(this),t].concat(r));return ls.set(a,t.sort?t.sort():[t]),ms(a)}}function vs(e){return"function"===typeof e?ps(e):(e instanceof IDBTransaction&&function(e){if(!cs.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));cs.set(e,t)}}(e),t=e,(os||(os=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,ds):e);var t}function ms(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(ms(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&ss.set(t,e)})).catch((function(){})),hs.set(t,e),t}(e);if(fs.has(e))return fs.get(e);var t=vs(e);return t!==e&&(fs.set(e,t),hs.set(t,e)),t}var ys=function(e){return hs.get(e)};var gs,ks,bs=["get","getKey","getAll","getAllKeys","count"],ws=["put","add","delete","clear"],_s=new Map;function xs(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(_s.get(t))return _s.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=ws.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||bs.includes(n))){var a=function(){var e=Ko(zo().mark((function e(t){var a,o,u,s,c,l,f=arguments;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return _s.set(t,a),a}}}ds=function(e){return as(as({},e),{},{get:function(t,n,r){return xs(t,n)||e.get(t,n,r)},has:function(t,n){return!!xs(t,n)||e.has(t,n)}})}(ds);var Is=function(){function e(t){d(this,e),this.container=t}return y(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Ts="@firebase/app",Es="0.9.0",Ss=new rs("@firebase/app"),Cs="[DEFAULT]",Ns=(Ho(gs={},Ts,"fire-core"),Ho(gs,"@firebase/app-compat","fire-core-compat"),Ho(gs,"@firebase/analytics","fire-analytics"),Ho(gs,"@firebase/analytics-compat","fire-analytics-compat"),Ho(gs,"@firebase/app-check","fire-app-check"),Ho(gs,"@firebase/app-check-compat","fire-app-check-compat"),Ho(gs,"@firebase/auth","fire-auth"),Ho(gs,"@firebase/auth-compat","fire-auth-compat"),Ho(gs,"@firebase/database","fire-rtdb"),Ho(gs,"@firebase/database-compat","fire-rtdb-compat"),Ho(gs,"@firebase/functions","fire-fn"),Ho(gs,"@firebase/functions-compat","fire-fn-compat"),Ho(gs,"@firebase/installations","fire-iid"),Ho(gs,"@firebase/installations-compat","fire-iid-compat"),Ho(gs,"@firebase/messaging","fire-fcm"),Ho(gs,"@firebase/messaging-compat","fire-fcm-compat"),Ho(gs,"@firebase/performance","fire-perf"),Ho(gs,"@firebase/performance-compat","fire-perf-compat"),Ho(gs,"@firebase/remote-config","fire-rc"),Ho(gs,"@firebase/remote-config-compat","fire-rc-compat"),Ho(gs,"@firebase/storage","fire-gcs"),Ho(gs,"@firebase/storage-compat","fire-gcs-compat"),Ho(gs,"@firebase/firestore","fire-fst"),Ho(gs,"@firebase/firestore-compat","fire-fst-compat"),Ho(gs,"fire-js","fire-js"),Ho(gs,"firebase","fire-js-all"),gs),As=new Map,Rs=new Map;function Ps(e,t){try{e.container.addComponent(t)}catch(n){Ss.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Ds(e,t){e.container.addOrOverwriteComponent(t)}function Os(e){var t=e.name;if(Rs.has(t))return Ss.debug("There were multiple attempts to register component ".concat(t,".")),!1;Rs.set(t,e);var n,r=C(As.values());try{for(r.s();!(n=r.n()).done;){Ps(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function Ls(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ms(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Cs;Ls(e,t).clearInstance(n)}function Fs(){Rs.clear()}var Us=(Ho(ks={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Ho(ks,"bad-app-name","Illegal App name: '{$appName}"),Ho(ks,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),Ho(ks,"app-deleted","Firebase App named '{$appName}' already deleted"),Ho(ks,"no-options","Need to provide options, when not being deployed to hosting via source."),Ho(ks,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Ho(ks,"invalid-log-argument","First argument to `onLog` must be null or a function."),Ho(ks,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),Ho(ks,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),Ho(ks,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),Ho(ks,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),ks),js=new _u("app","Firebase",Us),Vs=function(){function e(t,n,r){var i=this;d(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Hu("app",(function(){return i}),"PUBLIC"))}return y(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw js.create("app-deleted",{appName:this._name})}}]),e}(),qs="9.15.0";function Bs(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){var r=t;t={name:r}}var i=Object.assign({name:Cs,automaticDataCollectionEnabled:!1},t),a=i.name;if("string"!==typeof a||!a)throw js.create("bad-app-name",{appName:String(a)});if(n||(n=yu()),!n)throw js.create("no-options");var o=As.get(a);if(o){if(Pu(n,o.options)&&Pu(i,o.config))return o;throw js.create("duplicate-app",{appName:a})}var u,s=new Xu(a),c=C(Rs.values());try{for(c.s();!(u=c.n()).done;){var l=u.value;s.addComponent(l)}}catch(h){c.e(h)}finally{c.f()}var f=new Vs(n,i,s);return As.set(a,f),f}function zs(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Cs,t=As.get(e);if(!t&&e===Cs)return Bs();if(!t)throw js.create("no-app",{appName:e});return t}function Ws(){return Array.from(As.values())}function Ks(e){return Hs.apply(this,arguments)}function Hs(){return Hs=Ko(zo().mark((function e(t){var n;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!As.has(n)){e.next=6;break}return As.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)}))),Hs.apply(this,arguments)}function Gs(e,t,n){var r,i=null!==(r=Ns[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ss.warn(u.join(" "))}Os(new Hu("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function Qs(e,t){if(null!==e&&"function"!==typeof e)throw js.create("invalid-log-argument");!function(e,t){var n,r=C(Ju);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=Zu[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:Yu[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function $s(e){var t;t=e,Ju.forEach((function(e){e.setLogLevel(t)}))}var Ys="firebase-heartbeat-store",Xs=null;function Js(){return Xs||(Xs=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=ms(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(ms(u.result),e.oldVersion,e.newVersion,ms(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-heartbeat-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(Ys)}}).catch((function(e){throw js.create("idb-open",{originalErrorMessage:e.message})}))),Xs}function Zs(e){return ec.apply(this,arguments)}function ec(){return ec=Ko(zo().mark((function e(t){var n,r;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Js();case 3:return n=e.sent,e.abrupt("return",n.transaction(Ys).objectStore(Ys).get(rc(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof wu?Ss.warn(e.t0.message):(r=js.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Ss.warn(r.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),ec.apply(this,arguments)}function tc(e,t){return nc.apply(this,arguments)}function nc(){return nc=Ko(zo().mark((function e(t,n){var r,i,a,o;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Js();case 3:return r=e.sent,i=r.transaction(Ys,"readwrite"),a=i.objectStore(Ys),e.next=8,a.put(n,rc(t));case 8:return e.abrupt("return",i.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof wu?Ss.warn(e.t0.message):(o=js.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Ss.warn(o.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),nc.apply(this,arguments)}function rc(e){return"".concat(e.name,"!").concat(e.options.appId)}var ic=function(){function e(t){var n=this;d(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new sc(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return y(e,[{key:"triggerHeartbeat",value:function(){var e=Ko(zo().mark((function e(){var t,n,r;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=ac(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=Ko(zo().mark((function e(){var t,n,r,i,a;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=ac(),n=oc(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=tu(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function ac(){return(new Date).toISOString().substring(0,10)}function oc(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=C(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),cc(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),cc(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){var u=o();if("break"===u)break}}catch(s){a.e(s)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var uc,sc=function(){function e(t){d(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return y(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=Ko(zo().mark((function e(){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(fu()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",hu().then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=Ko(zo().mark((function e(){var t;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,Zs(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=Ko(zo().mark((function e(t){var n,r;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",tc(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=Ko(zo().mark((function e(t){var n,r;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",tc(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(h(r.heartbeats),h(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function cc(e){return tu(JSON.stringify({version:2,heartbeats:e})).length}uc="",Os(new Hu("platform-logger",(function(e){return new Is(e)}),"PRIVATE")),Os(new Hu("heartbeat",(function(e){return new ic(e)}),"PRIVATE")),Gs(Ts,Es,uc),Gs(Ts,Es,"esm2017"),Gs("fire-js","");function lc(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;var fc;Object.create;var hc="facebook.com",dc="github.com",pc="google.com",vc="password",mc="twitter.com",yc="EMAIL_SIGNIN",gc="PASSWORD_RESET",kc="RECOVER_EMAIL",bc="REVERT_SECOND_FACTOR_ADDITION",wc="VERIFY_AND_CHANGE_EMAIL",_c="VERIFY_EMAIL";function xc(){return Ho({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var Ic=function(){var e;return Ho(e={},"admin-restricted-operation","This operation is restricted to administrators only."),Ho(e,"argument-error",""),Ho(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),Ho(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),Ho(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),Ho(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),Ho(e,"cordova-not-ready","Cordova framework is not ready."),Ho(e,"cors-unsupported","This browser is not supported."),Ho(e,"credential-already-in-use","This credential is already associated with a different user account."),Ho(e,"custom-token-mismatch","The custom token corresponds to a different audience."),Ho(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),Ho(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),Ho(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),Ho(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),Ho(e,"email-already-in-use","The email address is already in use by another account."),Ho(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),Ho(e,"expired-action-code","The action code has expired."),Ho(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),Ho(e,"internal-error","An internal AuthError has occurred."),Ho(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),Ho(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),Ho(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),Ho(e,"invalid-auth-event","An internal AuthError has occurred."),Ho(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),Ho(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),Ho(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),Ho(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),Ho(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),Ho(e,"invalid-email","The email address is badly formatted."),Ho(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),Ho(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),Ho(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),Ho(e,"invalid-credential","The supplied auth credential is malformed or has expired."),Ho(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),Ho(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),Ho(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),Ho(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),Ho(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),Ho(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),Ho(e,"wrong-password","The password is invalid or the user does not have a password."),Ho(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),Ho(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),Ho(e,"invalid-provider-id","The specified provider ID is invalid."),Ho(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),Ho(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),Ho(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),Ho(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),Ho(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),Ho(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),Ho(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),Ho(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),Ho(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),Ho(e,"missing-continue-uri","A continue URL must be provided in the request."),Ho(e,"missing-iframe-start","An internal AuthError has occurred."),Ho(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),Ho(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),Ho(e,"missing-multi-factor-info","No second factor identifier is provided."),Ho(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),Ho(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),Ho(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),Ho(e,"app-deleted","This instance of FirebaseApp has been deleted."),Ho(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),Ho(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),Ho(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),Ho(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),Ho(e,"no-auth-event","An internal AuthError has occurred."),Ho(e,"no-such-provider","User was not linked to an account with the given provider."),Ho(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),Ho(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),Ho(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),Ho(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),Ho(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),Ho(e,"provider-already-linked","User can only be linked to one identity for the given provider."),Ho(e,"quota-exceeded","The project's quota for this operation has been exceeded."),Ho(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),Ho(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),Ho(e,"rejected-credential","The request contains malformed or mismatching credentials."),Ho(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),Ho(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),Ho(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),Ho(e,"timeout","The operation has timed out."),Ho(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),Ho(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),Ho(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),Ho(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),Ho(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),Ho(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),Ho(e,"unverified-email","The operation requires a verified email."),Ho(e,"user-cancelled","The user did not grant your application the permissions it requested."),Ho(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),Ho(e,"user-disabled","The user account has been disabled by an administrator."),Ho(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),Ho(e,"user-signed-out",""),Ho(e,"weak-password","The password must be 6 characters long or more."),Ho(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),Ho(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),e},Tc=xc,Ec=new _u("auth","Firebase",xc()),Sc=new rs("@firebase/auth");function Cc(e){if(Sc.logLevel<=Yu.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Sc.error.apply(Sc,["Auth (".concat(qs,"): ").concat(e)].concat(n))}}function Nc(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Dc.apply(void 0,[e].concat(n))}function Ac(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Dc.apply(void 0,[e].concat(n))}function Rc(e,t,n){var r=Object.assign(Object.assign({},Tc()),Ho({},t,n));return new _u("auth","Firebase",r).create(t,{appName:e.name})}function Pc(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&Nc(e,"argument-error"),Rc(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Dc(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=h(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(h(o)))}return Ec.create.apply(Ec,[e].concat(n))}function Oc(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Dc.apply(void 0,[t].concat(r))}}function Lc(e){var t="INTERNAL ASSERTION FAILED: "+e;throw Cc(t),new Error(t)}function Mc(e,t){e||Lc(t)}var Fc=new Map;function Uc(e){Mc(e instanceof Function,"Expected a class definition");var t=Fc.get(e);return t?(Mc(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Fc.set(e,t),t)}function jc(e,t){var n=Ls(e,"auth");if(n.isInitialized()){var r=n.getImmediate();if(Pu(n.getOptions(),null!==t&&void 0!==t?t:{}))return r;Nc(r,"already-initialized")}return n.initialize({options:t})}function Vc(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function qc(){return"http:"===Bc()||"https:"===Bc()}function Bc(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var zc=function(){function e(t,n){d(this,e),this.shortDelay=t,this.longDelay=n,Mc(n>t,"Short delay should be less than long delay!"),this.isMobile=au()||su()}return y(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(qc()||uu()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Wc(e,t){Mc(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Kc=function(){function e(){d(this,e)}return y(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Lc("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Lc("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Lc("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Hc=(Ho(fc={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),Ho(fc,"MISSING_CUSTOM_TOKEN","internal-error"),Ho(fc,"INVALID_IDENTIFIER","invalid-email"),Ho(fc,"MISSING_CONTINUE_URI","internal-error"),Ho(fc,"INVALID_PASSWORD","wrong-password"),Ho(fc,"MISSING_PASSWORD","internal-error"),Ho(fc,"EMAIL_EXISTS","email-already-in-use"),Ho(fc,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),Ho(fc,"INVALID_IDP_RESPONSE","invalid-credential"),Ho(fc,"INVALID_PENDING_TOKEN","invalid-credential"),Ho(fc,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),Ho(fc,"MISSING_REQ_TYPE","internal-error"),Ho(fc,"EMAIL_NOT_FOUND","user-not-found"),Ho(fc,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),Ho(fc,"EXPIRED_OOB_CODE","expired-action-code"),Ho(fc,"INVALID_OOB_CODE","invalid-action-code"),Ho(fc,"MISSING_OOB_CODE","internal-error"),Ho(fc,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),Ho(fc,"INVALID_ID_TOKEN","invalid-user-token"),Ho(fc,"TOKEN_EXPIRED","user-token-expired"),Ho(fc,"USER_NOT_FOUND","user-token-expired"),Ho(fc,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),Ho(fc,"INVALID_CODE","invalid-verification-code"),Ho(fc,"INVALID_SESSION_INFO","invalid-verification-id"),Ho(fc,"INVALID_TEMPORARY_PROOF","invalid-credential"),Ho(fc,"MISSING_SESSION_INFO","missing-verification-id"),Ho(fc,"SESSION_EXPIRED","code-expired"),Ho(fc,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),Ho(fc,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),Ho(fc,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),Ho(fc,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),Ho(fc,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),Ho(fc,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),Ho(fc,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),Ho(fc,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),Ho(fc,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),Ho(fc,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),Ho(fc,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),fc),Gc=new zc(3e4,6e4);function Qc(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function $c(e,t,n,r){return Yc.apply(this,arguments)}function Yc(){return Yc=Ko(zo().mark((function e(t,n,r,i){var a,o=arguments;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>4&&void 0!==o[4]?o[4]:{},e.abrupt("return",Xc(t,a,Ko(zo().mark((function e(){var a,o,u,s;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o={},i&&("GET"===n?o=i:a={body:JSON.stringify(i)}),u=Ou(Object.assign({key:t.config.apiKey},o)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(s=e.sent)["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Kc.fetch()(tl(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},a)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Yc.apply(this,arguments)}function Xc(e,t,n){return Jc.apply(this,arguments)}function Jc(){return Jc=Ko(zo().mark((function e(t,n,r){var i,a,o,u,s,c,f,h,d,p;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Hc),n),e.prev=2,a=new nl(t),e.next=6,Promise.race([r(),a.promise]);case 6:return o=e.sent,a.clearNetworkTimeout(),e.next=10,o.json();case 10:if(!("needConfirmation"in(u=e.sent))){e.next=13;break}throw rl(t,"account-exists-with-different-credential",u);case 13:if(!o.ok||"errorMessage"in u){e.next=17;break}return e.abrupt("return",u);case 17:if(s=o.ok?u.errorMessage:u.error.message,c=s.split(" : "),f=l(c,2),h=f[0],d=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==h){e.next=23;break}throw rl(t,"credential-already-in-use",u);case 23:if("EMAIL_EXISTS"!==h){e.next=27;break}throw rl(t,"email-already-in-use",u);case 27:if("USER_DISABLED"!==h){e.next=29;break}throw rl(t,"user-disabled",u);case 29:if(p=i[h]||h.toLowerCase().replace(/[_\s]+/g,"-"),!d){e.next=34;break}throw Rc(t,p,d);case 34:Nc(t,p);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof wu)){e.next=41;break}throw e.t0;case 41:Nc(t,"network-request-failed");case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),Jc.apply(this,arguments)}function Zc(e,t,n,r){return el.apply(this,arguments)}function el(){return el=Ko(zo().mark((function e(t,n,r,i){var a,o,u=arguments;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,$c(t,n,r,i,a);case 3:return"mfaPendingCredential"in(o=e.sent)&&Nc(t,"multi-factor-auth-required",{_serverResponse:o}),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e)}))),el.apply(this,arguments)}function tl(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Wc(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var nl=function(){function e(t){var n=this;d(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(Ac(n.auth,"network-request-failed"))}),Gc.get())}))}return y(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function rl(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=Ac(e,t,r);return i.customData._tokenResponse=n,i}function il(e,t){return al.apply(this,arguments)}function al(){return(al=Ko(zo().mark((function e(t,n){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$c(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ol(e,t){return ul.apply(this,arguments)}function ul(){return(ul=Ko(zo().mark((function e(t,n){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$c(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function sl(e,t){return cl.apply(this,arguments)}function cl(){return(cl=Ko(zo().mark((function e(t,n){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$c(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ll(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function fl(){return fl=Ko(zo().mark((function e(t){var n,r,i,a,o,u,s=arguments;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=Ku(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Oc((a=dl(i))&&a.exp&&a.auth_time&&a.iat,r.auth,"internal-error"),o="object"===typeof a.firebase?a.firebase:void 0,u=null===o||void 0===o?void 0:o.sign_in_provider,e.abrupt("return",{claims:a,token:i,authTime:ll(hl(a.auth_time)),issuedAtTime:ll(hl(a.iat)),expirationTime:ll(hl(a.exp)),signInProvider:u||null,signInSecondFactor:(null===o||void 0===o?void 0:o.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),fl.apply(this,arguments)}function hl(e){return 1e3*Number(e)}function dl(e){var t=l(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return Cc("JWT malformed, contained fewer than 3 sections"),null;try{var a=nu(r);return a?JSON.parse(a):(Cc("Failed to decode base64 JWT payload"),null)}catch(o){return Cc("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function pl(e,t){return vl.apply(this,arguments)}function vl(){return vl=Ko(zo().mark((function e(t,n){var r=arguments;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof wu&&ml(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),vl.apply(this,arguments)}function ml(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var yl=function(){function e(t){d(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return y(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(Ko(zo().mark((function t(){return zo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=Ko(zo().mark((function e(){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),gl=function(){function e(t,n){d(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return y(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=ll(this.lastLoginAt),this.creationTime=ll(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function kl(e){return bl.apply(this,arguments)}function bl(){return bl=Ko(zo().mark((function e(t){var n,r,i,a,o,u,s,c,l,f,h;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,pl(t,sl(r,{idToken:i}));case 6:Oc(null===(a=e.sent)||void 0===a?void 0:a.users.length,r,"internal-error"),o=a.users[0],t._notifyReloadListener(o),u=(null===(n=o.providerUserInfo)||void 0===n?void 0:n.length)?xl(o.providerUserInfo):[],s=_l(t.providerData,u),c=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(null===s||void 0===s?void 0:s.length),f=!!c&&l,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new gl(o.createdAt,o.lastLoginAt),isAnonymous:f},Object.assign(t,h);case 17:case"end":return e.stop()}}),e)}))),bl.apply(this,arguments)}function wl(){return(wl=Ko(zo().mark((function e(t){var n;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ku(t),e.next=3,kl(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _l(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(h(n),h(t))}function xl(e){return e.map((function(e){var t=e.providerId,n=lc(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}function Il(e,t){return Tl.apply(this,arguments)}function Tl(){return(Tl=Ko(zo().mark((function e(t,n){var r;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xc(t,{},Ko(zo().mark((function e(){var r,i,a,o,u,s;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ou({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,a=i.tokenApiHost,o=i.apiKey,u=tl(t,a,"/v1/token","key=".concat(o)),e.next=5,t._getAdditionalHeaders();case 5:return(s=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Kc.fetch()(u,{method:"POST",headers:s,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var El=function(){function e(){d(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return y(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Oc(e.idToken,"internal-error"),Oc("undefined"!==typeof e.idToken,"internal-error"),Oc("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=dl(e);return Oc(t,"internal-error"),Oc("undefined"!==typeof t.exp,"internal-error"),Oc("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=Ko(zo().mark((function e(t){var n,r=arguments;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Oc(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=Ko(zo().mark((function e(t,n){var r,i,a,o;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Il(t,n);case 2:r=e.sent,i=r.accessToken,a=r.refreshToken,o=r.expiresIn,this.updateTokensAndExpiration(i,a,Number(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Lc("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Oc("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Oc("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Oc("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function Sl(e,t){Oc("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var Cl=function(){function e(t){d(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=lc(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new yl(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?h(a.providerData):[],this.metadata=new gl(a.createdAt||void 0,a.lastLoginAt||void 0)}return y(e,[{key:"getIdToken",value:function(){var e=Ko(zo().mark((function e(t){var n;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pl(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Oc(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return fl.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return wl.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Oc(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){Oc(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=Ko(zo().mark((function e(t){var n,r,i=arguments;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,kl(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=Ko(zo().mark((function e(){var t;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,pl(this,il(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,m=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,y=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,b=n.emailVerified,w=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;Oc(k&&x,t,"internal-error");var I=El.fromJSON(this.name,x);Oc("string"===typeof k,t,"internal-error"),Sl(f,t.name),Sl(h,t.name),Oc("boolean"===typeof b,t,"internal-error"),Oc("boolean"===typeof w,t,"internal-error"),Sl(d,t.name),Sl(p,t.name),Sl(v,t.name),Sl(m,t.name),Sl(y,t.name),Sl(g,t.name);var T=new e({uid:k,auth:t,email:h,emailVerified:b,displayName:f,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:y,lastLoginAt:g});return _&&Array.isArray(_)&&(T.providerData=_.map((function(e){return Object.assign({},e)}))),m&&(T._redirectEventId=m),T}},{key:"_fromIdTokenResponse",value:function(){var t=Ko(zo().mark((function t(n,r){var i,a,o,u=arguments;return zo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=u.length>2&&void 0!==u[2]&&u[2],(a=new El).updateFromServerResponse(r),o=new e({uid:r.localId,auth:n,stsTokenManager:a,isAnonymous:i}),t.next=6,kl(o);case 6:return t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),Nl=function(){function e(){d(this,e),this.type="NONE",this.storage={}}return y(e,[{key:"_isAvailable",value:function(){var e=Ko(zo().mark((function e(){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Ko(zo().mark((function e(t,n){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Ko(zo().mark((function e(t){var n;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Ko(zo().mark((function e(t){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();Nl.type="NONE";var Al=Nl;function Rl(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var Pl=function(){function e(t,n,r){d(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=Rl(this.userKey,a.apiKey,o),this.fullPersistenceKey=Rl("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return y(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=Ko(zo().mark((function e(){var t;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?Cl._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=Ko(zo().mark((function e(t){var n;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=Ko(zo().mark((function t(n,r){var i,a,o,u,s,c,l,f,h,d,p,v=arguments;return zo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=v.length>2&&void 0!==v[2]?v[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(Uc(Al),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=Ko(zo().mark((function e(t){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:a=t.sent.filter((function(e){return e})),o=a[0]||Uc(Al),u=Rl(i,n.config.apiKey,n.name),s=null,c=C(r),t.prev=10,c.s();case 12:if((l=c.n()).done){t.next=29;break}return f=l.value,t.prev=14,t.next=17,f._get(u);case 17:if(!(h=t.sent)){t.next=23;break}return d=Cl._fromJSON(n,h),f!==o&&(s=d),o=f,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),c.e(t.t1);case 34:return t.prev=34,c.f(),t.finish(34);case 37:if(p=a.filter((function(e){return e._shouldAllowMigration})),o._shouldAllowMigration&&p.length){t.next=40;break}return t.abrupt("return",new e(o,n,i));case 40:if(o=p[0],!s){t.next=44;break}return t.next=44,o._set(u,s.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=Ko(zo().mark((function e(t){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===o){e.next=8;break}return e.prev=1,e.next=4,t._remove(u);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(o,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function Dl(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Fl(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ol(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(jl(t))return"Blackberry";if(Vl(t))return"Webos";if(Ll(t))return"Safari";if((t.includes("chrome/")||Ml(t))&&!t.includes("edge/"))return"Chrome";if(Ul(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function Ol(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:iu();return/firefox\//i.test(e)}function Ll(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:iu(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Ml(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:iu();return/crios\//i.test(e)}function Fl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:iu();return/iemobile/i.test(e)}function Ul(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:iu();return/android/i.test(e)}function jl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:iu();return/blackberry/i.test(e)}function Vl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:iu();return/webos/i.test(e)}function ql(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:iu();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Bl(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:iu();return ql(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function zl(){return cu()&&10===document.documentMode}function Wl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:iu();return ql(e)||Ul(e)||Vl(e)||jl(e)||/windows phone/i.test(e)||Fl(e)}function Kl(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Dl(iu());break;case"Worker":t="".concat(Dl(iu()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(qs,"/").concat(r)}var Hl=function(){function e(t){d(this,e),this.auth=t,this.queue=[]}return y(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=Ko(zo().mark((function e(t){var n,r,i,a,o,u,s;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=C(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return a=i.value,e.next=11,a(t);case 11:a.onAbort&&n.push(a.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),o=C(n);try{for(o.s();!(u=o.n()).done;){s=u.value;try{s()}catch(c){}}}catch(l){o.e(l)}finally{o.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Gl=function(){function e(t,n,r){d(this,e),this.app=t,this.heartbeatServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $l(this),this.idTokenSubscription=new $l(this),this.beforeStateQueue=new Hl(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ec,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}return y(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=Uc(t)),this._initializationPromise=this.queue(Ko(zo().mark((function r(){var i,a;return zo().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,Pl.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(a=n.currentUser)||void 0===a?void 0:a.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=Ko(zo().mark((function e(){var t;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=Ko(zo().mark((function e(t){var n,r,i,a,o,u,s;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,a=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return o=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,u=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:s=e.sent,o&&o!==u||!(null===s||void 0===s?void 0:s.user)||(i=s.user,a=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!a){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return Oc(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=Ko(zo().mark((function e(t){var n;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=Ko(zo().mark((function e(t){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,kl(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=Ko(zo().mark((function e(){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=Ko(zo().mark((function e(t){var n;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?Ku(t):null)&&Oc(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=Ko(zo().mark((function e(t){var n,r=this,i=arguments;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&Oc(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(Ko(zo().mark((function e(){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=Ko(zo().mark((function e(){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(Ko(zo().mark((function n(){return zo().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(Uc(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new _u("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=Ko(zo().mark((function e(t,n){var r;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=Ko(zo().mark((function e(t){var n;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Oc(n=t&&Uc(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,Pl.create(this,[Uc(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=Ko(zo().mark((function e(t){var n,r;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(Ko(zo().mark((function e(){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=Ko(zo().mark((function e(t){var n=this;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(Ko(zo().mark((function e(){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=this._isInitialized?Promise.resolve():this._initializationPromise;return Oc(o,this,"internal-error"),o.then((function(){return a(i.currentUser)})),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(){var e=Ko(zo().mark((function e(t){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Oc(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Kl(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=Ko(zo().mark((function e(){var t,n,r;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Ho({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ql(e){return Ku(e)}var $l=function(){function e(t){var n=this;d(this,e),this.auth=t,this.observer=null,this.addObserver=Uu((function(e){return n.observer=e}))}return y(e,[{key:"next",get:function(){return Oc(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function Yl(e,t,n){var r=Ql(e);Oc(r._canInitEmulator,r,"emulator-config-failed"),Oc(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Xl(t),o=function(e){var t=Xl(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:Jl(r.substr(a.length+1))}}var o=l(r.split(":"),2);return{host:o[0],port:Jl(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Xl(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Jl(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Zl=function(){function e(t,n){d(this,e),this.providerId=t,this.signInMethod=n}return y(e,[{key:"toJSON",value:function(){return Lc("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Lc("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Lc("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Lc("not implemented")}}]),e}();function ef(e,t){return tf.apply(this,arguments)}function tf(){return(tf=Ko(zo().mark((function e(t,n){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$c(t,"POST","/v1/accounts:resetPassword",Qc(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nf(e,t){return rf.apply(this,arguments)}function rf(){return(rf=Ko(zo().mark((function e(t,n){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$c(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function af(e,t){return of.apply(this,arguments)}function of(){return(of=Ko(zo().mark((function e(t,n){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$c(t,"POST","/v1/accounts:update",Qc(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uf(e,t){return sf.apply(this,arguments)}function sf(){return(sf=Ko(zo().mark((function e(t,n){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zc(t,"POST","/v1/accounts:signInWithPassword",Qc(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cf(e,t){return lf.apply(this,arguments)}function lf(){return(lf=Ko(zo().mark((function e(t,n){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$c(t,"POST","/v1/accounts:sendOobCode",Qc(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ff(e,t){return hf.apply(this,arguments)}function hf(){return(hf=Ko(zo().mark((function e(t,n){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cf(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function df(e,t){return pf.apply(this,arguments)}function pf(){return(pf=Ko(zo().mark((function e(t,n){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cf(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vf(e,t){return mf.apply(this,arguments)}function mf(){return(mf=Ko(zo().mark((function e(t,n){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cf(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yf(e,t){return gf.apply(this,arguments)}function gf(){return(gf=Ko(zo().mark((function e(t,n){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",cf(t,n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function kf(e,t){return bf.apply(this,arguments)}function bf(){return(bf=Ko(zo().mark((function e(t,n){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zc(t,"POST","/v1/accounts:signInWithEmailLink",Qc(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wf(e,t){return _f.apply(this,arguments)}function _f(){return(_f=Ko(zo().mark((function e(t,n){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zc(t,"POST","/v1/accounts:signInWithEmailLink",Qc(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xf=function(e){k(n,e);var t=I(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return d(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return y(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=Ko(zo().mark((function e(t){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",uf(t,{returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",kf(t,{email:this._email,oobCode:this._password}));case 5:Nc(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=Ko(zo().mark((function e(t,n){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",nf(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",wf(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:Nc(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Zl);function If(e,t){return Tf.apply(this,arguments)}function Tf(){return(Tf=Ko(zo().mark((function e(t,n){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zc(t,"POST","/v1/accounts:signInWithIdp",Qc(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ef=function(e){k(n,e);var t=I(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return y(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return If(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,If(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,If(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ou(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Nc("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=lc(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Zl);function Sf(e,t){return Cf.apply(this,arguments)}function Cf(){return(Cf=Ko(zo().mark((function e(t,n){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$c(t,"POST","/v1/accounts:sendVerificationCode",Qc(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nf(){return(Nf=Ko(zo().mark((function e(t,n){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zc(t,"POST","/v1/accounts:signInWithPhoneNumber",Qc(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Af(){return(Af=Ko(zo().mark((function e(t,n){var r;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zc(t,"POST","/v1/accounts:signInWithPhoneNumber",Qc(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw rl(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Rf=Ho({},"USER_NOT_FOUND","user-not-found");function Pf(){return(Pf=Ko(zo().mark((function e(t,n){var r;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",Zc(t,"POST","/v1/accounts:signInWithPhoneNumber",Qc(t,r),Rf));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Df=function(e){k(n,e);var t=I(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone","phone")).params=e,r}return y(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Nf.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Af.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Pf.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Zl);var Of=function(){function e(t){var n,r,i,a,o,u;d(this,e);var s=Lu(Mu(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);Oc(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return y(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=Lu(Mu(e)).link,n=t?Lu(Mu(t)).deep_link_id:null,r=Lu(Mu(e)).deep_link_id;return(r?Lu(Mu(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(mF){return null}}}]),e}();var Lf=function(){function e(){d(this,e),this.providerId=e.PROVIDER_ID}return y(e,null,[{key:"credential",value:function(e,t){return xf._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Of.parseLink(t);return Oc(n,"argument-error"),xf._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Lf.PROVIDER_ID="password",Lf.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Lf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Mf=function(){function e(t){d(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return y(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Ff=function(e){k(n,e);var t=I(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).scopes=[],e}return y(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return h(this.scopes)}}]),n}(Mf),Uf=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Oc(e.idToken||e.accessToken,"argument-error"),Ef._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Oc("providerId"in t&&"signInMethod"in t,"argument-error"),Ef._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(Ff),jf=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.call(this,"facebook.com")}return y(n,null,[{key:"credential",value:function(e){return Ef._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(mF){return null}}}]),n}(Ff);jf.FACEBOOK_SIGN_IN_METHOD="facebook.com",jf.PROVIDER_ID="facebook.com";var Vf=function(e){k(n,e);var t=I(n);function n(){var e;return d(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return y(n,null,[{key:"credential",value:function(e,t){return Ef._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(mF){return null}}}]),n}(Ff);Vf.GOOGLE_SIGN_IN_METHOD="google.com",Vf.PROVIDER_ID="google.com";var qf=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.call(this,"github.com")}return y(n,null,[{key:"credential",value:function(e){return Ef._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(mF){return null}}}]),n}(Ff);qf.GITHUB_SIGN_IN_METHOD="github.com",qf.PROVIDER_ID="github.com";var Bf=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return y(n,[{key:"_getIdTokenResponse",value:function(e){return If(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,If(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,If(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Zl),zf=function(e){k(n,e);var t=I(n);function n(e){return d(this,n),Oc(e.startsWith("saml."),"argument-error"),t.call(this,e)}return y(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Bf.fromJSON(e);return Oc(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Bf._create(r,n)}catch(i){return null}}}]),n}(Mf),Wf=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.call(this,"twitter.com")}return y(n,null,[{key:"credential",value:function(e,t){return Ef._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(mF){return null}}}]),n}(Ff);function Kf(e,t){return Hf.apply(this,arguments)}function Hf(){return(Hf=Ko(zo().mark((function e(t,n){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zc(t,"POST","/v1/accounts:signUp",Qc(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Wf.TWITTER_SIGN_IN_METHOD="twitter.com",Wf.PROVIDER_ID="twitter.com";var Gf=function(){function e(t){d(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return y(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=Ko(zo().mark((function t(n,r,i){var a,o,u,s,c=arguments;return zo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=c.length>3&&void 0!==c[3]&&c[3],t.next=3,Cl._fromIdTokenResponse(n,i,a);case 3:return o=t.sent,u=Qf(i),s=new e({user:o,providerId:u,_tokenResponse:i,operationType:r}),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=Ko(zo().mark((function t(n,r,i){var a;return zo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return a=Qf(i),t.abrupt("return",new e({user:n,providerId:a,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Qf(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function $f(){return $f=Ko(zo().mark((function e(t){var n,r,i,a;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ql(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Gf({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Kf(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Gf._fromIdTokenResponse(r,"signIn",i,!0);case 10:return a=e.sent,e.next=13,r._updateCurrentUser(a.user);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}}),e)}))),$f.apply(this,arguments)}var Yf=function(e){k(n,e);var t=I(n);function n(e,r,i,a){var o,u;return d(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(_(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return y(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(wu);function Xf(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Yf._fromErrorAndOperation(e,n,t,r);throw n}))}function Jf(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function Zf(e,t){return eh.apply(this,arguments)}function eh(){return eh=Ko(zo().mark((function e(t,n){var r,i,a,o;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ku(t),e.next=3,rh(!0,r,n);case 3:return e.t0=ol,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,a=i.providerUserInfo,o=Jf(a||[]),r.providerData=r.providerData.filter((function(e){return o.has(e.providerId)})),o.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),eh.apply(this,arguments)}function th(e,t){return nh.apply(this,arguments)}function nh(){return nh=Ko(zo().mark((function e(t,n){var r,i,a=arguments;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.t0=pl,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Gf._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),nh.apply(this,arguments)}function rh(e,t,n){return ih.apply(this,arguments)}function ih(){return(ih=Ko(zo().mark((function e(t,n,r){var i,a;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kl(n);case 2:i=Jf(n.providerData),a=!1===t?"provider-already-linked":"no-such-provider",Oc(i.has(r)===t,n.auth,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ah(e,t){return oh.apply(this,arguments)}function oh(){return oh=Ko(zo().mark((function e(t,n){var r,i,a,o,u,s,c=arguments;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,a="reauthenticate",e.prev=3,e.next=6,pl(t,Xf(i,a,n,t),r);case 6:return Oc((o=e.sent).idToken,i,"internal-error"),Oc(u=dl(o.idToken),i,"internal-error"),s=u.sub,Oc(t.uid===s,i,"user-mismatch"),e.abrupt("return",Gf._forOperation(t,a,o));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&Nc(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),oh.apply(this,arguments)}function uh(e,t){return sh.apply(this,arguments)}function sh(){return sh=Ko(zo().mark((function e(t,n){var r,i,a,o,u=arguments;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,Xf(t,i,n);case 4:return a=e.sent,e.next=7,Gf._fromIdTokenResponse(t,i,a);case 7:if(o=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(o.user);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}}),e)}))),sh.apply(this,arguments)}function ch(e,t){return lh.apply(this,arguments)}function lh(){return(lh=Ko(zo().mark((function e(t,n){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",uh(Ql(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fh(e,t){return hh.apply(this,arguments)}function hh(){return(hh=Ko(zo().mark((function e(t,n){var r;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ku(t),e.next=3,rh(!1,r,n.providerId);case 3:return e.abrupt("return",th(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dh(e,t){return ph.apply(this,arguments)}function ph(){return(ph=Ko(zo().mark((function e(t,n){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ah(Ku(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vh(e,t){return mh.apply(this,arguments)}function mh(){return(mh=Ko(zo().mark((function e(t,n){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Zc(t,"POST","/v1/accounts:signInWithCustomToken",Qc(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yh(){return(yh=Ko(zo().mark((function e(t,n){var r,i,a;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ql(t),e.next=3,vh(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Gf._fromIdTokenResponse(r,"signIn",i);case 6:return a=e.sent,e.next=9,r._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var gh=function(){function e(t,n){d(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return y(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?kh._fromServerResponse(e,t):Nc(e,"internal-error")}}]),e}(),kh=function(e){k(n,e);var t=I(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return y(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(gh);function bh(e,t,n){var r;Oc((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Oc("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Oc(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Oc(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function wh(){return(wh=Ko(zo().mark((function e(t,n,r){var i,a;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ku(t),a={requestType:"PASSWORD_RESET",email:n},r&&bh(i,a,r),e.next=5,df(i,a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _h(){return(_h=Ko(zo().mark((function e(t,n,r){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ef(Ku(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xh(){return(xh=Ko(zo().mark((function e(t,n){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,af(Ku(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ih(e,t){return Th.apply(this,arguments)}function Th(){return(Th=Ko(zo().mark((function e(t,n){var r,i,a,o;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ku(t),e.next=3,ef(r,{oobCode:n});case 3:i=e.sent,Oc(a=i.requestType,r,"internal-error"),e.t0=a,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Oc(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Oc(i.mfaInfo,r,"internal-error");case 13:Oc(i.email,r,"internal-error");case 14:return o=null,i.mfaInfo&&(o=gh._fromServerResponse(Ql(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:a});case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Eh(){return(Eh=Ko(zo().mark((function e(t,n){var r,i;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ih(Ku(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Sh(e,t,n){return Ch.apply(this,arguments)}function Ch(){return(Ch=Ko(zo().mark((function e(t,n,r){var i,a,o;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ql(t),e.next=3,Kf(i,{returnSecureToken:!0,email:n,password:r});case 3:return a=e.sent,e.next=6,Gf._fromIdTokenResponse(i,"signIn",a);case 6:return o=e.sent,e.next=9,i._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Nh(e,t,n){return ch(Ku(e),Lf.credential(t,n))}function Ah(){return(Ah=Ko(zo().mark((function e(t,n,r){var i,a;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ku(t),a={requestType:"EMAIL_SIGNIN",email:n},Oc(r.handleCodeInApp,i,"argument-error"),r&&bh(i,a,r),e.next=6,vf(i,a);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rh(){return(Rh=Ko(zo().mark((function e(t,n,r){var i,a;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ku(t),Oc((a=Lf.credentialWithLink(n,r||Vc()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",ch(i,a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ph(e,t){return Dh.apply(this,arguments)}function Dh(){return(Dh=Ko(zo().mark((function e(t,n){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$c(t,"POST","/v1/accounts:createAuthUri",Qc(t,n)));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oh(){return(Oh=Ko(zo().mark((function e(t,n){var r,i,a,o;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=qc()?Vc():"http://localhost",i={identifier:n,continueUri:r},e.next=4,Ph(Ku(t),i);case 4:return a=e.sent,o=a.signinMethods,e.abrupt("return",o||[]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lh(){return(Lh=Ko(zo().mark((function e(t,n){var r,i,a,o;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ku(t),e.next=3,t.getIdToken();case 3:return i=e.sent,a={requestType:"VERIFY_EMAIL",idToken:i},n&&bh(r.auth,a,n),e.next=8,ff(r.auth,a);case 8:if(o=e.sent,o.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mh(){return(Mh=Ko(zo().mark((function e(t,n,r){var i,a,o,u;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ku(t),e.next=3,t.getIdToken();case 3:return a=e.sent,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:a,newEmail:n},r&&bh(i.auth,o,r),e.next=8,yf(i.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fh(e,t){return Uh.apply(this,arguments)}function Uh(){return(Uh=Ko(zo().mark((function e(t,n){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$c(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jh(){return(jh=Ko(zo().mark((function e(t,n){var r,i,a,o,u,s,c;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return a=Ku(t),e.next=6,a.getIdToken();case 6:return o=e.sent,u={idToken:o,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,pl(a,Fh(a.auth,u));case 10:return s=e.sent,a.displayName=s.displayName||null,a.photoURL=s.photoUrl||null,(c=a.providerData.find((function(e){return"password"===e.providerId})))&&(c.displayName=a.displayName,c.photoURL=a.photoURL),e.next=17,a._updateTokensIfNecessary(s);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vh(e,t,n){return qh.apply(this,arguments)}function qh(){return(qh=Ko(zo().mark((function e(t,n,r){var i,a,o,u;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return a=e.sent,o={idToken:a,returnSecureToken:!0},n&&(o.email=n),r&&(o.password=r),e.next=9,pl(t,nf(i,o));case 9:return u=e.sent,e.next=12,t._updateTokensIfNecessary(u,!0);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Bh=y((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};d(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),zh=function(e){k(n,e);var t=I(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this,e,r,i)).username=a,o}return y(n)}(Bh),Wh=function(e){k(n,e);var t=I(n);function n(e,r){return d(this,n),t.call(this,e,"facebook.com",r)}return y(n)}(Bh),Kh=function(e){k(n,e);var t=I(n);function n(e,r){return d(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return y(n)}(zh),Hh=function(e){k(n,e);var t=I(n);function n(e,r){return d(this,n),t.call(this,e,"google.com",r)}return y(n)}(Bh),Gh=function(e){k(n,e);var t=I(n);function n(e,r,i){return d(this,n),t.call(this,e,"twitter.com",r,i)}return y(n)}(zh);function Qh(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=dl(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new Bh(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new Wh(a,i);case"github.com":return new Kh(a,i);case"google.com":return new Hh(a,i);case"twitter.com":return new Gh(a,i,e.screenName||null);case"custom":case"anonymous":return new Bh(a,null);default:return new Bh(a,r,i)}}(n)}function $h(e,t,n,r){return Ku(e).onIdTokenChanged(t,n,r)}function Yh(e,t,n){return Ku(e).beforeAuthStateChanged(t,n)}var Xh=function(){function e(t,n,r){d(this,e),this.type=t,this.credential=n,this.auth=r}return y(e,[{key:"toJSON",value:function(){return{multiFactorSession:Ho({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),Jh=function(){function e(t,n,r){d(this,e),this.session=t,this.hints=n,this.signInResolver=r}return y(e,[{key:"resolveSignIn",value:function(){var e=Ko(zo().mark((function e(t){var n;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=Ql(t),i=n.customData._serverResponse,a=(i.mfaInfo||[]).map((function(e){return gh._fromServerResponse(r,e)}));Oc(i.mfaPendingCredential,r,"internal-error");var o=Xh._fromMfaPendingCredential(i.mfaPendingCredential);return new e(o,a,function(){var e=Ko(zo().mark((function e(t){var a,u,s;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,o);case 2:a=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:a.idToken,refreshToken:a.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Gf._fromIdTokenResponse(r,n.operationType,u);case 11:return s=e.sent,e.next=14,r._updateCurrentUser(s.user);case 14:return e.abrupt("return",s);case 15:return Oc(n.user,r,"internal-error"),e.abrupt("return",Gf._forOperation(n.user,n.operationType,u));case 17:Nc(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function Zh(e,t){return $c(e,"POST","/v2/accounts/mfaEnrollment:start",Qc(e,t))}var ed=function(){function e(t){var n=this;d(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return gh._fromServerResponse(t.auth,e)})))}))}return y(e,[{key:"getSession",value:function(){var e=Ko(zo().mark((function e(){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Xh,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user.auth,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=Ko(zo().mark((function e(t,n){var r,i,a;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,pl(this.user,r._process(this.user.auth,i,n));case 6:return a=e.sent,e.next=9,this.user._updateTokensIfNecessary(a);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=Ko(zo().mark((function e(t){var n,r,i;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.next=6,pl(this.user,$c(a=this.user.auth,"POST","/v2/accounts/mfaEnrollment:withdraw",Qc(a,{idToken:r,mfaEnrollmentId:n})));case 6:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=10,this.user._updateTokensIfNecessary(i);case 10:return e.prev=10,e.next=13,this.user.reload();case 13:e.next=19;break;case 15:if(e.prev=15,e.t0=e.catch(10),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-token-expired")){e.next=19;break}throw e.t0;case 19:case"end":return e.stop()}var a}),e,this,[[10,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),td=new WeakMap;var nd="__sak",rd=function(){function e(t,n){d(this,e),this.storageRetriever=t,this.type=n}return y(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(nd,"1"),this.storage.removeItem(nd),Promise.resolve(!0)):Promise.resolve(!1)}catch(mF){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var id=function(e){k(n,e);var t=I(n);function n(){var e;return d(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=iu();return Ll(e)||ql(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=Wl(),e._shouldAllowMigration=!0,e}return y(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);zl()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=Ko(zo().mark((function e(t,r){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bo(b(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Ko(zo().mark((function e(t){var r;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bo(b(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Ko(zo().mark((function e(t){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bo(b(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(rd);id.type="LOCAL";var ad=id,od=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return y(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(rd);od.type="SESSION";var ud=od;function sd(e){return Promise.all(e.map(function(){var e=Ko(zo().mark((function e(t){var n;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var cd=function(){function e(t){d(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return y(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=Ko(zo().mark((function e(t){var n,r,i,a,o,u,s,c;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,a=r.eventType,o=r.data,null===(u=this.handlersMap[a])||void 0===u?void 0:u.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:a}),s=Array.from(u).map(function(){var e=Ko(zo().mark((function e(t){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,o));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,sd(s);case 9:c=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:a,response:c});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function ld(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}cd.receivers=[];var fd=function(){function e(t){d(this,e),this.target=t,this.handlers=new Set}return y(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=Ko(zo().mark((function e(t,n){var r,i,a,o,u=this,s=arguments;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=s.length>2&&void 0!==s[2]?s[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,s){var c=ld("",20);i.port1.start();var l=setTimeout((function(){s(new Error("unsupported_event"))}),r);o={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),a=setTimeout((function(){s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(a),e(n.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},u.handlers.add(o),i.port1.addEventListener("message",o.onMessage),u.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){o&&u.removeMessageHandler(o)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function hd(){return window}function dd(){return"undefined"!==typeof hd().WorkerGlobalScope&&"function"===typeof hd().importScripts}function pd(){return vd.apply(this,arguments)}function vd(){return(vd=Ko(zo().mark((function e(){var t;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function md(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var yd="firebaseLocalStorageDb",gd="firebaseLocalStorage",kd="fbase_key",bd=function(){function e(t){d(this,e),this.request=t}return y(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function wd(e,t){return e.transaction([gd],t?"readwrite":"readonly").objectStore(gd)}function _d(){var e=indexedDB.deleteDatabase(yd);return new bd(e).toPromise()}function xd(){var e=indexedDB.open(yd,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(gd,{keyPath:kd})}catch(r){n(r)}})),e.addEventListener("success",Ko(zo().mark((function n(){var r;return zo().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(gd)){n.next=12;break}return r.close(),n.next=5,_d();case 5:return n.t0=t,n.next=8,xd();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function Id(e,t,n){return Td.apply(this,arguments)}function Td(){return Td=Ko(zo().mark((function e(t,n,r){var i,a;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=wd(t,!0).put((Ho(i={},kd,n),Ho(i,"value",r),i)),e.abrupt("return",new bd(a).toPromise());case 2:case"end":return e.stop()}}),e)}))),Td.apply(this,arguments)}function Ed(e,t){return Sd.apply(this,arguments)}function Sd(){return Sd=Ko(zo().mark((function e(t,n){var r,i;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=wd(t,!1).get(n),e.next=3,new bd(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),Sd.apply(this,arguments)}function Cd(e,t){var n=wd(e,!0).delete(t);return new bd(n).toPromise()}var Nd=function(){function e(){d(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return y(e,[{key:"_openDb",value:function(){var e=Ko(zo().mark((function e(){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,xd();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=Ko(zo().mark((function e(t){var n,r;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=Ko(zo().mark((function e(){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",dd()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=Ko(zo().mark((function e(){var t=this;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=cd._getInstance(dd()?self:null),this.receiver._subscribe("keyChanged",function(){var e=Ko(zo().mark((function e(n,r){var i;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=Ko(zo().mark((function e(t,n){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=Ko(zo().mark((function e(){var t,n,r;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pd();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new fd(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=Ko(zo().mark((function e(t){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&md()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=Ko(zo().mark((function e(){var t;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,xd();case 5:return t=e.sent,e.next=8,Id(t,nd,"1");case 8:return e.next=10,Cd(t,nd);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=Ko(zo().mark((function e(t){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=Ko(zo().mark((function e(t,n){var r=this;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Ko(zo().mark((function e(){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return Id(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=Ko(zo().mark((function e(t){var n;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return Ed(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=Ko(zo().mark((function e(t){var n=this;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(Ko(zo().mark((function e(){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return Cd(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=Ko(zo().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=wd(e,!1).getAll();return new bd(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=C(t);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.fbase_key,s=o.value,r.add(u),JSON.stringify(this.localCache[u])!==JSON.stringify(s)&&(this.notifyListeners(u,s),n.push(u))}catch(h){i.e(h)}finally{i.f()}for(c=0,l=Object.keys(this.localCache);c<l.length;c++)f=l[c],this.localCache[f]&&!r.has(f)&&(this.notifyListeners(f,null),n.push(f));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(Ko(zo().mark((function t(){return zo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();Nd.type="LOCAL";var Ad=Nd;function Rd(e,t){return $c(e,"POST","/v2/accounts/mfaSignIn:start",Qc(e,t))}function Pd(e){return Dd.apply(this,arguments)}function Dd(){return(Dd=Ko(zo().mark((function e(t){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$c(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Od(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=Ac("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function Ld(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Md=1e12,Fd=function(){function e(t){d(this,e),this.auth=t,this.counter=Md,this._widgets=new Map}return y(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Ud(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Md;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||Md;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=Ko(zo().mark((function e(t){var n,r;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||Md,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Ud=function(){function e(t,n,r){var i=this;d(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Oc(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return y(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var jd=Ld("rcb"),Vd=new zc(3e4,6e4),qd="https://www.google.com/recaptcha/api.js?",Bd=function(){function e(){var t;d(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=hd().grecaptcha)||void 0===t?void 0:t.render)}return y(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Oc(zd(n),e,"argument-error"),this.shouldResolveImmediately(n)?Promise.resolve(hd().grecaptcha):new Promise((function(r,i){var a=hd().setTimeout((function(){i(Ac(e,"network-request-failed"))}),Vd.get());hd()[jd]=function(){hd().clearTimeout(a),delete hd()[jd];var o=hd().grecaptcha;if(o){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(Ac(e,"internal-error"))},Od("".concat(qd,"?").concat(Ou({onload:jd,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(Ac(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=hd().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();function zd(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}var Wd=function(){function e(){d(this,e)}return y(e,[{key:"load",value:function(){var e=Ko(zo().mark((function e(t){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Fd(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),Kd="recaptcha",Hd={theme:"light",type:"image"},Gd=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Hd),r=arguments.length>2?arguments[2]:void 0;d(this,e),this.parameters=n,this.type=Kd,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ql(r),this.isInvisible="invisible"===this.parameters.size,Oc("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof t?document.getElementById(t):t;Oc(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Wd:new Bd,this.validateStartingState()}return y(e,[{key:"verify",value:function(){var e=Ko(zo().mark((function e(){var t,n,r,i=this;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Oc(!this.parameters.sitekey,this.auth,"argument-error"),Oc(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Oc("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=hd()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Oc(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=Ko(zo().mark((function e(){var t,n;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=Ko(zo().mark((function e(){var t;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Oc(qc()&&!dd(),this.auth,"internal-error"),e.next=3,Qd();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Pd(this.auth);case 8:Oc(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Oc(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function Qd(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var $d=function(){function e(t,n){d(this,e),this.verificationId=t,this.onConfirmation=n}return y(e,[{key:"confirm",value:function(e){var t=Df._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function Yd(){return(Yd=Ko(zo().mark((function e(t,n,r){var i,a;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ql(t),e.next=3,ep(i,n,Ku(r));case 3:return a=e.sent,e.abrupt("return",new $d(a,(function(e){return ch(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xd(e,t,n){return Jd.apply(this,arguments)}function Jd(){return(Jd=Ko(zo().mark((function e(t,n,r){var i,a;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ku(t),e.next=3,rh(!1,i,"phone");case 3:return e.next=5,ep(i.auth,n,Ku(r));case 5:return a=e.sent,e.abrupt("return",new $d(a,(function(e){return fh(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zd(){return(Zd=Ko(zo().mark((function e(t,n,r){var i,a;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ku(t),e.next=3,ep(i.auth,n,Ku(r));case 3:return a=e.sent,e.abrupt("return",new $d(a,(function(e){return dh(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ep(e,t,n){return tp.apply(this,arguments)}function tp(){return tp=Ko(zo().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(a=e.sent,e.prev=3,Oc("string"===typeof a,t,"argument-error"),Oc(r.type===Kd,t,"argument-error"),!("session"in(o="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(u=o.session,!("phoneNumber"in o)){e.next=17;break}return Oc("enroll"===u.type,t,"internal-error"),e.next=13,Zh(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:a}});case 13:return s=e.sent,e.abrupt("return",s.phoneSessionInfo.sessionInfo);case 17:return Oc("signin"===u.type,t,"internal-error"),Oc(c=(null===(i=o.multiFactorHint)||void 0===i?void 0:i.uid)||o.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,Rd(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:c,phoneSignInInfo:{recaptchaToken:a}});case 22:return l=e.sent,e.abrupt("return",l.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Sf(t,{phoneNumber:o.phoneNumber,recaptchaToken:a});case 28:return f=e.sent,h=f.sessionInfo,e.abrupt("return",h);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),tp.apply(this,arguments)}function np(){return(np=Ko(zo().mark((function e(t,n){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,th(Ku(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var rp=function(){function e(t){d(this,e),this.providerId=e.PROVIDER_ID,this.auth=Ql(t)}return y(e,[{key:"verifyPhoneNumber",value:function(e,t){return ep(this.auth,e,Ku(t))}}],[{key:"credential",value:function(e,t){return Df._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Df._fromTokenResponse(n,r):null}}]),e}();function ip(e,t){return t?Uc(t):(Oc(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}rp.PROVIDER_ID="phone",rp.PHONE_SIGN_IN_METHOD="phone";var ap=function(e){k(n,e);var t=I(n);function n(e){var r;return d(this,n),(r=t.call(this,"custom","custom")).params=e,r}return y(n,[{key:"_getIdTokenResponse",value:function(e){return If(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return If(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return If(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Zl);function op(e){return uh(e.auth,new ap(e),e.bypassAuthState)}function up(e){var t=e.auth,n=e.user;return Oc(n,t,"internal-error"),ah(n,new ap(e),e.bypassAuthState)}function sp(e){return cp.apply(this,arguments)}function cp(){return(cp=Ko(zo().mark((function e(t){var n,r;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Oc(r=t.user,n,"internal-error"),e.abrupt("return",th(r,new ap(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var lp=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];d(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return y(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=Ko(zo().mark((function t(n,r){return zo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=Ko(zo().mark((function e(t){var n,r,i,a,o,u,s;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,a=t.tenantId,o=t.error,u=t.type,!o){e.next=4;break}return this.reject(o),e.abrupt("return");case 4:return s={auth:this.auth,requestUri:n,sessionId:r,tenantId:a||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(u)(s);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return op;case"linkViaPopup":case"linkViaRedirect":return sp;case"reauthViaPopup":case"reauthViaRedirect":return up;default:Nc(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Mc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Mc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),fp=new zc(2e3,1e4);function hp(e,t,n){return dp.apply(this,arguments)}function dp(){return(dp=Ko(zo().mark((function e(t,n,r){var i,a,o;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ql(t),Pc(t,n,Mf),a=ip(i,r),o=new yp(i,"signInViaPopup",n,a),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pp(){return(pp=Ko(zo().mark((function e(t,n,r){var i,a,o;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pc((i=Ku(t)).auth,n,Mf),a=ip(i.auth,r),o=new yp(i.auth,"reauthViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vp(e,t,n){return mp.apply(this,arguments)}function mp(){return(mp=Ko(zo().mark((function e(t,n,r){var i,a,o;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pc((i=Ku(t)).auth,n,Mf),a=ip(i.auth,r),o=new yp(i.auth,"linkViaPopup",n,a,i),e.abrupt("return",o.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var yp=function(e){k(n,e);var t=I(n);function n(e,r,i,a,o){var u;return d(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=_(u),u}return y(n,[{key:"executeNotNull",value:function(){var e=Ko(zo().mark((function e(){var t;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Oc(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Ko(zo().mark((function e(){var t,n=this;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Mc(1===this.filter.length,"Popup operations only handle one event"),t=ld(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(Ac(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(Ac(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(Ac(e.auth,"popup-closed-by-user"))}),2e3):e.pollId=window.setTimeout(t,fp.get())}()}}]),n}(lp);yp.currentPopupAction=null;var gp=new Map,kp=function(e){k(n,e);var t=I(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return d(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return y(n,[{key:"execute",value:function(){var e=Ko(zo().mark((function e(){var t,r;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=gp.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,bp(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,Bo(b(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:gp.set(this.auth._key(),t);case 21:return this.bypassAuthState||gp.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=Ko(zo().mark((function e(t){var r;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",Bo(b(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",Bo(b(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=Ko(zo().mark((function e(){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(lp);function bp(e,t){return wp.apply(this,arguments)}function wp(){return(wp=Ko(zo().mark((function e(t,n){var r,i,a;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ep(n),i=Tp(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,a="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _p(e,t){return xp.apply(this,arguments)}function xp(){return(xp=Ko(zo().mark((function e(t,n){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Tp(t)._set(Ep(n),"true"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ip(e,t){gp.set(e._key(),t)}function Tp(e){return Uc(e._redirectPersistence)}function Ep(e){return Rl("pendingRedirect",e.config.apiKey,e.name)}function Sp(e,t,n){return function(e,t,n){return Cp.apply(this,arguments)}(e,t,n)}function Cp(){return(Cp=Ko(zo().mark((function e(t,n,r){var i,a;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ql(t),Pc(t,n,Mf),a=ip(i,r),e.next=5,_p(a,i);case 5:return e.abrupt("return",a._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Np(e,t,n){return function(e,t,n){return Ap.apply(this,arguments)}(e,t,n)}function Ap(){return(Ap=Ko(zo().mark((function e(t,n,r){var i,a,o;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pc((i=Ku(t)).auth,n,Mf),a=ip(i.auth,r),e.next=5,_p(a,i.auth);case 5:return e.next=7,Fp(i);case 7:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"reauthViaRedirect",o));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Rp(e,t,n){return function(e,t,n){return Pp.apply(this,arguments)}(e,t,n)}function Pp(){return(Pp=Ko(zo().mark((function e(t,n,r){var i,a,o;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Pc((i=Ku(t)).auth,n,Mf),a=ip(i.auth,r),e.next=5,rh(!1,i,n.providerId);case 5:return e.next=7,_p(a,i.auth);case 7:return e.next=9,Fp(i);case 9:return o=e.sent,e.abrupt("return",a._openRedirect(i.auth,n,"linkViaRedirect",o));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dp(e,t){return Op.apply(this,arguments)}function Op(){return(Op=Ko(zo().mark((function e(t,n){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ql(t)._initializationPromise;case 2:return e.abrupt("return",Lp(t,n,!1));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lp(e,t){return Mp.apply(this,arguments)}function Mp(){return Mp=Ko(zo().mark((function e(t,n){var r,i,a,o,u,s=arguments;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i=Ql(t),a=ip(i,n),o=new kp(i,a,r),e.next=6,o.execute();case 6:if(!(u=e.sent)||r){e.next=13;break}return delete u.user._redirectEventId,e.next=11,i._persistUserIfCurrent(u.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",u);case 14:case"end":return e.stop()}}),e)}))),Mp.apply(this,arguments)}function Fp(e){return Up.apply(this,arguments)}function Up(){return(Up=Ko(zo().mark((function e(t){var n;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ld("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var jp=function(){function e(t){d(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return y(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return qp(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!qp(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Ac(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Vp(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Vp(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Vp(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function qp(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function Bp(e){return zp.apply(this,arguments)}function zp(){return zp=Ko(zo().mark((function e(t){var n,r=arguments;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",$c(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),zp.apply(this,arguments)}var Wp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Kp=/^https?/;function Hp(){return(Hp=Ko(zo().mark((function e(t){var n,r,i,a,o;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Bp(t);case 4:n=e.sent,r=n.authorizedDomains,i=C(r),e.prev=7,i.s();case 9:if((a=i.n()).done){e.next=20;break}if(o=a.value,e.prev=11,!Gp(o)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:Nc(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])})))).apply(this,arguments)}function Gp(e){var t=Vc(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!Kp.test(r))return!1;if(Wp.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var Qp=new zc(3e4,6e4);function $p(){var e=hd().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=h(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Yp=null;function Xp(e){return Yp=Yp||function(e){return new Promise((function(t,n){var r,i,a;function o(){$p(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){$p(),n(Ac(e,"network-request-failed"))},timeout:Qp.get()})}if(null===(i=null===(r=hd().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=hd().gapi)||void 0===a?void 0:a.load)){var u=Ld("iframefcb");return hd()[u]=function(){gapi.load?o():n(Ac(e,"network-request-failed"))},Od("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw Yp=null,e}))}(e),Yp}var Jp=new zc(5e3,15e3),Zp={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ev=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tv(e){var t=e.config;Oc(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Wc(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:qs},i=ev.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(Ou(r).slice(1))}function nv(e){return rv.apply(this,arguments)}function rv(){return rv=Ko(zo().mark((function e(t){var n,r;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xp(t);case 2:return n=e.sent,Oc(r=hd().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:tv(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Zp,dontclear:!0},(function(e){return new Promise(function(){var n=Ko(zo().mark((function n(r,i){var a,o,u;return zo().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){hd().clearTimeout(o),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:a=Ac(t,"network-request-failed"),o=hd().setTimeout((function(){i(a)}),Jp.get()),e.ping(u).then(u,(function(){i(a)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),rv.apply(this,arguments)}var iv={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},av="_blank",ov="http://localhost",uv=function(){function e(t){d(this,e),this.window=t,this.associatedEvent=null}return y(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function sv(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},iv),{width:r.toString(),height:i.toString(),top:a,left:o}),c=iu().toLowerCase();n&&(u=Ml(c)?av:n),Ol(c)&&(t=t||ov,s.scrollbars="yes");var f=Object.entries(s).reduce((function(e,t){var n=l(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(Bl(c)&&"_self"!==u)return cv(t||"",u),new uv(null);var h=window.open(t||"",u,f);Oc(h,e,"popup-blocked");try{h.focus()}catch(d){}return new uv(h)}function cv(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}var lv="__/auth/handler",fv="emulator/auth/handler";function hv(e,t,n,r,i,a){Oc(e.config.authDomain,e,"auth-domain-config-required"),Oc(e.config.apiKey,e,"invalid-api-key");var o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:qs,eventId:i};if(t instanceof Mf){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",Au(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(var u=0,s=Object.entries(a||{});u<s.length;u++){var c=l(s[u],2),f=c[0],h=c[1];o[f]=h}}if(t instanceof Ff){var d=t.getScopes().filter((function(e){return""!==e}));d.length>0&&(o.scopes=d.join(","))}e.tenantId&&(o.tid=e.tenantId);for(var p=o,v=0,m=Object.keys(p);v<m.length;v++){var y=m[v];void 0===p[y]&&delete p[y]}return"".concat(function(e){var t=e.config;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(lv);return Wc(t,fv)}(e),"?").concat(Ou(p).slice(1))}var dv="webStorageSupport",pv=function(){function e(){d(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ud,this._completeRedirectFn=Lp,this._overrideRedirectResult=Ip}return y(e,[{key:"_openPopup",value:function(){var e=Ko(zo().mark((function e(t,n,r,i){var a,o;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Mc(null===(a=this.eventManagers[t._key()])||void 0===a?void 0:a.manager,"_initialize() not called before _openPopup()"),o=hv(t,n,r,Vc(),i),e.abrupt("return",sv(t,o,ld()));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Ko(zo().mark((function e(t,n,r,i){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return a=hv(t,n,r,Vc(),i),hd().location.href=a,e.abrupt("return",new Promise((function(){})));case 4:case"end":return e.stop()}var a}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Mc(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=Ko(zo().mark((function e(t){var n,r;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nv(t);case 2:return n=e.sent,r=new jp(t),n.register("authEvent",(function(e){return Oc(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(dv,{type:dv},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[dv];void 0!==i&&t(!!i),Nc(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Hp.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Wl()||Ll()||ql()}}]),e}(),vv=pv,mv=function(e){k(n,e);var t=I(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone")).credential=e,r}return y(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return $c(e,"POST","/v2/accounts/mfaEnrollment:finalize",Qc(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return $c(e,"POST","/v2/accounts/mfaSignIn:finalize",Qc(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){d(this,e),this.factorId=t}return y(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Lc("unexpected MultiFactorSessionType")}}}]),e}()),yv=function(){function e(){d(this,e)}return y(e,null,[{key:"assertion",value:function(e){return mv._fromCredential(e)}}]),e}();yv.FACTOR_ID="phone";var gv="@firebase/auth",kv="0.21.0",bv=function(){function e(t){d(this,e),this.auth=t,this.internalListeners=new Map}return y(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=Ko(zo().mark((function e(t){var n;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Oc(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var wv,_v=gu("authIdTokenMaxAge")||300,xv=null,Iv=function(e){return function(){var t=Ko(zo().mark((function t(n){var r,i,a;return zo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=n,!t.t0){t.next=5;break}return t.next=4,n.getIdTokenResult();case 4:t.t0=t.sent;case 5:if(r=t.t0,!((i=r&&((new Date).getTime()-Date.parse(r.issuedAtTime))/1e3)&&i>_v)){t.next=9;break}return t.abrupt("return");case 9:if(a=null===r||void 0===r?void 0:r.token,xv!==a){t.next=12;break}return t.abrupt("return");case 12:return xv=a,t.next=15,fetch(e,{method:a?"POST":"DELETE",headers:a?{Authorization:"Bearer ".concat(a)}:{}});case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};function Tv(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zs(),t=Ls(e,"auth");if(t.isInitialized())return t.getImmediate();var n=jc(e,{popupRedirectResolver:vv,persistence:[Ad,ad,ud]}),r=gu("authTokenSyncURL");if(r){var i=Iv(r);Yh(n,i,(function(){return i(n.currentUser)})),$h(n,(function(e){return i(e)}))}var a=vu("auth");return a&&Yl(n,"http://".concat(a)),n}wv="Browser",Os(new Hu("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=r.options,o=a.apiKey,u=a.authDomain;return function(e,t){Oc(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),Oc(!(null===u||void 0===u?void 0:u.includes(":")),"argument-error",{appName:e.name});var r={apiKey:o,authDomain:u,clientPlatform:wv,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Kl(wv)},i=new Gl(e,t,r);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Uc);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(i,n),i}(r,i)}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),Os(new Hu("auth-internal",(function(e){return function(e){return new bv(e)}(Ql(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),Gs(gv,kv,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(wv)),Gs(gv,kv,"esm2017");var Ev=n(184);var Sv=function(){return(0,Ev.jsxs)("div",{className:"ui right aligned category search item",children:[(0,Ev.jsxs)("div",{className:"ui transparent icon input",children:[(0,Ev.jsx)("input",{className:"prompt",type:"text",placeholder:"Search animals...",size:"30",maxLength:"30"}),(0,Ev.jsx)("i",{className:"search link icon"})]}),(0,Ev.jsx)("div",{className:"results"})]})};var Cv=function(){var e=l(r.useState(null),2),t=e[0],n=e[1],i=Tv();return r.useEffect((function(){i.onAuthStateChanged((function(e){n(e)}))}),[]),(0,Ev.jsxs)(Vo,{secondary:!0,style:{margin:"5px 0px 0px 0px"},children:[(0,Ev.jsx)(Vo.Item,{as:Ge,to:"/",children:"Online Book System"}),(0,Ev.jsx)(Vo.Menu,{children:(0,Ev.jsx)(Sv,{})}),(0,Ev.jsx)(Vo.Menu,{position:"right",children:t?(0,Ev.jsxs)(Ev.Fragment,{children:[(0,Ev.jsx)(Vo.Item,{as:Ge,to:"/userSet",children:"\u7528\u6236"}),(0,Ev.jsx)(Vo.Item,{onClick:function(){return i.signOut()},children:"\u767b\u51fa"})]}):(0,Ev.jsx)(Vo.Item,{as:Ge,to:"/signin",children:"\u8a3b\u518a/\u767b\u5165"})})]})};var Nv=function(){return(0,Ev.jsxs)(Vo,{style:{margin:"5px 0px 10px 0px"},children:[(0,Ev.jsx)(Vo.Item,{as:Ge,to:"/bookManage",children:"Book Manage"}),(0,Ev.jsx)(Vo.Item,{as:Ge,to:"/userManage",children:"User Manage"})]})};var Av,Rv=function(){return(0,Ev.jsxs)("div",{children:[(0,Ev.jsx)(Cv,{}),(0,Ev.jsx)(Nv,{}),(0,Ev.jsx)(Fe,{})]})},Pv=function(){function e(t,n){var r=this;d(this,e),this._delegate=t,this.firebase=n,Ps(t,new Hu("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return y(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Ks(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Cs;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Cs;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Ps(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Ds(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),Dv=(Ho(Av={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),Ho(Av,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Av),Ov=new _u("app-compat","Firebase",Dv);var Lv=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Bs(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(Cu(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:Gs,setLogLevel:$s,onLog:Qs,apps:null,SDK_VERSION:qs,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Os(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Ov.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&ru(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!Cu(n,e=e||Cs))throw Ov.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Pv);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){ru(n,e)},createSubscribe:Uu,ErrorFactory:_u,deepExtend:ru}),n}(),Mv=new rs("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Mv.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Fv=self.firebase.SDK_VERSION;Fv&&Fv.indexOf("LITE")>=0&&Mv.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var Uv=Lv;!function(e){Gs("@firebase/app-compat","0.2.0",e)}();Uv.registerVersion("firebase","9.15.0","app-compat");Gs("firebase","9.15.0","app");var jv,Vv;var qv=new WeakMap,Bv=new WeakMap,zv=new WeakMap,Wv=new WeakMap,Kv=new WeakMap;var Hv={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Bv.get(e);if("objectStoreNames"===t)return e.objectStoreNames||zv.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return $v(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Gv(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Vv||(Vv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Yv(this),n),$v(qv.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return $v(e.apply(Yv(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Yv(this),t].concat(r));return zv.set(a,t.sort?t.sort():[t]),$v(a)}}function Qv(e){return"function"===typeof e?Gv(e):(e instanceof IDBTransaction&&function(e){if(!Bv.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Bv.set(e,t)}}(e),t=e,(jv||(jv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((function(e){return t instanceof e}))?new Proxy(e,Hv):e);var t}function $v(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t($v(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&qv.set(t,e)})).catch((function(){})),Kv.set(t,e),t}(e);if(Wv.has(e))return Wv.get(e);var t=Qv(e);return t!==e&&(Wv.set(e,t),Kv.set(t,e)),t}var Yv=function(e){return Kv.get(e)};var Xv,Jv=["get","getKey","getAll","getAllKeys","count"],Zv=["put","add","delete","clear"],em=new Map;function tm(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(em.get(t))return em.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Zv.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Jv.includes(n))){var a=function(){var e=Ko(zo().mark((function e(t){var a,o,u,s,c,l,f=arguments;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return em.set(t,a),a}}}!function(e){Hv=e(Hv)}((function(e){return as(as({},e),{},{get:function(t,n,r){return tm(t,n)||e.get(t,n,r)},has:function(t,n){return!!tm(t,n)||e.has(t,n)}})}));var nm="@firebase/installations",rm="0.6.0",im=1e4,am="w:".concat(rm),om="FIS_v2",um=36e5,sm=(Ho(Xv={},"missing-app-config-values",'Missing App configuration value: "{$valueName}"'),Ho(Xv,"not-registered","Firebase Installation is not registered."),Ho(Xv,"installation-not-found","Firebase Installation not found."),Ho(Xv,"request-failed",'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"'),Ho(Xv,"app-offline","Could not process request. Application offline."),Ho(Xv,"delete-pending-registration","Can't delete installation while there is a pending registration request."),Xv),cm=new _u("installations","Installations",sm);function lm(e){return e instanceof wu&&e.code.includes("request-failed")}function fm(e){var t=e.projectId;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(t,"/installations")}function hm(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}function dm(e,t){return pm.apply(this,arguments)}function pm(){return(pm=Ko(zo().mark((function e(t,n){var r,i;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:return r=e.sent,i=r.error,e.abrupt("return",cm.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vm(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function mm(e,t){var n=t.refreshToken,r=vm(e);return r.append("Authorization",function(e){return"".concat(om," ").concat(e)}(n)),r}function ym(e){return gm.apply(this,arguments)}function gm(){return gm=Ko(zo().mark((function e(t){var n;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:if(!((n=e.sent).status>=500&&n.status<600)){e.next=5;break}return e.abrupt("return",t());case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)}))),gm.apply(this,arguments)}function km(e,t){return bm.apply(this,arguments)}function bm(){return(bm=Ko(zo().mark((function e(t,n){var r,i,a,o,u,s,c,l,f,h,d,p;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.appConfig,i=t.heartbeatServiceProvider,a=n.fid,o=fm(r),u=vm(r),!(s=i.getImmediate({optional:!0}))){e.next=10;break}return e.next=8,s.getHeartbeatsHeader();case 8:(c=e.sent)&&u.append("x-firebase-client",c);case 10:return l={fid:a,authVersion:om,appId:r.appId,sdkVersion:am},f={method:"POST",headers:u,body:JSON.stringify(l)},e.next=14,ym((function(){return fetch(o,f)}));case 14:if(!(h=e.sent).ok){e.next=23;break}return e.next=18,h.json();case 18:return d=e.sent,p={fid:d.fid||a,registrationStatus:2,refreshToken:d.refreshToken,authToken:hm(d.authToken)},e.abrupt("return",p);case 23:return e.next=25,dm("Create Installation",h);case 25:throw e.sent;case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wm(e){return new Promise((function(t){setTimeout(t,e)}))}var _m=/^[cdef][\w-]{21}$/;function xm(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){var t=(n=e,btoa(String.fromCharCode.apply(String,h(n))).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return _m.test(t)?t:""}catch(mF){return""}}function Im(e){return"".concat(e.appName,"!").concat(e.appId)}var Tm=new Map;function Em(e,t){var n=Im(e);Sm(n,t),function(e,t){var n=Nm();n&&n.postMessage({key:e,fid:t});Am()}(n,t)}function Sm(e,t){var n=Tm.get(e);if(n){var r,i=C(n);try{for(i.s();!(r=i.n()).done;){(0,r.value)(t)}}catch(a){i.e(a)}finally{i.f()}}}var Cm=null;function Nm(){return!Cm&&"BroadcastChannel"in self&&((Cm=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){Sm(e.data.key,e.data.fid)}),Cm}function Am(){0===Tm.size&&Cm&&(Cm.close(),Cm=null)}var Rm="firebase-installations-store",Pm=null;function Dm(){return Pm||(Pm=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=$v(u);return i&&u.addEventListener("upgradeneeded",(function(e){i($v(u.result),e.oldVersion,e.newVersion,$v(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}("firebase-installations-database",1,{upgrade:function(e,t){if(0===t)e.createObjectStore(Rm)}})),Pm}function Om(e,t){return Lm.apply(this,arguments)}function Lm(){return Lm=Ko(zo().mark((function e(t,n){var r,i,a,o,u;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Im(t),e.next=3,Dm();case 3:return i=e.sent,a=i.transaction(Rm,"readwrite"),o=a.objectStore(Rm),e.next=8,o.get(r);case 8:return u=e.sent,e.next=11,o.put(n,r);case 11:return e.next=13,a.done;case 13:return u&&u.fid===n.fid||Em(t,n.fid),e.abrupt("return",n);case 15:case"end":return e.stop()}}),e)}))),Lm.apply(this,arguments)}function Mm(e){return Fm.apply(this,arguments)}function Fm(){return Fm=Ko(zo().mark((function e(t){var n,r,i;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Im(t),e.next=3,Dm();case 3:return r=e.sent,i=r.transaction(Rm,"readwrite"),e.next=7,i.objectStore(Rm).delete(n);case 7:return e.next=9,i.done;case 9:case"end":return e.stop()}}),e)}))),Fm.apply(this,arguments)}function Um(e,t){return jm.apply(this,arguments)}function jm(){return jm=Ko(zo().mark((function e(t,n){var r,i,a,o,u,s;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Im(t),e.next=3,Dm();case 3:return i=e.sent,a=i.transaction(Rm,"readwrite"),o=a.objectStore(Rm),e.next=8,o.get(r);case 8:if(u=e.sent,void 0!==(s=n(u))){e.next=15;break}return e.next=13,o.delete(r);case 13:e.next=17;break;case 15:return e.next=17,o.put(s,r);case 17:return e.next=19,a.done;case 19:return!s||u&&u.fid===s.fid||Em(t,s.fid),e.abrupt("return",s);case 21:case"end":return e.stop()}}),e)}))),jm.apply(this,arguments)}function Vm(e){return qm.apply(this,arguments)}function qm(){return(qm=Ko(zo().mark((function e(t){var n,r;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Um(t.appConfig,(function(e){var r=Bm(e),i=zm(t,r);return n=i.registrationPromise,i.installationEntry}));case 2:if(""!==(r=e.sent).fid){e.next=8;break}return e.next=6,n;case 6:return e.t0=e.sent,e.abrupt("return",{installationEntry:e.t0});case 8:return e.abrupt("return",{installationEntry:r,registrationPromise:n});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Bm(e){return Qm(e||{fid:xm(),registrationStatus:0})}function zm(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(cm.create("app-offline"))};var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=function(e,t){return Wm.apply(this,arguments)}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Km(e)}:{installationEntry:t}}function Wm(){return(Wm=Ko(zo().mark((function e(t,n){var r;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,km(t,n);case 3:return r=e.sent,e.abrupt("return",Om(t.appConfig,r));case 7:if(e.prev=7,e.t0=e.catch(0),!lm(e.t0)||409!==e.t0.customData.serverCode){e.next=14;break}return e.next=12,Mm(t.appConfig);case 12:e.next=16;break;case 14:return e.next=16,Om(t.appConfig,{fid:n.fid,registrationStatus:0});case 16:throw e.t0;case 17:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function Km(e){return Hm.apply(this,arguments)}function Hm(){return(Hm=Ko(zo().mark((function e(t){var n,r,i,a;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gm(t.appConfig);case 2:n=e.sent;case 3:if(1!==n.registrationStatus){e.next=11;break}return e.next=6,wm(100);case 6:return e.next=8,Gm(t.appConfig);case 8:n=e.sent,e.next=3;break;case 11:if(0!==n.registrationStatus){e.next=22;break}return e.next=14,Vm(t);case 14:if(r=e.sent,i=r.installationEntry,!(a=r.registrationPromise)){e.next=21;break}return e.abrupt("return",a);case 21:return e.abrupt("return",i);case 22:return e.abrupt("return",n);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gm(e){return Um(e,(function(e){if(!e)throw cm.create("installation-not-found");return Qm(e)}))}function Qm(e){return 1===(t=e).registrationStatus&&t.registrationTime+im<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function $m(e,t){return Ym.apply(this,arguments)}function Ym(){return(Ym=Ko(zo().mark((function e(t,n){var r,i,a,o,u,s,c,l,f,h,d;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.appConfig,i=t.heartbeatServiceProvider,a=Xm(r,n),o=mm(r,n),!(u=i.getImmediate({optional:!0}))){e.next=9;break}return e.next=7,u.getHeartbeatsHeader();case 7:(s=e.sent)&&o.append("x-firebase-client",s);case 9:return c={installation:{sdkVersion:am,appId:r.appId}},l={method:"POST",headers:o,body:JSON.stringify(c)},e.next=13,ym((function(){return fetch(a,l)}));case 13:if(!(f=e.sent).ok){e.next=22;break}return e.next=17,f.json();case 17:return h=e.sent,d=hm(h),e.abrupt("return",d);case 22:return e.next=24,dm("Generate Auth Token",f);case 24:throw e.sent;case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xm(e,t){var n=t.fid;return"".concat(fm(e),"/").concat(n,"/authTokens:generate")}function Jm(e){return Zm.apply(this,arguments)}function Zm(){return Zm=Ko(zo().mark((function e(t){var n,r,i,a,o=arguments;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]&&o[1],e.next=3,Um(t.appConfig,(function(e){if(!ay(e))throw cm.create("not-registered");var i=e.authToken;if(!n&&oy(i))return e;if(1===i.requestStatus)return r=ey(t,n),e;if(!navigator.onLine)throw cm.create("app-offline");var a=uy(e);return r=ry(t,a),a}));case 3:if(i=e.sent,!r){e.next=10;break}return e.next=7,r;case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=i.authToken;case 11:return a=e.t0,e.abrupt("return",a);case 13:case"end":return e.stop()}}),e)}))),Zm.apply(this,arguments)}function ey(e,t){return ty.apply(this,arguments)}function ty(){return(ty=Ko(zo().mark((function e(t,n){var r,i;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ny(t.appConfig);case 2:r=e.sent;case 3:if(1!==r.authToken.requestStatus){e.next=11;break}return e.next=6,wm(100);case 6:return e.next=8,ny(t.appConfig);case 8:r=e.sent,e.next=3;break;case 11:if(0!==(i=r.authToken).requestStatus){e.next=16;break}return e.abrupt("return",Jm(t,n));case 16:return e.abrupt("return",i);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ny(e){return Um(e,(function(e){if(!ay(e))throw cm.create("not-registered");var t,n=e.authToken;return 1===(t=n).requestStatus&&t.requestTime+im<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e}))}function ry(e,t){return iy.apply(this,arguments)}function iy(){return(iy=Ko(zo().mark((function e(t,n){var r,i,a;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$m(t,n);case 3:return r=e.sent,i=Object.assign(Object.assign({},n),{authToken:r}),e.next=7,Om(t.appConfig,i);case 7:return e.abrupt("return",r);case 10:if(e.prev=10,e.t0=e.catch(0),!lm(e.t0)||401!==e.t0.customData.serverCode&&404!==e.t0.customData.serverCode){e.next=17;break}return e.next=15,Mm(t.appConfig);case 15:e.next=20;break;case 17:return a=Object.assign(Object.assign({},n),{authToken:{requestStatus:0}}),e.next=20,Om(t.appConfig,a);case 20:throw e.t0;case 21:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function ay(e){return void 0!==e&&2===e.registrationStatus}function oy(e){return 2===e.requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+um}(e)}function uy(e){var t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function sy(){return(sy=Ko(zo().mark((function e(t){var n,r,i,a;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.next=3,Vm(n);case 3:return r=e.sent,i=r.installationEntry,(a=r.registrationPromise)?a.catch(console.error):Jm(n).catch(console.error),e.abrupt("return",i.fid);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cy(){return cy=Ko(zo().mark((function e(t){var n,r,i,a=arguments;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]&&a[1],r=t,e.next=4,ly(r);case 4:return e.next=6,Jm(r,n);case 6:return i=e.sent,e.abrupt("return",i.token);case 8:case"end":return e.stop()}}),e)}))),cy.apply(this,arguments)}function ly(e){return fy.apply(this,arguments)}function fy(){return(fy=Ko(zo().mark((function e(t){var n,r;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vm(t);case 2:if(n=e.sent,!(r=n.registrationPromise)){e.next=7;break}return e.next=7,r;case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hy(e){return cm.create("missing-app-config-values",{valueName:e})}var dy,py="installations",vy=function(e){var t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw hy("App Configuration");if(!e.name)throw hy("App Name");for(var t=0,n=["projectId","apiKey","appId"];t<n.length;t++){var r=n[t];if(!e.options[r])throw hy(r)}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:Ls(t,"heartbeat"),_delete:function(){return Promise.resolve()}}},my=function(e){var t=Ls(e.getProvider("app").getImmediate(),py).getImmediate(),n={getId:function(){return function(e){return sy.apply(this,arguments)}(t)},getToken:function(e){return function(e){return cy.apply(this,arguments)}(t,e)}};return n};Os(new Hu(py,vy,"PUBLIC")),Os(new Hu("installations-internal",my,"PRIVATE")),Gs(nm,rm),Gs(nm,rm,"esm2017");var yy="analytics",gy="firebase_id",ky="origin",by=6e4,wy="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",_y="https://www.googletagmanager.com/gtag/js",xy=new rs("@firebase/analytics");function Iy(e){return Promise.all(e.map((function(e){return e.catch((function(e){return e}))})))}function Ty(e,t){var n=document.createElement("script");n.src="".concat(_y,"?l=").concat(e,"&id=").concat(t),n.async=!0,document.head.appendChild(n)}function Ey(e,t,n,r,i,a){return Sy.apply(this,arguments)}function Sy(){return Sy=Ko(zo().mark((function e(t,n,r,i,a,o){var u,s,c;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=i[a],e.prev=1,!u){e.next=7;break}return e.next=5,n[u];case 5:e.next=14;break;case 7:return e.next=9,Iy(r);case 9:if(s=e.sent,!(c=s.find((function(e){return e.measurementId===a})))){e.next=14;break}return e.next=14,n[c.appId];case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),xy.error(e.t0);case 19:t("config",a,o);case 20:case"end":return e.stop()}}),e,null,[[1,16]])}))),Sy.apply(this,arguments)}function Cy(e,t,n,r,i){return Ny.apply(this,arguments)}function Ny(){return Ny=Ko(zo().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,o=[],!a||!a.send_to){e.next=27;break}return u=a.send_to,Array.isArray(u)||(u=[u]),e.next=7,Iy(r);case 7:s=e.sent,c=C(u),e.prev=9,f=zo().mark((function e(){var t,r,i;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=l.value,r=s.find((function(e){return e.measurementId===t})),!(i=r&&n[r.appId])){e.next=7;break}o.push(i),e.next=9;break;case 7:return o=[],e.abrupt("return","break");case 9:case"end":return e.stop()}}),e)})),c.s();case 12:if((l=c.n()).done){e.next=19;break}return e.delegateYield(f(),"t0",14);case 14:if("break"!==e.t0){e.next=17;break}return e.abrupt("break",19);case 17:e.next=12;break;case 19:e.next=24;break;case 21:e.prev=21,e.t1=e.catch(9),c.e(e.t1);case 24:return e.prev=24,c.f(),e.finish(24);case 27:return 0===o.length&&(o=Object.values(n)),e.next=30,Promise.all(o);case 30:t("event",i,a||{}),e.next=36;break;case 33:e.prev=33,e.t2=e.catch(0),xy.error(e.t2);case 36:case"end":return e.stop()}}),e,null,[[0,33],[9,21,24,27]])}))),Ny.apply(this,arguments)}function Ay(e,t,n,r,i){var a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[i]&&"function"===typeof window[i]&&(a=window[i]),window[i]=function(e,t,n,r){function i(){return(i=Ko(zo().mark((function i(a,o,u){return zo().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,"event"!==a){i.next=6;break}return i.next=4,Cy(e,t,n,o,u);case 4:i.next=12;break;case 6:if("config"!==a){i.next=11;break}return i.next=9,Ey(e,t,n,r,o,u);case 9:i.next=12;break;case 11:"consent"===a?e("consent","update",u):e("set",o);case 12:i.next=17;break;case 14:i.prev=14,i.t0=i.catch(0),xy.error(i.t0);case 17:case"end":return i.stop()}}),i,null,[[0,14]])})))).apply(this,arguments)}return function(e,t,n){return i.apply(this,arguments)}}(a,e,t,n),{gtagCore:a,wrappedGtag:window[i]}}function Ry(e){for(var t=window.document.getElementsByTagName("script"),n=0,r=Object.values(t);n<r.length;n++){var i=r[n];if(i.src&&i.src.includes(_y)&&i.src.includes(e))return i}return null}var Py=(Ho(dy={},"already-exists","A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId."),Ho(dy,"already-initialized","initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance."),Ho(dy,"already-initialized-settings","Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect."),Ho(dy,"interop-component-reg-failed","Firebase Analytics Interop Component failed to instantiate: {$reason}"),Ho(dy,"invalid-analytics-context","Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),Ho(dy,"indexeddb-unavailable","IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}"),Ho(dy,"fetch-throttle","The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}."),Ho(dy,"config-fetch-failed","Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}"),Ho(dy,"no-api-key",'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.'),Ho(dy,"no-app-id",'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'),dy),Dy=new _u("analytics","Analytics",Py),Oy=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;d(this,e),this.throttleMetadata=t,this.intervalMillis=n}return y(e,[{key:"getThrottleMetadata",value:function(e){return this.throttleMetadata[e]}},{key:"setThrottleMetadata",value:function(e,t){this.throttleMetadata[e]=t}},{key:"deleteThrottleMetadata",value:function(e){delete this.throttleMetadata[e]}}]),e}(),Ly=new Oy;function My(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function Fy(e){return Uy.apply(this,arguments)}function Uy(){return Uy=Ko(zo().mark((function e(t){var n,r,i,a,o,u,s,c;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.appId,i=t.apiKey,a={method:"GET",headers:My(i)},o=wy.replace("{app-id}",r),e.next=5,fetch(o,a);case 5:if(200===(u=e.sent).status||304===u.status){e.next=18;break}return s="",e.prev=8,e.next=11,u.json();case 11:c=e.sent,(null===(n=c.error)||void 0===n?void 0:n.message)&&(s=c.error.message),e.next=17;break;case 15:e.prev=15,e.t0=e.catch(8);case 17:throw Dy.create("config-fetch-failed",{httpStatus:u.status,responseMessage:s});case 18:return e.abrupt("return",u.json());case 19:case"end":return e.stop()}}),e,null,[[8,15]])}))),Uy.apply(this,arguments)}function jy(e){return Vy.apply(this,arguments)}function Vy(){return Vy=Ko(zo().mark((function e(t){var n,r,i,a,o,u,s,c,l=arguments;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=l.length>1&&void 0!==l[1]?l[1]:Ly,r=l.length>2?l[2]:void 0,i=t.options,a=i.appId,o=i.apiKey,u=i.measurementId,a){e.next=5;break}throw Dy.create("no-app-id");case 5:if(o){e.next=9;break}if(!u){e.next=8;break}return e.abrupt("return",{measurementId:u,appId:a});case 8:throw Dy.create("no-api-key");case 9:return s=n.getThrottleMetadata(a)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new Gy,setTimeout(Ko(zo().mark((function e(){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.abort();case 1:case"end":return e.stop()}}),e)}))),void 0!==r?r:by),e.abrupt("return",qy({appId:a,apiKey:o,measurementId:u},s,c,n));case 13:case"end":return e.stop()}}),e)}))),Vy.apply(this,arguments)}function qy(e,t,n){return By.apply(this,arguments)}function By(){return By=Ko(zo().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p=arguments;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.throttleEndTimeMillis,a=n.backoffCount,o=p.length>3&&void 0!==p[3]?p[3]:Ly,s=t.appId,c=t.measurementId,e.prev=3,e.next=6,zy(r,i);case 6:e.next=14;break;case 8:if(e.prev=8,e.t0=e.catch(3),!c){e.next=13;break}return xy.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(c)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===e.t0||void 0===e.t0?void 0:e.t0.message,"]")),e.abrupt("return",{appId:s,measurementId:c});case 13:throw e.t0;case 14:return e.prev=14,e.next=17,Fy(t);case 17:return l=e.sent,o.deleteThrottleMetadata(s),e.abrupt("return",l);case 22:if(e.prev=22,e.t1=e.catch(14),Wy(f=e.t1)){e.next=33;break}if(o.deleteThrottleMetadata(s),!c){e.next=32;break}return xy.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(c)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===f||void 0===f?void 0:f.message,"]")),e.abrupt("return",{appId:s,measurementId:c});case 32:throw e.t1;case 33:return h=503===Number(null===(u=null===f||void 0===f?void 0:f.customData)||void 0===u?void 0:u.httpStatus)?Wu(a,o.intervalMillis,30):Wu(a,o.intervalMillis),d={throttleEndTimeMillis:Date.now()+h,backoffCount:a+1},o.setThrottleMetadata(s,d),xy.debug("Calling attemptFetch again in ".concat(h," millis")),e.abrupt("return",qy(t,d,r,o));case 38:case"end":return e.stop()}}),e,null,[[3,8],[14,22]])}))),By.apply(this,arguments)}function zy(e,t){return new Promise((function(n,r){var i=Math.max(t-Date.now(),0),a=setTimeout(n,i);e.addEventListener((function(){clearTimeout(a),r(Dy.create("fetch-throttle",{throttleEndTimeMillis:t}))}))}))}function Wy(e){if(!(e instanceof wu)||!e.customData)return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}var Ky,Hy,Gy=function(){function e(){d(this,e),this.listeners=[]}return y(e,[{key:"addEventListener",value:function(e){this.listeners.push(e)}},{key:"abort",value:function(){this.listeners.forEach((function(e){return e()}))}}]),e}();function Qy(){return(Qy=Ko(zo().mark((function e(t,n,r,i,a){var o,u;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a||!a.global){e.next=5;break}return t("event",r,i),e.abrupt("return");case 5:return e.next=7,n;case 7:o=e.sent,u=Object.assign(Object.assign({},i),{send_to:o}),t("event",r,u);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $y(e){Hy=e}function Yy(e){Ky=e}function Xy(){return Jy.apply(this,arguments)}function Jy(){return(Jy=Ko(zo().mark((function e(){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(fu()){e.next=5;break}return xy.warn(Dy.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),e.abrupt("return",!1);case 5:return e.prev=5,e.next=8,hu();case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(5),xy.warn(Dy.create("indexeddb-unavailable",{errorInfo:null===e.t0||void 0===e.t0?void 0:e.t0.toString()}).message),e.abrupt("return",!1);case 14:return e.abrupt("return",!0);case 15:case"end":return e.stop()}}),e,null,[[5,10]])})))).apply(this,arguments)}function Zy(){return Zy=Ko(zo().mark((function e(t,n,r,i,a,o,u){var s,c,f,h,d,p,v,m;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(c=jy(t)).then((function(e){r[e.measurementId]=e.appId,t.options.measurementId&&e.measurementId!==t.options.measurementId&&xy.warn("The measurement ID in the local Firebase config (".concat(t.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(e.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")})).catch((function(e){return xy.error(e)})),n.push(c),f=Xy().then((function(e){return e?i.getId():void 0})),e.next=6,Promise.all([c,f]);case 6:return h=e.sent,d=l(h,2),p=d[0],v=d[1],Ry(o)||Ty(o,p.measurementId),Hy&&(a("consent","default",Hy),$y(void 0)),a("js",new Date),(m=null!==(s=null===u||void 0===u?void 0:u.config)&&void 0!==s?s:{})[ky]="firebase",m.update=!0,null!=v&&(m[gy]=v),a("config",p.measurementId,m),Ky&&(a("set",Ky),Yy(void 0)),e.abrupt("return",p.measurementId);case 20:case"end":return e.stop()}}),e)}))),Zy.apply(this,arguments)}var eg,tg,ng=function(){function e(t){d(this,e),this.app=t}return y(e,[{key:"_delete",value:function(){return delete rg[this.app.options.appId],Promise.resolve()}}]),e}(),rg={},ig=[],ag={},og="dataLayer",ug="gtag",sg=!1;function cg(){var e=[];if(uu()&&e.push("This is a browser extension environment."),"undefined"!==typeof navigator&&navigator.cookieEnabled||e.push("Cookies are not available."),e.length>0){var t=e.map((function(e,t){return"(".concat(t+1,") ").concat(e)})).join(" "),n=Dy.create("invalid-analytics-context",{errorInfo:t});xy.warn(n.message)}}function lg(e,t,n){cg();var r=e.options.appId;if(!r)throw Dy.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Dy.create("no-api-key");xy.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=rg[r])throw Dy.create("already-exists",{id:r});if(!sg){!function(e){var t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(og);var i=Ay(rg,ig,ag,og,ug),a=i.wrappedGtag,o=i.gtagCore;tg=a,eg=o,sg=!0}return rg[r]=function(e,t,n,r,i,a,o){return Zy.apply(this,arguments)}(e,ig,ag,t,eg,og,n),new ng(e)}function fg(e,t,n,r){e=Ku(e),function(e,t,n,r,i){return Qy.apply(this,arguments)}(tg,rg[e.app.options.appId],t,n,r).catch((function(e){return xy.error(e)}))}var hg="@firebase/analytics",dg="0.9.0";Os(new Hu(yy,(function(e,t){var n=t.options;return lg(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)}),"PUBLIC")),Os(new Hu("analytics-internal",(function(e){try{var t=e.getProvider(yy).getImmediate();return{logEvent:function(e,n,r){return fg(t,e,n,r)}}}catch(n){throw Dy.create("interop-component-reg-failed",{reason:n})}}),"PRIVATE")),Gs(hg,dg),Gs(hg,dg,"esm2017");var pg="@firebase/database",vg="0.14.0",mg="";var yg=function(){function e(t){d(this,e),this.domStorage_=t,this.prefix_="firebase:"}return y(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Eu(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:Tu(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),gg=function(){function e(){d(this,e),this.cache_={},this.isInMemoryStorage=!0}return y(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return Cu(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),kg=function(e){try{if("undefined"!==typeof window&&"undefined"!==typeof window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new yg(t)}}catch(n){}return new gg},bg=kg("localStorage"),wg=kg("sessionStorage"),_g=new rs("@firebase/database"),xg=function(){var e=1;return function(){return e++}}(),Ig=function(e){var t=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);if(i>=55296&&i<=56319){var a=i-55296;r++,Yo(r<e.length,"Surrogate pair missing trail surrogate."),i=65536+(a<<10)+(e.charCodeAt(r)-56320)}i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):i<65536?(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t}(e),n=new Fu;n.update(t);var r=n.digest();return Zo.encodeByteArray(r)},Tg=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"===typeof r&&"number"===typeof r.length?t+=e.apply(null,r):t+="object"===typeof r?Eu(r):r,t+=" "}return t},Eg=null,Sg=!0,Cg=function(e,t){Yo(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(_g.logLevel=Yu.VERBOSE,Eg=_g.log.bind(_g),t&&wg.set("logging_enabled",!0)):"function"===typeof e?Eg=e:(Eg=null,wg.remove("logging_enabled"))},Ng=function(){if(!0===Sg&&(Sg=!1,null===Eg&&!0===wg.get("logging_enabled")&&Cg(!0)),Eg){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=Tg.apply(null,t);Eg(r)}},Ag=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Ng.apply(void 0,[e].concat(n))}},Rg=function(){var e="FIREBASE INTERNAL ERROR: "+Tg.apply(void 0,arguments);_g.error(e)},Pg=function(){var e="FIREBASE FATAL ERROR: ".concat(Tg.apply(void 0,arguments));throw _g.error(e),new Error(e)},Dg=function(){var e="FIREBASE WARNING: "+Tg.apply(void 0,arguments);_g.warn(e)},Og=function(e){return"number"===typeof e&&(e!==e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},Lg="[MIN_NAME]",Mg="[MAX_NAME]",Fg=function(e,t){if(e===t)return 0;if(e===Lg||t===Mg)return-1;if(t===Lg||e===Mg)return 1;var n=Kg(e),r=Kg(t);return null!==n?null!==r?n-r===0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},Ug=function(e,t){return e===t?0:e<t?-1:1},jg=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+Eu(t))},Vg=function e(t){if("object"!==typeof t||null===t)return Eu(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",a=0;a<n.length;a++)0!==a&&(i+=","),i+=Eu(n[a]),i+=":",i+=e(t[n[a]]);return i+="}"},qg=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function Bg(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var zg=function(e){Yo(!Og(e),"Invalid JSON number");var t,n,r,i,a,o=1023;0===e?(n=0,r=0,t=1/e===-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),o))+o,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var u=[];for(a=52;a;a-=1)u.push(r%2?1:0),r=Math.floor(r/2);for(a=11;a;a-=1)u.push(n%2?1:0),n=Math.floor(n/2);u.push(t?1:0),u.reverse();var s=u.join(""),c="";for(a=0;a<64;a+=8){var l=parseInt(s.substr(a,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()};var Wg=new RegExp("^-?(0*)\\d{1,10}$"),Kg=function(e){if(Wg.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},Hg=function(e){try{e()}catch(t){setTimeout((function(){var e=t.stack||"";throw Dg("Exception was thrown by user callback.",e),t}),Math.floor(0))}},Gg=function(e,t){var n=setTimeout(e,t);return"number"===typeof n&&"undefined"!==typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(n):"object"===typeof n&&n.unref&&n.unref(),n},Qg=function(){function e(t,n){var r=this;d(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null===n||void 0===n?void 0:n.getImmediate({optional:!0}),this.appCheck||null===n||void 0===n||n.get().then((function(e){return r.appCheck=e}))}return y(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise((function(n,r){setTimeout((function(){t.appCheck?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then((function(t){return t.addTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){Dg('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" ')+"are invalid. This usually indicates your app was not initialized correctly.")}}]),e}(),$g=function(){function e(t,n,r){var i=this;d(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit((function(e){return i.auth_=e}))}return y(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch((function(e){return e&&"auth/token-not-initialized"===e.code?(Ng("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)})):new Promise((function(n,r){setTimeout((function(){t.auth_?t.getToken(e).then(n,r):n(null)}),0)}))}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then((function(t){return t.addAuthTokenListener(e)}))}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then((function(t){return t.removeAuthTokenListener(e)}))}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Dg(e)}}]),e}(),Yg=function(){function e(t){d(this,e),this.accessToken=t}return y(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();Yg.OWNER="owner";var Xg="5",Jg=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Zg="ac",ek="websocket",tk="long_polling",nk=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",u=arguments.length>6&&void 0!==arguments[6]&&arguments[6];d(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=o,this.includeNamespaceInQueryParams=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=bg.get("host:"+t)||this._host}return y(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&bg.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){var e=this.secure?"https://":"http://",t=this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"";return"".concat(e).concat(this.host,"/").concat(t)}}]),e}();function rk(e,t,n){var r;if(Yo("string"===typeof t,"typeof type must == string"),Yo("object"===typeof n,"typeof params must == object"),t===ek)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==tk)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return Bg(n,(function(e,t){i.push(e+"="+t)})),r+i.join("&")}var ik=function(){function e(){d(this,e),this.counters_={}}return y(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Cu(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return ru(void 0,this.counters_)}}]),e}(),ak={},ok={};function uk(e){var t=e.toString();return ak[t]||(ak[t]=new ik),ak[t]}var sk=function(){function e(t){d(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return y(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&Hg((function(){n.onMessage_(e[t])}))},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),ck="start",lk="close",fk=function(){function e(t,n,r,i,a,o,u){var s=this;d(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=o,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ag(t),this.stats_=uk(n),this.urlFn=function(e){return s.appCheckToken&&(e[Zg]=s.appCheckToken),rk(n,tk,e)}}return y(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new sk(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout((function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null}),Math.floor(3e4)),function(e){if(lu()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",(function(){"complete"===document.readyState&&n()})),window.attachEvent("onload",n))}}((function(){if(!n.isClosed_){n.scriptTagHolder=new hk((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1],o=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===ck)n.id=a,n.password=o;else{if(i!==lk)throw new Error("Unrecognized command received: "+i);a?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(a,(function(){n.onClosed_()}))):n.onClosed_()}}),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],a=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,a)}),(function(){n.onClosed_()}),n.urlFn);var e={};e[ck]="t",e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v=Xg,n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e[Zg]=n.appCheckToken),"undefined"!==typeof location&&location.hostname&&Jg.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,(function(){}))}}))}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=Eu(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=eu(t),r=qg(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!lu()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=Eu(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!lu()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!==typeof document&&null!=document.createElement&&!("object"===typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))&&!("object"===typeof Windows&&"object"===typeof Windows.UI))}}]),e}(),hk=function(){function e(t,n,r,i){if(d(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,lu())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=xg(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var a="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))a='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(u){Ng("frame writing exception"),u.stack&&Ng(u.stack),Ng(u)}}}return y(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout((function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)}),Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+30+n.length<=1870))break;var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,(function(){clearTimeout(i),r()}))}},{key:"addTag",value:function(e,t){var n=this;lu()?this.doNodeLongPoll(e,t):setTimeout((function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){Ng("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}}),Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Ng("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),dk=null;"undefined"!==typeof MozWebSocket?dk=MozWebSocket:"undefined"!==typeof WebSocket&&(dk=WebSocket);var pk=function(){function e(t,n,r,i,a,o,u){d(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ag(this.connId),this.stats_=uk(n),this.connURL=e.connectionURL_(n,o,u,i,r),this.nodeAdmin=n.nodeAdmin}return y(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,bg.set("previous_websocket_failure",!0);try{var r;if(lu()){var i=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":"Firebase/".concat(Xg,"/").concat(mg,"/").concat(process.platform,"/").concat(i),"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var a={NODE_ENV:"production",PUBLIC_URL:"/Online-Booking-System",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0},o=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;o&&(r.proxy={origin:o})}this.mySock=new dk(this.connURL,[],r)}catch(s){this.log_("Error instantiating WebSocket.");var u=s.message||s.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){bg.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=Tu(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if(Yo(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=Eu(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=qg(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval((function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()}),Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r,i){var a={};return a.v=Xg,!lu()&&"undefined"!==typeof location&&location.hostname&&Jg.test(location.hostname)&&(a.r="f"),t&&(a.s=t),n&&(a.ls=n),r&&(a[Zg]=r),i&&(a.p=i),rk(e,ek,a)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!==typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==dk&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return bg.isInMemoryStorage||!0===bg.get("previous_websocket_failure")}}]),e}();pk.responsesRequiredToBeHealthy=2,pk.healthyTimeout=3e4;var vk=function(){function e(t){d(this,e),this.initTransports_(t)}return y(e,[{key:"initTransports_",value:function(t){var n=pk&&pk.isAvailable(),r=n&&!pk.previouslyFailed();if(t.webSocketOnly&&(n||Dg("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[pk];else{var i,a=this.transports_=[],o=C(e.ALL_TRANSPORTS);try{for(o.s();!(i=o.n()).done;){var u=i.value;u&&u.isAvailable()&&a.push(u)}}catch(s){o.e(s)}finally{o.f()}e.globalTransportInitialized_=!0}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[fk,pk]}},{key:"IS_TRANSPORT_INITIALIZED",get:function(){return this.globalTransportInitialized_}}]),e}();vk.globalTransportInitialized_=!1;var mk=function(){function e(t,n,r,i,a,o,u,s,c,l){d(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=o,this.onReady_=u,this.onDisconnect_=s,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ag("c:"+this.id+":"),this.transportManager_=new vk(n),this.log_("Connection created"),this.start_()}return y(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout((function(){e.conn_&&e.conn_.open(n,r)}),Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=Gg((function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))}),Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){var t={t:"d",d:e};this.sendData_(t)}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=jg("t",e),n=jg("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=jg("t",e),n=jg("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=jg("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?Rg("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Rg("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Xg!==n&&Dg("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),Gg((function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())}),Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Gg((function(){n.sendPingOnPrimaryIfNecessary_()}),Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(bg.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),yk=function(){function e(){d(this,e)}return y(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),gk=function(){function e(t){d(this,e),this.allowedEvents_=t,this.listeners_={},Yo(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return y(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=h(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var a=0;a<t.length;a++)t[a].callback.apply(t[a].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){Yo(this.allowedEvents_.find((function(t){return t===e})),"Unknown event: "+e)}}]),e}(),kk=function(e){k(n,e);var t=I(n);function n(){var e;return d(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"===typeof window||"undefined"===typeof window.addEventListener||au()||(window.addEventListener("online",(function(){e.online_||(e.online_=!0,e.trigger("online",!0))}),!1),window.addEventListener("offline",(function(){e.online_&&(e.online_=!1,e.trigger("online",!1))}),!1)),e}return y(n,[{key:"getInitialEvent",value:function(e){return Yo("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(gk),bk=function(){function e(t,n){if(d(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return y(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function wk(){return new bk("")}function _k(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function xk(e){return e.pieces_.length-e.pieceNum_}function Ik(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new bk(e.pieces_,t)}function Tk(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function Ek(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function Sk(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new bk(t,0)}function Ck(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof bk)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var a=t.split("/"),o=0;o<a.length;o++)a[o].length>0&&n.push(a[o]);return new bk(n,0)}function Nk(e){return e.pieceNum_>=e.pieces_.length}function Ak(e,t){var n=_k(e),r=_k(t);if(null===n)return t;if(n===r)return Ak(Ik(e),Ik(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function Rk(e,t){if(xk(e)!==xk(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Pk(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(xk(e)>xk(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var Dk=y((function e(t,n){d(this,e),this.errorPrefix_=n,this.parts_=Ek(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=Bu(this.parts_[r]);Ok(this)}));function Ok(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Lk(e))}function Lk(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var Mk=function(e){k(n,e);var t=I(n);function n(){var e,r,i;return d(this,n),e=t.call(this,["visible"]),"undefined"!==typeof document&&"undefined"!==typeof document.addEventListener&&("undefined"!==typeof document.hidden?(i="visibilitychange",r="hidden"):"undefined"!==typeof document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):"undefined"!==typeof document.msHidden?(i="msvisibilitychange",r="msHidden"):"undefined"!==typeof document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,(function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))}),!1),e}return y(n,[{key:"getInitialEvent",value:function(e){return Yo("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(gk),Fk=1e3,Uk=function(e){k(n,e);var t=I(n);function n(e,r,i,a,o,u,s,c){var l;if(d(this,n),(l=t.call(this)).repoInfo_=e,l.applicationId_=r,l.onDataUpdate_=i,l.onConnectStatus_=a,l.onServerInfoUpdate_=o,l.authTokenProvider_=u,l.appCheckTokenProvider_=s,l.authOverride_=c,l.id=n.nextPersistentConnectionId_++,l.log_=Ag("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=Fk,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!lu())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return Mk.getInstance().on("visible",l.onVisible_,_(l)),-1===e.host.indexOf("fblocal")&&kk.getInstance().on("online",l.onOnline_,_(l)),l}return y(n,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_(Eu(i)),Yo(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){this.initConnection_();var t=new ku,n={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:function(e){var n=e.d;"ok"===e.s?t.resolve(n):t.reject(n)}};this.outstandingGets_.push(n),this.outstandingGetCount_++;var r=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(r),t.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+i),this.listens.has(a)||this.listens.set(a,new Map),Yo(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Yo(!this.listens.get(a).has(i),"listen() called twice for same path/queryId.");var o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(a).set(i,o),this.connected_&&this.sendListen_(o)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,(function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)}))}},{key:"sendListen_",value:function(e){var t=this,r=e.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);var o={p:i};e.tag&&(o.q=r._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest("q",o,(function(o){var u=o.d,s=o.s;n.warnOnListenWarnings_(u,r),(t.listens.get(i)&&t.listens.get(i).get(a))===e&&(t.log_("listen response",o),"ok"!==s&&t.removeListen_(i,a),e.onComplete&&e.onComplete(s,u))}))}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},(function(){})),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||function(e){var t=Su(e).claims;return"object"===typeof t&&!0===t.admin}(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},(function(){}))}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=function(e){var t=Su(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")}(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"===typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,(function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))}))}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},(function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)}))}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Yo(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,(function(e){r&&setTimeout((function(){r(e.s,e.d)}),Math.floor(0))}))}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var a={p:t,d:n};void 0!==i&&(a.h=i),this.outstandingPuts_.push({action:e,request:a,onComplete:r}),this.outstandingPutCount_++;var o=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(o):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,(function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)}))}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,(function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}}))}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+Eu(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):Rg("Unrecognized action received from server: "+Eu(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;Yo(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout((function(){t.establishConnectionTimer_=null,t.establishConnection_()}),Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Fk,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Fk,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Fk),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=Ko(zo().mark((function e(){var t,r,i,a,o,u,s,c,f,h,d,p,v,m,y=this;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shouldReconnect_()){e.next=30;break}return this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),r=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+n.nextConnectionId_++,o=this.lastSessionId,u=!1,s=null,c=function(){s?s.close():(u=!0,i())},f=function(e){Yo(s,"sendRequest call when we're not connected not allowed."),s.sendRequest(e)},this.realtime_={close:c,sendRequest:f},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,e.prev=16,e.next=19,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);case 19:d=e.sent,p=l(d,2),v=p[0],m=p[1],u?Ng("getToken() completed but was canceled"):(Ng("getToken() completed. Creating connection."),this.authToken_=v&&v.accessToken,this.appCheckToken_=m&&m.token,s=new mk(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,r,i,(function(e){Dg(e+" ("+y.repoInfo_.toString()+")"),y.interrupt("server_kill")}),o)),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(16),this.log_("Failed to get token: "+e.t0),u||(this.repoInfo_.nodeAdmin&&Dg(e.t0),c());case 30:case"end":return e.stop()}}),e,this,[[16,26]])})));return function(){return e.apply(this,arguments)}}()},{key:"interrupt",value:function(e){Ng("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){Ng("Resuming connection for reason: "+e),delete this.interruptReasons_[e],Au(this.interruptReasons_)&&(this.reconnectDelay_=Fk,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map((function(e){return Vg(e)})).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new bk(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){Ng("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){Ng("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=C(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=C(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){t.e(s)}finally{t.f()}for(var a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){var o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(var u=0;u<this.outstandingGets_.length;u++)this.outstandingGets_[u]&&this.sendGet_(u)}},{key:"sendConnectStats_",value:function(){var e={},t="js";lu()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+mg.replace(/\./g,"-")]=1,au()?e["framework.cordova"]=1:su()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=kk.getInstance().currentlyOnline();return Au(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"===typeof e&&Cu(e,"w")){var n=Nu(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();Dg("Using an unspecified index. Your data will be downloaded and "+"filtered on the client. Consider adding ".concat(r," at ")+"".concat(i," to your security rules for better performance."))}}}}]),n}(yk);Uk.nextPersistentConnectionId_=0,Uk.nextConnectionId_=0;var jk,Vk=function(){function e(t,n){d(this,e),this.name=t,this.node=n}return y(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),qk=function(){function e(){d(this,e)}return y(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new Vk(Lg,e),r=new Vk(Lg,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return Vk.MIN}}]),e}(),Bk=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"compare",value:function(e,t){return Fg(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw Xo("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return Vk.MIN}},{key:"maxPost",value:function(){return new Vk(Mg,jk)}},{key:"makePost",value:function(e,t){return Yo("string"===typeof e,"KeyIndex indexValue must always be a string."),new Vk(e,jk)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return jk},set:function(e){jk=e}}]),n}(qk),zk=new Bk,Wk=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;d(this,e),this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return y(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),Kk=function(){function e(t,n,r,i,a){d(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:Qk.EMPTY_NODE,this.right=null!=a?a:Qk.EMPTY_NODE}return y(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return Qk.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Qk.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();Kk.RED=!0,Kk.BLACK=!1;var Hk,Gk=function(){function e(){d(this,e)}return y(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Kk(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}(),Qk=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;d(this,e),this.comparator_=t,this.root_=n}return y(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,Kk.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Kk.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new Wk(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new Wk(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new Wk(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new Wk(this.root_,null,this.comparator_,!0,e)}}]),e}();function $k(e,t){return Fg(e.name,t.name)}function Yk(e,t){return Fg(e,t)}Qk.EMPTY_NODE=new Gk;var Xk,Jk,Zk,eb=function(e){return"number"===typeof e?"number:"+zg(e):"string:"+e},tb=function(e){if(e.isLeafNode()){var t=e.val();Yo("string"===typeof t||"number"===typeof t||"object"===typeof t&&Cu(t,".sv"),"Priority must be a string or number.")}else Yo(e===Hk||e.isEmpty(),"priority of unexpected type.");Yo(e===Hk||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},nb=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;d(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,Yo(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),tb(this.priorityNode_)}return y(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return Nk(t)?this:".priority"===_k(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=_k(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Yo(".priority"!==r||1===xk(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(Ik(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+eb(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?zg(this.value_):this.value_,this.lazyHash_=Ig(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(Yo(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),a=e.VALUE_TYPE_ORDER.indexOf(r);return Yo(i>=0,"Unknown leaf type: "+n),Yo(a>=0,"Unknown leaf type: "+r),i===a?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:a-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return Xk},set:function(e){Xk=e}}]),e}();nb.VALUE_TYPE_ORDER=["object","boolean","number","string"];var rb,ib,ab=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?Fg(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return Vk.MIN}},{key:"maxPost",value:function(){return new Vk(Mg,new nb("[PRIORITY-POST]",Zk))}},{key:"makePost",value:function(e,t){var n=Jk(e);return new Vk(t,new nb("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(qk),ob=new ab,ub=Math.log(2),sb=function(){function e(t){d(this,e);var n;this.count=(n=t+1,parseInt(Math.log(n)/ub,10)),this.current_=this.count-1;var r,i=(r=this.count,parseInt(Array(r+1).join("1"),2));this.bits_=t+1&i}return y(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),cb=function(e,t,n,r){e.sort(t);var i=function t(r,i){var a,o,u=i-r;if(0===u)return null;if(1===u)return a=e[r],o=n?n(a):a,new Kk(o,a.node,Kk.BLACK,null,null);var s=parseInt(u/2,10)+r,c=t(r,s),l=t(s+1,i);return a=e[s],o=n?n(a):a,new Kk(o,a.node,Kk.BLACK,c,l)},a=function(t){for(var r=null,a=null,o=e.length,u=function(t,r){var a=o-t,u=o;o-=t;var c=i(a+1,u),l=e[a],f=n?n(l):l;s(new Kk(f,l.node,r,null,c))},s=function(e){r?(r.left=e,r=e):(a=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),f=Math.pow(2,t.count-(c+1));l?u(f,Kk.BLACK):(u(f,Kk.BLACK),u(f,Kk.RED))}return a}(new sb(e.length));return new Qk(r||t,a)},lb={},fb=function(){function e(t,n){d(this,e),this.indexes_=t,this.indexSet_=n}return y(e,[{key:"get",value:function(e){var t=Nu(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Qk?t:null}},{key:"hasIndex",value:function(e){return Cu(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){Yo(t!==zk,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],a=!1,o=n.getIterator(Vk.Wrap),u=o.getNext();u;)a=a||t.isDefinedOn(u.node),i.push(u),u=o.getNext();r=a?cb(i,t.getCompare()):lb;var s=t.toString(),c=Object.assign({},this.indexSet_);c[s]=t;var l=Object.assign({},this.indexes_);return l[s]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e(Ru(this.indexes_,(function(e,i){var a=Nu(r.indexSet_,i);if(Yo(a,"Missing index implementation for "+i),e===lb){if(a.isDefinedOn(t.node)){for(var o=[],u=n.getIterator(Vk.Wrap),s=u.getNext();s;)s.name!==t.name&&o.push(s),s=u.getNext();return o.push(t),cb(o,a.getCompare())}return lb}var c=n.get(t.name),l=e;return c&&(l=l.remove(new Vk(t.name,c))),l.insert(t,t.node)})),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e(Ru(this.indexes_,(function(e){if(e===lb)return e;var r=n.get(t.name);return r?e.remove(new Vk(t.name,r)):e})),this.indexSet_)}}],[{key:"Default",get:function(){return Yo(lb&&ob,"ChildrenNode.ts has not been loaded"),rb=rb||new e({".priority":lb},{".priority":ob})}}]),e}(),hb=function(){function e(t,n,r){d(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&tb(this.priorityNode_),this.children_.isEmpty()&&Yo(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return y(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||ib}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?ib:t}},{key:"getChild",value:function(e){var t=_k(e);return null===t?this:this.getImmediateChild(t).getChild(Ik(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if(Yo(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,a=new Vk(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(a,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(a,this.children_));var o=r.isEmpty()?ib:this.priorityNode_;return new e(r,o,i)}},{key:"updateChild",value:function(e,t){var n=_k(e);if(null===n)return t;Yo(".priority"!==_k(e)||1===xk(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(Ik(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,a=!0;if(this.forEachChild(ob,(function(o,u){n[o]=u.val(t),r++,a&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):a=!1})),!t&&a&&i<2*r){var o=[];for(var u in n)o[u]=n[u];return o}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+eb(this.getPriority().val())+":"),this.forEachChild(ob,(function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)})),this.lazyHash_=""===e?"":Ig(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new Vk(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new Vk(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new Vk(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal((function(e){return t(e.name,e.node)})):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getIteratorFrom(e.name,Vk.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,(function(e){return e}));for(var r=this.children_.getReverseIteratorFrom(e.name,Vk.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===db?-1:0}},{key:"withIndex",value:function(t){if(t===zk||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===zk||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(ob),r=t.getIterator(ob),i=n.getNext(),a=r.getNext();i&&a;){if(i.name!==a.name||!i.node.equals(a.node))return!1;i=n.getNext(),a=r.getNext()}return null===i&&null===a}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===zk?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return ib||(ib=new e(new Qk(Yk),null,fb.Default))}}]),e}();hb.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;var db=new(function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.call(this,new Qk(Yk),hb.EMPTY_NODE,fb.Default)}return y(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return hb.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(hb));Object.defineProperties(Vk,{MIN:{value:new Vk(Lg,hb.EMPTY_NODE)},MAX:{value:new Vk(Mg,db)}}),Bk.__EMPTY_NODE=hb.EMPTY_NODE,nb.__childrenNodeConstructor=hb,Hk=db,function(e){Zk=e}(db);function pb(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return hb.EMPTY_NODE;if("object"===typeof e&&".priority"in e&&(t=e[".priority"]),Yo(null===t||"string"===typeof t||"number"===typeof t||"object"===typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"===typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!==typeof e||".sv"in e){var n=e;return new nb(n,pb(t))}if(e instanceof Array){var r=hb.EMPTY_NODE;return Bg(e,(function(t,n){if(Cu(e,t)&&"."!==t.substring(0,1)){var i=pb(n);!i.isLeafNode()&&i.isEmpty()||(r=r.updateImmediateChild(t,i))}})),r.updatePriority(pb(t))}var i=[],a=!1,o=e;if(Bg(o,(function(e,t){if("."!==e.substring(0,1)){var n=pb(t);n.isEmpty()||(a=a||!n.getPriority().isEmpty(),i.push(new Vk(e,n)))}})),0===i.length)return hb.EMPTY_NODE;var u=cb(i,$k,(function(e){return e.name}),Yk);if(a){var s=cb(i,ob.getCompare());return new hb(u,pb(t),new fb({".priority":s},{".priority":ob}))}return new hb(u,pb(t),fb.Default)}!function(e){Jk=e}(pb);var vb=function(e){k(n,e);var t=I(n);function n(e){var r;return d(this,n),(r=t.call(this)).indexPath_=e,Yo(!Nk(e)&&".priority"!==_k(e),"Can't create PathIndex with empty path or .priority key"),r}return y(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?Fg(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=pb(e),r=hb.EMPTY_NODE.updateChild(this.indexPath_,n);return new Vk(t,r)}},{key:"maxPost",value:function(){var e=hb.EMPTY_NODE.updateChild(this.indexPath_,db);return new Vk(Mg,e)}},{key:"toString",value:function(){return Ek(this.indexPath_,0).join("/")}}]),n}(qk),mb=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?Fg(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return Vk.MIN}},{key:"maxPost",value:function(){return Vk.MAX}},{key:"makePost",value:function(e,t){var n=pb(e);return new Vk(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(qk),yb=new mb;function gb(e){return{type:"value",snapshotNode:e}}function kb(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function bb(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function wb(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var _b=function(){function e(){d(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ob}return y(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return Yo(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return Yo(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Lg}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return Yo(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return Yo(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Mg}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return Yo(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===ob}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function xb(e){var t,n={};if(e.isDefault())return n;if(e.index_===ob?t="$priority":e.index_===yb?t="$value":e.index_===zk?t="$key":(Yo(e.index_ instanceof vb,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=Eu(t),e.startSet_){var r=e.startAfterSet_?"startAfter":"startAt";n[r]=Eu(e.indexStartValue_),e.startNameSet_&&(n[r]+=","+Eu(e.indexStartName_))}if(e.endSet_){var i=e.endBeforeSet_?"endBefore":"endAt";n[i]=Eu(e.indexEndValue_),e.endNameSet_&&(n[i]+=","+Eu(e.indexEndName_))}return e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_),n}function Ib(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_),t.sin=!e.startAfterSet_),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_),t.ein=!e.endBeforeSet_),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==ob&&(t.i=e.index_.toString()),t}var Tb=function(e){k(n,e);var t=I(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this)).repoInfo_=e,o.onDataUpdate_=r,o.authTokenProvider_=i,o.appCheckTokenProvider_=a,o.log_=Ag("p:rest:"),o.listens_={},o}return y(n,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,r,i){var a=this,o=e._path.toString();this.log_("Listen called for "+o+" "+e._queryIdentifier);var u=n.getListenId_(e,r),s={};this.listens_[u]=s;var c=xb(e._queryParams);this.restRequest_(o+".json",c,(function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&a.onDataUpdate_(o,n,!1,r),Nu(a.listens_,u)===s)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)}))}},{key:"unlisten",value:function(e,t){var r=n.getListenId_(e,t);delete this.listens_[r]}},{key:"get",value:function(e){var t=this,n=xb(e._queryParams),r=e._path.toString(),i=new ku;return this.restRequest_(r+".json",n,(function(e,n){var a=n;404===e&&(a=null,e=null),null===e?(t.onDataUpdate_(r,a,!1,null),i.resolve(a)):i.reject(new Error(a))})),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then((function(i){var a=l(i,2),o=a[0],u=a[1];o&&o.accessToken&&(n.auth=o.accessToken),u&&u.token&&(n.ac=u.token);var s=(t.repoInfo_.secure?"https://":"http://")+t.repoInfo_.host+e+"?ns="+t.repoInfo_.namespace+Ou(n);t.log_("Sending REST request for "+s);var c=new XMLHttpRequest;c.onreadystatechange=function(){if(r&&4===c.readyState){t.log_("REST Response for "+s+" received. status:",c.status,"response:",c.responseText);var e=null;if(c.status>=200&&c.status<300){try{e=Tu(c.responseText)}catch(n){Dg("Failed to parse JSON response for "+s+": "+c.responseText)}r(null,e)}else 401!==c.status&&404!==c.status&&Dg("Got unsuccessful REST response for "+s+" Status: "+c.status),r(c.status);r=null}},c.open("GET",s,!0),c.send()}))}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:(Yo(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),n}(yk),Eb=function(){function e(){d(this,e),this.rootNode_=hb.EMPTY_NODE}return y(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function Sb(){return{value:null,children:new Map}}function Cb(e,t,n){if(Nk(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=_k(t);e.children.has(r)||e.children.set(r,Sb()),Cb(e.children.get(r),t=Ik(t),n)}}function Nb(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((function(e,n){t(n,e)}))}(e,(function(e,r){Nb(r,new bk(t.toString()+"/"+e),n)}))}var Ab,Rb=function(){function e(t){d(this,e),this.collection_=t,this.last_=null}return y(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Bg(this.last_,(function(e,n){t[e]=t[e]-n})),this.last_=e,t}}]),e}(),Pb=function(){function e(t,n){d(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new Rb(t);var r=1e4+2e4*Math.random();Gg(this.reportStats_.bind(this),Math.floor(r))}return y(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;Bg(t,(function(t,i){i>0&&Cu(e.statsToReport_,t)&&(n[t]=i,r=!0)})),r&&this.server_.reportStats(n),Gg(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}();function Db(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ab||(Ab={}));var Ob,Lb=function(){function e(t,n,r){d(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=Ab.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return y(e,[{key:"operationForChild",value:function(t){if(Nk(this.path)){if(null!=this.affectedTree.value)return Yo(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new bk(t));return new e(wk(),n,this.revert)}return Yo(_k(this.path)===t,"operationForChild called for unrelated child."),new e(Ik(this.path),this.affectedTree,this.revert)}}]),e}(),Mb=function(){function e(t,n,r){d(this,e),this.source=t,this.path=n,this.snap=r,this.type=Ab.OVERWRITE}return y(e,[{key:"operationForChild",value:function(t){return Nk(this.path)?new e(this.source,wk(),this.snap.getImmediateChild(t)):new e(this.source,Ik(this.path),this.snap)}}]),e}(),Fb=function(){function e(t,n,r){d(this,e),this.source=t,this.path=n,this.children=r,this.type=Ab.MERGE}return y(e,[{key:"operationForChild",value:function(t){if(Nk(this.path)){var n=this.children.subtree(new bk(t));return n.isEmpty()?null:n.value?new Mb(this.source,wk(),n.value):new e(this.source,wk(),n)}return Yo(_k(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,Ik(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),Ub=function(){function e(t,n,r){d(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return y(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(Nk(e))return this.isFullyInitialized()&&!this.filtered_;var t=_k(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}();function jb(e,t,n,r,i,a){var o=r.filter((function(e){return e.type===n}));o.sort((function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw Xo("Should only compare child_ events.");var r=new Vk(t.childName,t.snapshotNode),i=new Vk(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)})),o.forEach((function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,a);i.forEach((function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))}))}))}function Vb(e,t){return{eventCache:e,serverCache:t}}function qb(e,t,n,r){return Vb(new Ub(t,n,r),e.serverCache)}function Bb(e,t,n,r){return Vb(e.eventCache,new Ub(t,n,r))}function zb(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function Wb(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var Kb=function(){return Ob||(Ob=new Qk(Ug)),Ob},Hb=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Kb();d(this,e),this.value=t,this.children=n}return y(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:wk(),value:this.value};if(Nk(e))return null;var n=_k(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(Ik(e),t);return null!=i?{path:Ck(new bk(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,(function(){return!0}))}},{key:"subtree",value:function(t){if(Nk(t))return this;var n=_k(t),r=this.children.get(n);return null!==r?r.subtree(Ik(t)):new e(null)}},{key:"set",value:function(t,n){if(Nk(t))return new e(n,this.children);var r=_k(t),i=(this.children.get(r)||new e(null)).set(Ik(t),n),a=this.children.insert(r,i);return new e(this.value,a)}},{key:"remove",value:function(t){if(Nk(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=_k(t),r=this.children.get(n);if(r){var i,a=r.remove(Ik(t));return i=a.isEmpty()?this.children.remove(n):this.children.insert(n,a),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(Nk(e))return this.value;var t=_k(e),n=this.children.get(t);return n?n.get(Ik(e)):null}},{key:"setTree",value:function(t,n){if(Nk(t))return n;var r,i=_k(t),a=(this.children.get(i)||new e(null)).setTree(Ik(t),n);return r=a.isEmpty()?this.children.remove(i):this.children.insert(i,a),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(wk(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal((function(r,i){n[r]=i.fold_(Ck(e,r),t)})),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,wk(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(Nk(e))return null;var i=_k(e),a=this.children.get(i);return a?a.findOnPath_(Ik(e),Ck(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,wk(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(Nk(t))return this;this.value&&r(n,this.value);var i=_k(t),a=this.children.get(i);return a?a.foreachOnPath_(Ik(t),Ck(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(wk(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal((function(n,r){r.foreach_(Ck(e,n),t)})),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal((function(t,n){n.value&&e(t,n.value)}))}}],[{key:"fromObject",value:function(t){var n=new e(null);return Bg(t,(function(e,t){n=n.set(new bk(e),t)})),n}}]),e}(),Gb=function(){function e(t){d(this,e),this.writeTree_=t}return y(e,null,[{key:"empty",value:function(){return new e(new Hb(null))}}]),e}();function Qb(e,t,n){if(Nk(t))return new Gb(new Hb(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,a=r.value,o=Ak(i,t);return a=a.updateChild(o,n),new Gb(e.writeTree_.set(i,a))}var u=new Hb(n),s=e.writeTree_.setTree(t,u);return new Gb(s)}function $b(e,t,n){var r=e;return Bg(n,(function(e,n){r=Qb(r,Ck(t,e),n)})),r}function Yb(e,t){if(Nk(t))return Gb.empty();var n=e.writeTree_.setTree(t,new Hb(null));return new Gb(n)}function Xb(e,t){return null!=Jb(e,t)}function Jb(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(Ak(n.path,t)):null}function Zb(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(ob,(function(e,n){t.push(new Vk(e,n))})):e.writeTree_.children.inorderTraversal((function(e,n){null!=n.value&&t.push(new Vk(e,n.value))})),t}function ew(e,t){if(Nk(t))return e;var n=Jb(e,t);return new Gb(null!=n?new Hb(n):e.writeTree_.subtree(t))}function tw(e){return e.writeTree_.isEmpty()}function nw(e,t){return rw(wk(),e.writeTree_,t)}function rw(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal((function(t,i){".priority"===t?(Yo(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=rw(Ck(e,t),i,n)})),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(Ck(e,".priority"),r)),n}function iw(e,t){return gw(t,e)}function aw(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}function ow(e,t){var n=e.allWrites.findIndex((function(e){return e.writeId===t}));Yo(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,a=!1,o=e.allWrites.length-1;i&&o>=0;){var u=e.allWrites[o];u.visible&&(o>=n&&uw(u,r.path)?i=!1:Pk(r.path,u.path)&&(a=!0)),o--}if(i){if(a)return function(e){e.visibleWrites=cw(e.allWrites,sw,wk()),e.allWrites.length>0?e.lastWriteId=e.allWrites[e.allWrites.length-1].writeId:e.lastWriteId=-1}(e),!0;r.snap?e.visibleWrites=Yb(e.visibleWrites,r.path):Bg(r.children,(function(t){e.visibleWrites=Yb(e.visibleWrites,Ck(r.path,t))}));return!0}return!1}function uw(e,t){if(e.snap)return Pk(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&Pk(Ck(e.path,n),t))return!0;return!1}function sw(e){return e.visible}function cw(e,t,n){for(var r=Gb.empty(),i=0;i<e.length;++i){var a=e[i];if(t(a)){var o=a.path,u=void 0;if(a.snap)Pk(n,o)?r=Qb(r,u=Ak(n,o),a.snap):Pk(o,n)&&(u=Ak(o,n),r=Qb(r,wk(),a.snap.getChild(u)));else{if(!a.children)throw Xo("WriteRecord should have .snap or .children");if(Pk(n,o))r=$b(r,u=Ak(n,o),a.children);else if(Pk(o,n))if(Nk(u=Ak(o,n)))r=$b(r,wk(),a.children);else{var s=Nu(a.children,_k(u));if(s){var c=s.getChild(Ik(u));r=Qb(r,wk(),c)}}}}}return r}function lw(e,t,n,r,i){if(r||i){var a=ew(e.visibleWrites,t);if(!i&&tw(a))return n;if(i||null!=n||Xb(a,wk())){return nw(cw(e.allWrites,(function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Pk(e.path,t)||Pk(t,e.path))}),t),n||hb.EMPTY_NODE)}return null}var o=Jb(e.visibleWrites,t);if(null!=o)return o;var u=ew(e.visibleWrites,t);return tw(u)?n:null!=n||Xb(u,wk())?nw(u,n||hb.EMPTY_NODE):null}function fw(e,t,n,r){return lw(e.writeTree,e.treePath,t,n,r)}function hw(e,t){return function(e,t,n){var r=hb.EMPTY_NODE,i=Jb(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(ob,(function(e,t){r=r.updateImmediateChild(e,t)})),r;if(n){var a=ew(e.visibleWrites,t);return n.forEachChild(ob,(function(e,t){var n=nw(ew(a,new bk(e)),t);r=r.updateImmediateChild(e,n)})),Zb(a).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}return Zb(ew(e.visibleWrites,t)).forEach((function(e){r=r.updateImmediateChild(e.name,e.node)})),r}(e.writeTree,e.treePath,t)}function dw(e,t,n,r){return function(e,t,n,r,i){Yo(r||i,"Either existingEventSnap or existingServerSnap must exist");var a=Ck(t,n);if(Xb(e.visibleWrites,a))return null;var o=ew(e.visibleWrites,a);return tw(o)?i.getChild(n):nw(o,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function pw(e,t){return function(e,t){return Jb(e.visibleWrites,t)}(e.writeTree,Ck(e.treePath,t))}function vw(e,t,n,r,i,a){return function(e,t,n,r,i,a,o){var u,s=ew(e.visibleWrites,t),c=Jb(s,wk());if(null!=c)u=c;else{if(null==n)return[];u=nw(s,n)}if((u=u.withIndex(o)).isEmpty()||u.isLeafNode())return[];for(var l=[],f=o.getCompare(),h=a?u.getReverseIteratorFrom(r,o):u.getIteratorFrom(r,o),d=h.getNext();d&&l.length<i;)0!==f(d,r)&&l.push(d),d=h.getNext();return l}(e.writeTree,e.treePath,t,n,r,i,a)}function mw(e,t,n){return function(e,t,n,r){var i=Ck(t,n),a=Jb(e.visibleWrites,i);return null!=a?a:r.isCompleteForChild(n)?nw(ew(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function yw(e,t){return gw(Ck(e.treePath,t),e.writeTree)}function gw(e,t){return{treePath:e,writeTree:t}}var kw=function(){function e(){d(this,e),this.changeMap=new Map}return y(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;Yo("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),Yo(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,wb(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,bb(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,kb(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw Xo("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,wb(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),bw=new(function(){function e(){d(this,e)}return y(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),ww=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;d(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return y(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new Ub(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return mw(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Wb(this.viewCache_),i=vw(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}]),e}();function _w(e,t,n,r,i){var a,o,u=new kw;if(n.type===Ab.OVERWRITE){var s=n;s.source.fromUser?a=Tw(e,t,s.path,s.snap,r,i,u):(Yo(s.source.fromServer,"Unknown source."),o=s.source.tagged||t.serverCache.isFiltered()&&!Nk(s.path),a=Iw(e,t,s.path,s.snap,r,i,o,u))}else if(n.type===Ab.MERGE){var c=n;c.source.fromUser?a=function(e,t,n,r,i,a,o){var u=t;return r.foreach((function(r,s){var c=Ck(n,r);Ew(t,_k(c))&&(u=Tw(e,u,c,s,i,a,o))})),r.foreach((function(r,s){var c=Ck(n,r);Ew(t,_k(c))||(u=Tw(e,u,c,s,i,a,o))})),u}(e,t,c.path,c.children,r,i,u):(Yo(c.source.fromServer,"Unknown source."),o=c.source.tagged||t.serverCache.isFiltered(),a=Cw(e,t,c.path,c.children,r,i,o,u))}else if(n.type===Ab.ACK_USER_WRITE){var l=n;a=l.revert?function(e,t,n,r,i,a){var o;if(null!=pw(r,n))return t;var u,s=new ww(r,t,i),c=t.eventCache.getNode();if(Nk(n)||".priority"===_k(n)){var l;if(t.serverCache.isFullyInitialized())l=fw(r,Wb(t));else{var f=t.serverCache.getNode();Yo(f instanceof hb,"serverChildren would be complete if leaf node"),l=hw(r,f)}u=e.filter.updateFullNode(c,l,a)}else{var h=_k(n),d=mw(r,h,t.serverCache);null==d&&t.serverCache.isCompleteForChild(h)&&(d=c.getImmediateChild(h)),(u=null!=d?e.filter.updateChild(c,h,d,Ik(n),s,a):t.eventCache.getNode().hasChild(h)?e.filter.updateChild(c,h,hb.EMPTY_NODE,Ik(n),s,a):c).isEmpty()&&t.serverCache.isFullyInitialized()&&(o=fw(r,Wb(t))).isLeafNode()&&(u=e.filter.updateFullNode(u,o,a))}return o=t.serverCache.isFullyInitialized()||null!=pw(r,wk()),qb(t,u,o,e.filter.filtersNodes())}(e,t,l.path,r,i,u):function(e,t,n,r,i,a,o){if(null!=pw(i,n))return t;var u=t.serverCache.isFiltered(),s=t.serverCache;if(null!=r.value){if(Nk(n)&&s.isFullyInitialized()||s.isCompleteForPath(n))return Iw(e,t,n,s.getNode().getChild(n),i,a,u,o);if(Nk(n)){var c=new Hb(null);return s.getNode().forEachChild(zk,(function(e,t){c=c.set(new bk(e),t)})),Cw(e,t,n,c,i,a,u,o)}return t}var l=new Hb(null);return r.foreach((function(e,t){var r=Ck(n,e);s.isCompleteForPath(r)&&(l=l.set(e,s.getNode().getChild(r)))})),Cw(e,t,n,l,i,a,u,o)}(e,t,l.path,l.affectedTree,r,i,u)}else{if(n.type!==Ab.LISTEN_COMPLETE)throw Xo("Unknown operation type: "+n.type);a=function(e,t,n,r,i){var a=t.serverCache,o=Bb(t,a.getNode(),a.isFullyInitialized()||Nk(n),a.isFiltered());return xw(e,o,n,r,bw,i)}(e,t,n.path,r,u)}var f=u.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=zb(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&n.push(gb(zb(t)))}}(t,a,f),{viewCache:a,changes:f}}function xw(e,t,n,r,i,a){var o,u,s=t.eventCache;if(null!=pw(r,n))return t;if(Nk(n))if(Yo(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=Wb(t),l=hw(r,c instanceof hb?c:hb.EMPTY_NODE);o=e.filter.updateFullNode(t.eventCache.getNode(),l,a)}else{var f=fw(r,Wb(t));o=e.filter.updateFullNode(t.eventCache.getNode(),f,a)}else{var h=_k(n);if(".priority"===h){Yo(1===xk(n),"Can't have a priority with additional path components");var d=s.getNode(),p=dw(r,n,d,u=t.serverCache.getNode());o=null!=p?e.filter.updatePriority(d,p):s.getNode()}else{var v,m=Ik(n);if(s.isCompleteForChild(h)){u=t.serverCache.getNode();var y=dw(r,n,s.getNode(),u);v=null!=y?s.getNode().getImmediateChild(h).updateChild(m,y):s.getNode().getImmediateChild(h)}else v=mw(r,h,t.serverCache);o=null!=v?e.filter.updateChild(s.getNode(),h,v,m,i,a):s.getNode()}}return qb(t,o,s.isFullyInitialized()||Nk(n),e.filter.filtersNodes())}function Iw(e,t,n,r,i,a,o,u){var s,c=t.serverCache,l=o?e.filter:e.filter.getIndexedFilter();if(Nk(n))s=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var f=c.getNode().updateChild(n,r);s=l.updateFullNode(c.getNode(),f,null)}else{var h=_k(n);if(!c.isCompleteForPath(n)&&xk(n)>1)return t;var d=Ik(n),p=c.getNode().getImmediateChild(h).updateChild(d,r);s=".priority"===h?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),h,p,d,bw,null)}var v=Bb(t,s,c.isFullyInitialized()||Nk(n),l.filtersNodes());return xw(e,v,n,i,new ww(i,v,a),u)}function Tw(e,t,n,r,i,a,o){var u,s,c=t.eventCache,l=new ww(i,t,a);if(Nk(n))s=e.filter.updateFullNode(t.eventCache.getNode(),r,o),u=qb(t,s,!0,e.filter.filtersNodes());else{var f=_k(n);if(".priority"===f)s=e.filter.updatePriority(t.eventCache.getNode(),r),u=qb(t,s,c.isFullyInitialized(),c.isFiltered());else{var h,d=Ik(n),p=c.getNode().getImmediateChild(f);if(Nk(d))h=r;else{var v=l.getCompleteChild(f);h=null!=v?".priority"===Tk(d)&&v.getChild(Sk(d)).isEmpty()?v:v.updateChild(d,r):hb.EMPTY_NODE}if(p.equals(h))u=t;else u=qb(t,e.filter.updateChild(c.getNode(),f,h,d,l,o),c.isFullyInitialized(),e.filter.filtersNodes())}}return u}function Ew(e,t){return e.eventCache.isCompleteForChild(t)}function Sw(e,t,n){return n.foreach((function(e,n){t=t.updateChild(e,n)})),t}function Cw(e,t,n,r,i,a,o,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var s,c=t;s=Nk(n)?r:new Hb(null).setTree(n,r);var l=t.serverCache.getNode();return s.children.inorderTraversal((function(n,r){if(l.hasChild(n)){var s=Sw(0,t.serverCache.getNode().getImmediateChild(n),r);c=Iw(e,c,new bk(n),s,i,a,o,u)}})),s.children.inorderTraversal((function(n,r){var s=!t.serverCache.isCompleteForChild(n)&&null===r.value;if(!l.hasChild(n)&&!s){var f=Sw(0,t.serverCache.getNode().getImmediateChild(n),r);c=Iw(e,c,new bk(n),f,i,a,o,u)}})),c}var Nw;function Aw(e,t){var n=Wb(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!Nk(t)&&!n.getImmediateChild(_k(t)).isEmpty())?n.getChild(t):null}function Rw(e,t,n,r){t.type===Ab.MERGE&&null!==t.source.queryId&&(Yo(Wb(e.viewCache_),"We should always have a full cache before handling merges"),Yo(zb(e.viewCache_),"Missing event cache, even though we have a server cache"));var i,a,o=e.viewCache_,u=_w(e.processor_,o,t,n,r);return i=e.processor_,a=u.viewCache,Yo(a.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),Yo(a.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed"),Yo(u.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=u.viewCache,Pw(e,u.changes,u.viewCache.eventCache.getNode(),null)}function Pw(e,t,n,r){var i=r?[r]:e.eventRegistrations_;return function(e,t,n,r){var i=[],a=[];return t.forEach((function(t){var n;"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&a.push((n=t.childName,{type:"child_moved",snapshotNode:t.snapshotNode,childName:n}))})),jb(e,i,"child_removed",t,r,n),jb(e,i,"child_added",t,r,n),jb(e,i,"child_moved",a,r,n),jb(e,i,"child_changed",t,r,n),jb(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,i)}var Dw;function Ow(e,t,n,r){var i=t.source.queryId;if(null!==i){var a=e.views.get(i);return Yo(null!=a,"SyncTree gave us an op for an invalid query."),Rw(a,t,n,r)}var o,u=[],s=C(e.views.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u=u.concat(Rw(c,t,n,r))}}catch(l){s.e(l)}finally{s.f()}return u}function Lw(e,t){var n,r=null,i=C(e.views.values());try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r||Aw(a,t)}}catch(o){i.e(o)}finally{i.f()}return r}var Mw=y((function e(t){d(this,e),this.listenProvider_=t,this.syncPointTree_=new Hb(null),this.pendingWriteTree_={visibleWrites:Gb.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}));function Fw(e,t,n,r,i){return function(e,t,n,r,i){Yo(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Qb(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?Bw(e,new Mb({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Uw(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=aw(e.pendingWriteTree_,t),i=ow(e.pendingWriteTree_,t);if(i){var a=new Hb(null);return null!=r.snap?a=a.set(wk(),!0):Bg(r.children,(function(e){a=a.set(new bk(e),!0)})),Bw(e,new Lb(r.path,a,n))}return[]}function jw(e,t,n){return Bw(e,new Mb({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Vw(e,t,n,r){var i=Kw(e,r);if(null!=i){var a=Hw(i),o=a.path,u=a.queryId,s=Ak(o,t);return Gw(e,o,new Mb(Db(u),s,n))}return[]}function qw(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(function(e,n){var r=Lw(n,Ak(e,t));if(r)return r}));return lw(r,t,i,n,!0)}function Bw(e,t){return zw(t,e.syncPointTree_,null,iw(e.pendingWriteTree_,wk()))}function zw(e,t,n,r){if(Nk(e.path))return Ww(e,t,n,r);var i=t.get(wk());null==n&&null!=i&&(n=Lw(i,wk()));var a=[],o=_k(e.path),u=e.operationForChild(o),s=t.children.get(o);if(s&&u){var c=n?n.getImmediateChild(o):null,l=yw(r,o);a=a.concat(zw(u,s,c,l))}return i&&(a=a.concat(Ow(i,e,r,n))),a}function Ww(e,t,n,r){var i=t.get(wk());null==n&&null!=i&&(n=Lw(i,wk()));var a=[];return t.children.inorderTraversal((function(t,i){var o=n?n.getImmediateChild(t):null,u=yw(r,t),s=e.operationForChild(t);s&&(a=a.concat(Ww(s,i,o,u)))})),i&&(a=a.concat(Ow(i,e,r,n))),a}function Kw(e,t){return e.tagToQueryMap.get(t)}function Hw(e){var t=e.indexOf("$");return Yo(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new bk(e.substr(0,t))}}function Gw(e,t,n){var r=e.syncPointTree_.get(t);return Yo(r,"Missing sync point for query tag that we're tracking"),Ow(r,n,iw(e.pendingWriteTree_,t),null)}var Qw=function(){function e(t){d(this,e),this.node_=t}return y(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),$w=function(){function e(t,n){d(this,e),this.syncTree_=t,this.path_=n}return y(e,[{key:"getImmediateChild",value:function(t){var n=Ck(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return qw(this.syncTree_,this.path_)}}]),e}(),Yw=function(e,t,n){return e&&"object"===typeof e?(Yo(".sv"in e,"Unexpected leaf node or priority contents"),"string"===typeof e[".sv"]?Xw(e[".sv"],t,n):"object"===typeof e[".sv"]?Jw(e[".sv"],t):void Yo(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Xw=function(e,t,n){if("timestamp"===e)return n.timestamp;Yo(!1,"Unexpected server value: "+e)},Jw=function(e,t,n){e.hasOwnProperty("increment")||Yo(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!==typeof r&&Yo(!1,"Unexpected increment value: "+r);var i=t.node();if(Yo(null!==i&&"undefined"!==typeof i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var a=i.getValue();return"number"!==typeof a?r:a+r},Zw=function(e,t,n,r){return t_(t,new $w(n,e),r)},e_=function(e,t,n){return t_(e,new Qw(t),n)};function t_(e,t,n){var r,i=e.getPriority().val(),a=Yw(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var o=e,u=Yw(o.getValue(),t,n);return u!==o.getValue()||a!==o.getPriority().val()?new nb(u,pb(a)):e}var s=e;return r=s,a!==s.getPriority().val()&&(r=r.updatePriority(new nb(a))),s.forEachChild(ob,(function(e,i){var a=t_(i,t.getImmediateChild(e),n);a!==i&&(r=r.updateImmediateChild(e,a))})),r}var n_=y((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};d(this,e),this.name=t,this.parent=n,this.node=r}));function r_(e,t){for(var n=t instanceof bk?t:new bk(t),r=e,i=_k(n);null!==i;){var a=Nu(r.node.children,i)||{children:{},childCount:0};r=new n_(i,r,a),i=_k(n=Ik(n))}return r}function i_(e){return e.node.value}function a_(e,t){e.node.value=t,l_(e)}function o_(e){return e.node.childCount>0}function u_(e,t){Bg(e.node.children,(function(n,r){t(new n_(n,e,r))}))}function s_(e,t,n,r){n&&!r&&t(e),u_(e,(function(e){s_(e,t,!0,r)})),n&&r&&t(e)}function c_(e){return new bk(null===e.parent?e.name:c_(e.parent)+"/"+e.name)}function l_(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===i_(e)&&!o_(e)}(n),i=Cu(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,l_(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,l_(e))}(e.parent,e.name,e)}var f_=/[\[\].#$\/\u0000-\u001F\u007F]/,h_=/[\[\].#$\u0000-\u001F\u007F]/,d_=10485760,p_=function(e){return"string"===typeof e&&0!==e.length&&!f_.test(e)},v_=function(e){return"string"===typeof e&&0!==e.length&&!h_.test(e)},m_=function e(t,n,r){var i=r instanceof bk?new Dk(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+Lk(i));if("function"===typeof n)throw new Error(t+"contains a function "+Lk(i)+" with contents = "+n.toString());if(Og(n))throw new Error(t+"contains "+n.toString()+" "+Lk(i));if("string"===typeof n&&n.length>d_/3&&Bu(n)>d_)throw new Error(t+"contains a string greater than "+d_+" utf8 bytes "+Lk(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"===typeof n){var a=!1,o=!1;if(Bg(n,(function(n,r){if(".value"===n)a=!0;else if(".priority"!==n&&".sv"!==n&&(o=!0,!p_(n)))throw new Error(t+" contains an invalid key ("+n+") "+Lk(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=Bu(t),Ok(e)}(i,n),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=Bu(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)})),a&&o)throw new Error(t+' contains ".value" child '+Lk(i)+" in addition to actual children.")}},y_=function(e,t){var n=t.path.toString();if("string"!==typeof t.repoInfo.host||0===t.repoInfo.host.length||!p_(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),v_(e)}(n))throw new Error(qu(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},g_=y((function e(){d(this,e),this.eventLists_=[],this.recursionDepth_=0}));function k_(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],a=i.getPath();null===n||Rk(a,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:a}),n.events.push(i)}n&&e.eventLists_.push(n)}function b_(e,t,n){k_(e,n),w_(e,(function(e){return Pk(e,t)||Pk(t,e)}))}function w_(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];if(i)t(i.path)?(__(e.eventLists_[r]),e.eventLists_[r]=null):n=!1}n&&(e.eventLists_=[]),e.recursionDepth_--}function __(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();Eg&&Ng("event: "+n.toString()),Hg(r)}}}var x_="repo_interrupt",I_=function(){function e(t,n,r,i){d(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new g_,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Sb(),this.transactionQueueTree_=new n_,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return y(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function T_(e,t,n){if(e.stats_=uk(e.repoInfo_),e.forceRestClient_||("object"===typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Tb(e.repoInfo_,(function(t,n,r,i){C_(e,t,n,r,i)}),e.authTokenProvider_,e.appCheckProvider_),setTimeout((function(){return N_(e,!0)}),0);else{if("undefined"!==typeof n&&null!==n){if("object"!==typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Eu(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Uk(e.repoInfo_,t,(function(t,n,r,i){C_(e,t,n,r,i)}),(function(t){N_(e,t)}),(function(t){!function(e,t){Bg(t,(function(t,n){A_(e,t,n)}))}(e,t)}),e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener((function(t){e.server_.refreshAuthToken(t)})),e.appCheckProvider_.addTokenChangeListener((function(t){e.server_.refreshAppCheckToken(t.token)})),e.statsReporter_=function(e,t){var n=e.toString();return ok[n]||(ok[n]=t()),ok[n]}(e.repoInfo_,(function(){return new Pb(e.stats_,e.server_)})),e.infoData_=new Eb,e.infoSyncTree_=new Mw({startListening:function(t,n,r,i){var a=[],o=e.infoData_.getNode(t._path);return o.isEmpty()||(a=jw(e.infoSyncTree_,t._path,o),setTimeout((function(){i("ok")}),0)),a},stopListening:function(){}}),A_(e,"connected",!1),e.serverSyncTree_=new Mw({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,(function(n,r){var a=i(n,r);b_(e.eventQueue_,t._path,a)})),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}function E_(e){var t=e.infoData_.getNode(new bk(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function S_(e){return function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e}({timestamp:E_(e)})}function C_(e,t,n,r,i){e.dataUpdateCount++;var a=new bk(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var o=[];if(i)if(r){var u=Ru(n,(function(e){return pb(e)}));o=function(e,t,n,r){var i=Kw(e,r);if(i){var a=Hw(i),o=a.path,u=a.queryId,s=Ak(o,t),c=Hb.fromObject(n);return Gw(e,o,new Fb(Db(u),s,c))}return[]}(e.serverSyncTree_,a,u,i)}else{var s=pb(n);o=Vw(e.serverSyncTree_,a,s,i)}else if(r){var c=Ru(n,(function(e){return pb(e)}));o=function(e,t,n){var r=Hb.fromObject(n);return Bw(e,new Fb({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,a,c)}else{var l=pb(n);o=jw(e.serverSyncTree_,a,l)}var f=a;o.length>0&&(f=F_(e,a)),b_(e.eventQueue_,f,o)}function N_(e,t){A_(e,"connected",t),!1===t&&function(e){D_(e,"onDisconnectEvents");var t=S_(e),n=Sb();Nb(e.onDisconnect_,wk(),(function(r,i){var a=Zw(r,i,e.serverSyncTree_,t);Cb(n,r,a)}));var r=[];Nb(n,wk(),(function(t,n){r=r.concat(jw(e.serverSyncTree_,t,n));var i=B_(e,t);F_(e,i)})),e.onDisconnect_=Sb(),b_(e.eventQueue_,wk(),r)}(e)}function A_(e,t,n){var r=new bk("/.info/"+t),i=pb(n);e.infoData_.updateSnapshot(r,i);var a=jw(e.infoSyncTree_,r,i);b_(e.eventQueue_,r,a)}function R_(e){return e.nextWriteId_++}function P_(e){e.persistentConnection_&&e.persistentConnection_.interrupt(x_)}function D_(e){var t="";e.persistentConnection_&&(t=e.persistentConnection_.id+":");for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];Ng.apply(void 0,[t].concat(r))}function O_(e,t,n){return qw(e.serverSyncTree_,t,n)||hb.EMPTY_NODE}function L_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||q_(e,t),i_(t)){var n=j_(e,t);Yo(n.length>0,"Sending zero length transaction queue");var r=n.every((function(e){return 0===e.status}));r&&M_(e,c_(t),n)}else o_(t)&&u_(t,(function(t){L_(e,t)}))}function M_(e,t,n){for(var r=n.map((function(e){return e.currentWriteId})),i=O_(e,t,r),a=i,o=i.hash(),u=0;u<n.length;u++){var s=n[u];Yo(0===s.status,"tryToSendTransactionQueue_: items in queue should all be run."),s.status=1,s.retryCount++;var c=Ak(t,s.path);a=a.updateChild(c,s.currentOutputSnapshotRaw)}var l=a.val(!0),f=t;e.server_.put(f.toString(),l,(function(r){D_(e,"transaction put response",{path:f.toString(),status:r});var i=[];if("ok"===r){for(var a=[],o=function(t){n[t].status=2,i=i.concat(Uw(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&a.push((function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)})),n[t].unwatcher()},u=0;u<n.length;u++)o(u);q_(e,r_(e.transactionQueueTree_,t)),L_(e,e.transactionQueueTree_),b_(e.eventQueue_,t,i);for(var s=0;s<a.length;s++)Hg(a[s])}else{if("datastale"===r)for(var c=0;c<n.length;c++)3===n[c].status?n[c].status=4:n[c].status=0;else{Dg("transaction at "+f.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}F_(e,t)}}),o)}function F_(e,t){var n=U_(e,t),r=c_(n);return function(e,t,n){if(0===t.length)return;for(var r=[],i=[],a=t.filter((function(e){return 0===e.status})),o=a.map((function(e){return e.currentWriteId})),u=function(a){var u,s,c=t[a],l=Ak(n,c.path),f=!1;if(Yo(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)f=!0,u=c.abortReason,i=i.concat(Uw(e.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)f=!0,u="maxretry",i=i.concat(Uw(e.serverSyncTree_,c.currentWriteId,!0));else{var h=O_(e,c.path,o);c.currentInputSnapshot=h;var d=t[a].update(h.val());if(void 0!==d){m_("transaction failed: Data returned ",d,c.path);var p=pb(d);"object"===typeof d&&null!=d&&Cu(d,".priority")||(p=p.updatePriority(h.getPriority()));var v=c.currentWriteId,m=S_(e),y=e_(p,h,m);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=y,c.currentWriteId=R_(e),o.splice(o.indexOf(v),1),i=(i=i.concat(Fw(e.serverSyncTree_,c.path,y,c.currentWriteId,c.applyLocally))).concat(Uw(e.serverSyncTree_,v,!0))}else f=!0,u="nodata",i=i.concat(Uw(e.serverSyncTree_,c.currentWriteId,!0))}b_(e.eventQueue_,n,i),i=[],f&&(t[a].status=2,s=t[a].unwatcher,setTimeout(s,Math.floor(0)),t[a].onComplete&&("nodata"===u?r.push((function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)})):r.push((function(){return t[a].onComplete(new Error(u),!1,null)}))))},s=0;s<t.length;s++)u(s);q_(e,e.transactionQueueTree_);for(var c=0;c<r.length;c++)Hg(r[c]);L_(e,e.transactionQueueTree_)}(e,j_(e,n),r),r}function U_(e,t){var n,r=e.transactionQueueTree_;for(n=_k(t);null!==n&&void 0===i_(r);)r=r_(r,n),n=_k(t=Ik(t));return r}function j_(e,t){var n=[];return V_(e,t,n),n.sort((function(e,t){return e.order-t.order})),n}function V_(e,t,n){var r=i_(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);u_(t,(function(t){V_(e,t,n)}))}function q_(e,t){var n=i_(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,a_(t,n.length>0?n:void 0)}u_(t,(function(t){q_(e,t)}))}function B_(e,t){var n=c_(U_(e,t)),r=r_(e.transactionQueueTree_,t);return function(e,t,n){for(var r=n?e:e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,(function(t){z_(e,t)})),z_(e,r),s_(r,(function(t){z_(e,t)})),n}function z_(e,t){var n=i_(t);if(n){for(var r=[],i=[],a=-1,o=0;o<n.length;o++)3===n[o].status||(1===n[o].status?(Yo(a===o-1,"All SENT items should be at beginning of queue."),a=o,n[o].status=3,n[o].abortReason="set"):(Yo(0===n[o].status,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Uw(e.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));-1===a?a_(t,void 0):n.length=a+1,b_(e.eventQueue_,c_(t),i);for(var u=0;u<r.length;u++)Hg(r[u])}}var W_=function(e,t){var n=K_(e),r=n.namespace;"firebase.com"===n.domain&&Pg(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||Pg("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!==typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Dg("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var i="ws"===n.scheme||"wss"===n.scheme;return{repoInfo:new nk(n.host,n.secure,r,i,t,"",r!==n.subdomain),path:new bk(n.pathString)}},K_=function(e){var t="",n="",r="",i="",a="",o=!0,u="https",s=443;if("string"===typeof e){var c=e.indexOf("//");c>=0&&(u=e.substring(0,c-1),e=e.substring(c+2));var l=e.indexOf("/");-1===l&&(l=e.length);var f=e.indexOf("?");-1===f&&(f=e.length),t=e.substring(0,Math.min(l,f)),l<f&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}t+="/"+i}return t}(e.substring(l,f)));var h=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=C(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var a=i.split("=");2===a.length?t[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):Dg("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(o){r.e(o)}finally{r.f()}return t}(e.substring(Math.min(e.length,f)));(c=t.indexOf(":"))>=0?(o="https"===u||"wss"===u,s=parseInt(t.substring(c+1),10)):c=t.length;var d=t.slice(0,c);if("localhost"===d.toLowerCase())n="localhost";else if(d.split(".").length<=2)n=d;else{var p=t.indexOf(".");r=t.substring(0,p).toLowerCase(),n=t.substring(p+1),a=r}"ns"in h&&(a=h.ns)}return{host:t,port:s,domain:n,subdomain:r,secure:o,scheme:u,pathString:i,namespace:a}},H_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",G_=(function(){var e=0,t=[]}(),function(){function e(t,n,r,i){d(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return y(e,[{key:"key",get:function(){return Nk(this._path)?null:Tk(this._path)}},{key:"ref",get:function(){return new Q_(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=Ib(this._queryParams),t=Vg(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return Ib(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=Ku(t))instanceof e))return!1;var n=this._repo===t._repo,r=Rk(this._path,t._path),i=this._queryIdentifier===t._queryIdentifier;return n&&r&&i}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}());var Q_=function(e){k(n,e);var t=I(n);function n(e,r){return d(this,n),t.call(this,e,r,new _b,!1)}return y(n,[{key:"parent",get:function(){var e=Sk(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(G_);!function(e){Yo(!Nw,"__referenceConstructor has already been defined"),Nw=e}(Q_),function(e){Yo(!Dw,"__referenceConstructor has already been defined"),Dw=e}(Q_);var $_={},Y_=!1;function X_(e,t,n,r,i){var a=r||e.options.databaseURL;void 0===a&&(e.options.projectId||Pg("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ng("Using default host for project ",e.options.projectId),a="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var o,u=W_(a,i),s=u.repoInfo,c=void 0;"undefined"!==typeof process&&(c={NODE_ENV:"production",PUBLIC_URL:"/Online-Booking-System",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.FIREBASE_DATABASE_EMULATOR_HOST),c?(o=!0,a="http://".concat(c,"?ns=").concat(s.namespace),s=(u=W_(a,i)).repoInfo):o=!u.repoInfo.secure;var l=i&&o?new Yg(Yg.OWNER):new $g(e.name,e.options,t);y_("Invalid Firebase Database URL",u),Nk(u.path)||Pg("Database URL must point to the root of a Firebase Database (not including a child path).");var f=function(e,t,n,r){var i=$_[t.name];i||(i={},$_[t.name]=i);var a=i[e.toURLString()];a&&Pg("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call.");return a=new I_(e,Y_,n,r),i[e.toURLString()]=a,a}(s,e,l,new Qg(e.name,n));return new J_(f,e)}var J_=function(){function e(t,n){d(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return y(e,[{key:"_repo",get:function(){return this._instanceStarted||(T_(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new Q_(this._repo,wk())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(!function(e,t){var n=$_[t];n&&n[e.key]===e||Pg("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),P_(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&Pg("Cannot call "+e+" on a deleted database.")}}]),e}();Uk.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Uk.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};!function(e){!function(e){mg=e}(qs),Os(new Hu("database",(function(e,t){var n=t.instanceIdentifier;return X_(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)}),"PUBLIC").setMultipleInstances(!0)),Gs(pg,vg,e),Gs(pg,vg,"esm2017")}();var Z_,ex="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},tx={},nx=nx||{},rx=ex||self;function ix(){}function ax(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function ox(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var ux="closure_uid_"+(1e9*Math.random()>>>0),sx=0;function cx(e,t,n){return e.call.apply(e.bind,arguments)}function lx(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function fx(e,t,n){return(fx=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?cx:lx).apply(null,arguments)}function hx(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function dx(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function px(){this.s=this.s,this.o=this.o}px.prototype.s=!1,px.prototype.na=function(){var e;!this.s&&(this.s=!0,this.M(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,ux)&&e[ux]||(e[ux]=++sx))},px.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var vx=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function mx(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function yx(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(ax(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function gx(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}gx.prototype.h=function(){this.defaultPrevented=!0};var kx=function(){if(!rx.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{rx.addEventListener("test",ix,t),rx.removeEventListener("test",ix,t)}catch(n){}return e}();function bx(e){return/^[\s\xa0]*$/.test(e)}var wx=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function _x(e,t){return e<t?-1:e>t?1:0}function xx(){var e=rx.navigator;return e&&(e=e.userAgent)?e:""}function Ix(e){return-1!=xx().indexOf(e)}function Tx(e){return Tx[" "](e),e}Tx[" "]=ix;var Ex,Sx=Ix("Opera"),Cx=Ix("Trident")||Ix("MSIE"),Nx=Ix("Edge"),Ax=Nx||Cx,Rx=Ix("Gecko")&&!(-1!=xx().toLowerCase().indexOf("webkit")&&!Ix("Edge"))&&!(Ix("Trident")||Ix("MSIE"))&&!Ix("Edge"),Px=-1!=xx().toLowerCase().indexOf("webkit")&&!Ix("Edge");function Dx(){var e=rx.document;return e?e.documentMode:void 0}e:{var Ox="",Lx=function(){var e=xx();return Rx?/rv:([^\);]+)(\)|;)/.exec(e):Nx?/Edge\/([\d\.]+)/.exec(e):Cx?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):Px?/WebKit\/(\S+)/.exec(e):Sx?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(Lx&&(Ox=Lx?Lx[1]:""),Cx){var Mx=Dx();if(null!=Mx&&Mx>parseFloat(Ox)){Ex=String(Mx);break e}}Ex=Ox}var Fx,Ux={};function jx(){return function(e){var t=Ux;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=wx(String(Ex)).split("."),n=wx("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=_x(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||_x(0==a[2].length,0==o[2].length)||_x(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(rx.document&&Cx){var Vx=Dx();Fx=Vx||(parseInt(Ex,10)||void 0)}else Fx=void 0;var qx=Fx;function Bx(e,t){if(gx.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Rx){e:{try{Tx(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:zx[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Bx.X.h.call(this)}}dx(Bx,gx);var zx={2:"touch",3:"pen",4:"mouse"};Bx.prototype.h=function(){Bx.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Wx="closure_listenable_"+(1e6*Math.random()|0),Kx=0;function Hx(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++Kx,this.ba=this.ea=!1}function Gx(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function Qx(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function $x(e){var t={};for(var n in e)t[n]=e[n];return t}var Yx="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Xx(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<Yx.length;a++)n=Yx[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Jx(e){this.src=e,this.g={},this.h=0}function Zx(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=vx(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(Gx(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function eI(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}Jx.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=eI(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new Hx(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var tI="closure_lm_"+(1e6*Math.random()|0),nI={};function rI(e,t,n,r,i){if(r&&r.once)return aI(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)rI(e,t[a],n,r,i);return null}return n=hI(n),e&&e[Wx]?e.N(t,n,ox(r)?!!r.capture:!!r,i):iI(e,t,n,!1,r,i)}function iI(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=ox(i)?!!i.capture:!!i,u=lI(e);if(u||(e[tI]=u=new Jx(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=cI;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)kx||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(sI(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function aI(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)aI(e,t[a],n,r,i);return null}return n=hI(n),e&&e[Wx]?e.O(t,n,ox(r)?!!r.capture:!!r,i):iI(e,t,n,!0,r,i)}function oI(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)oI(e,t[a],n,r,i);else r=ox(r)?!!r.capture:!!r,n=hI(n),e&&e[Wx]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=eI(a=e.g[t],n,r,i))&&(Gx(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=lI(e))&&(t=e.g[t.toString()],e=-1,t&&(e=eI(t,n,r,i)),(n=-1<e?t[e]:null)&&uI(n))}function uI(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[Wx])Zx(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(sI(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=lI(t))?(Zx(n,e),0==n.h&&(n.src=null,t[tI]=null)):Gx(e)}}}function sI(e){return e in nI?nI[e]:nI[e]="on"+e}function cI(e,t){if(e.ba)e=!0;else{t=new Bx(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&uI(e),e=n.call(r,t)}return e}function lI(e){return(e=e[tI])instanceof Jx?e:null}var fI="__closure_events_fn_"+(1e9*Math.random()>>>0);function hI(e){return"function"===typeof e?e:(e[fI]||(e[fI]=function(t){return e.handleEvent(t)}),e[fI])}function dI(){px.call(this),this.i=new Jx(this),this.P=this,this.I=null}function pI(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new gx(t,e);else if(t instanceof gx)t.target=t.target||e;else{var i=t;Xx(t=new gx(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=vI(o,r,!0,t)&&i}if(i=vI(o=t.g=e,r,!0,t)&&i,i=vI(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=vI(o=t.g=n[a],r,!1,t)&&i}function vI(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var u=o.listener,s=o.ha||o.src;o.ea&&Zx(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}dx(dI,px),dI.prototype[Wx]=!0,dI.prototype.removeEventListener=function(e,t,n,r){oI(this,e,t,n,r)},dI.prototype.M=function(){if(dI.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Gx(n[r]);delete t.g[e],t.h--}}this.I=null},dI.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},dI.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var mI=rx.JSON.stringify;function yI(){var e=TI,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var gI,kI=function(){function e(){d(this,e),this.h=this.g=null}return y(e,[{key:"add",value:function(e,t){var n=bI.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),bI=new(function(){function e(t,n){d(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return y(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new wI}),(function(e){return e.reset()})),wI=function(){function e(){d(this,e),this.next=this.g=this.h=null}return y(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function _I(e){rx.setTimeout((function(){throw e}),0)}function xI(e,t){gI||function(){var e=rx.Promise.resolve(void 0);gI=function(){e.then(EI)}}(),II||(gI(),II=!0),TI.add(e,t)}var II=!1,TI=new kI;function EI(){for(var e;e=yI();){try{e.h.call(e.g)}catch(n){_I(n)}var t=bI;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}II=!1}function SI(e,t){dI.call(this),this.h=e||1,this.g=t||rx,this.j=fx(this.lb,this),this.l=Date.now()}function CI(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function NI(e,t,n){if("function"===typeof e)n&&(e=fx(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=fx(e.handleEvent,e)}return 2147483647<Number(t)?-1:rx.setTimeout(e,t||0)}function AI(e){e.g=NI((function(){e.g=null,e.i&&(e.i=!1,AI(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}dx(SI,dI),(Z_=SI.prototype).ca=!1,Z_.R=null,Z_.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),pI(this,"tick"),this.ca&&(CI(this),this.start()))}},Z_.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Z_.M=function(){SI.X.M.call(this),CI(this),delete this.g};var RI=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return y(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:AI(this)}},{key:"M",value:function(){Bo(b(n.prototype),"M",this).call(this),this.g&&(rx.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(px);function PI(e){px.call(this),this.h=e,this.g={}}dx(PI,px);var DI=[];function OI(e,t,n,r){Array.isArray(n)||(n&&(DI[0]=n.toString()),n=DI);for(var i=0;i<n.length;i++){var a=rI(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function LI(e){Qx(e.g,(function(e,t){this.g.hasOwnProperty(t)&&uI(e)}),e),e.g={}}function MI(){this.g=!0}function FI(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return mI(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}PI.prototype.M=function(){PI.X.M.call(this),LI(this)},PI.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},MI.prototype.Aa=function(){this.g=!1},MI.prototype.info=function(){};var UI={},jI=null;function VI(){return jI=jI||new dI}function qI(e){gx.call(this,UI.Pa,e)}function BI(e){var t=VI();pI(t,new qI(t))}function zI(e,t){gx.call(this,UI.STAT_EVENT,e),this.stat=t}function WI(e){var t=VI();pI(t,new zI(t,e))}function KI(e,t){gx.call(this,UI.Qa,e),this.size=t}function HI(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return rx.setTimeout((function(){e()}),t)}UI.Pa="serverreachability",dx(qI,gx),UI.STAT_EVENT="statevent",dx(zI,gx),UI.Qa="timingevent",dx(KI,gx);var GI={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},QI={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function $I(){}function YI(e){return e.h||(e.h=e.i())}function XI(){}$I.prototype.h=null;var JI,ZI={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function eT(){gx.call(this,"d")}function tT(){gx.call(this,"c")}function nT(){}function rT(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new PI(this),this.O=aT,e=Ax?125:void 0,this.T=new SI(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new iT}function iT(){this.i=null,this.g="",this.h=!1}dx(eT,gx),dx(tT,gx),dx(nT,$I),nT.prototype.g=function(){return new XMLHttpRequest},nT.prototype.i=function(){return{}},JI=new nT;var aT=45e3,oT={},uT={};function sT(e,t,n){e.K=1,e.v=ST(_T(t)),e.s=n,e.P=!0,cT(e,null)}function cT(e,t){e.F=Date.now(),dT(e),e.A=_T(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),VT(n.i,"t",r),e.C=0,n=e.l.H,e.h=new iT,e.g=qE(e.l,n?t:null,!e.s),0<e.N&&(e.L=new RI(fx(e.La,e,e.g),e.N)),OI(e.S,e.g,"readystatechange",e.ib),t=e.H?$x(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),BI(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function lT(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function fT(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=hT(e,n))==uT){4==t&&(e.o=4,WI(14),i=!1),FI(e.j,e.m,null,"[Incomplete Response]");break}if(r==oT){e.o=4,WI(15),FI(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}FI(e.j,e.m,r,null),gT(e,r)}lT(e)&&r!=uT&&r!=oT&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,WI(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),DE(t),t.K=!0,WI(11))):(FI(e.j,e.m,n,"[Invalid Chunked Response]"),yT(e),mT(e))}function hT(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?uT:(n=Number(t.substring(n,r)),isNaN(n)?oT:(r+=1)+n>t.length?uT:(t=t.substr(r,n),e.C=r+n,t))}function dT(e){e.V=Date.now()+e.O,pT(e,e.O)}function pT(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=HI(fx(e.gb,e),t)}function vT(e){e.B&&(rx.clearTimeout(e.B),e.B=null)}function mT(e){0==e.l.G||e.I||ME(e.l,e)}function yT(e){vT(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,CI(e.T),LI(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function gT(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||QT(n.h,e)))if(!e.J&&QT(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;LE(n),TE(n)}PE(n),WI(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=HI(fx(n.cb,n),6e3));if(1>=GT(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else UE(n,11)}else if((e.J||n.g==e)&&LE(n),!bx(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var u=a[4];null!=u&&(n.Ca=u,n.j.info("SVER="+n.Ca));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.h;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&($T(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.za=h,ET(r.F,r.D,h))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=VE(r,r.H?r.ka:null,r.V),d.J){YT(r.h,d);var p=d,v=r.J;v&&p.setTimeout(v),p.B&&(vT(p),dT(p)),r.g=d}else RE(r);0<n.i.length&&SE(n)}else"stop"!=a[0]&&"close"!=a[0]||UE(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?UE(n,7):IE(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}BI()}catch(a){}}function kT(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(ax(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(ax(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(ax(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Z_=rT.prototype).setTimeout=function(e){this.O=e},Z_.ib=function(e){e=e.target;var t=this.L;t&&3==gE(e)?t.l():this.La(e)},Z_.La=function(e){try{if(e==this.g)e:{var t=gE(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||Ax||this.g&&(this.h.h||this.g.fa()||kE(this.g)))){this.I||4!=t||7==n||BI(),vT(this);var r=this.g.aa();this.Y=r;t:if(lT(this)){var i=kE(this.g);e="";var a=i.length,o=4==gE(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){yT(this),mT(this);var u="";break t}this.h.i=new rx.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!bx(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,WI(12),yT(this),mT(this);break e}FI(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,gT(this,r)}this.P?(fT(this,t,u),Ax&&this.i&&3==t&&(OI(this.S,this.T,"tick",this.hb),this.T.start())):(FI(this.j,this.m,u,null),gT(this,u)),4==t&&yT(this),this.i&&!this.I&&(4==t?ME(this.l,this):(this.i=!1,dT(this)))}else 400==r&&0<u.indexOf("Unknown SID")?(this.o=3,WI(12)):(this.o=0,WI(13)),yT(this),mT(this)}}}catch(t){}},Z_.hb=function(){if(this.g){var e=gE(this.g),t=this.g.fa();this.C<t.length&&(vT(this),fT(this,e,t),this.i&&4!=e&&dT(this))}},Z_.cancel=function(){this.I=!0,yT(this)},Z_.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(BI(),WI(17)),yT(this),this.o=2,mT(this)):pT(this,this.V-e)};var bT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wT(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof wT){this.h=void 0!==t?t:e.h,xT(this,e.j),this.s=e.s,this.g=e.g,IT(this,e.m),this.l=e.l,t=e.i;var n=new MT;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),TT(this,n),this.o=e.o}else e&&(n=String(e).match(bT))?(this.h=!!t,xT(this,n[1]||"",!0),this.s=CT(n[2]||""),this.g=CT(n[3]||"",!0),IT(this,n[4]),this.l=CT(n[5]||"",!0),TT(this,n[6]||"",!0),this.o=CT(n[7]||"")):(this.h=!!t,this.i=new MT(null,this.h))}function _T(e){return new wT(e)}function xT(e,t,n){e.j=n?CT(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function IT(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function TT(e,t,n){t instanceof MT?(e.i=t,function(e,t){t&&!e.j&&(FT(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(UT(this,t),VT(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=NT(t,OT)),e.i=new MT(t,e.h))}function ET(e,t,n){e.i.set(t,n)}function ST(e){return ET(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function CT(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function NT(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,AT),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function AT(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}wT.prototype.toString=function(){var e=[],t=this.j;t&&e.push(NT(t,RT,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(NT(t,RT,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(NT(n,"/"==n.charAt(0)?DT:PT,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",NT(n,LT)),e.join("")};var RT=/[#\/\?@]/g,PT=/[#\?:]/g,DT=/[#\?]/g,OT=/[#\?@]/g,LT=/#/g;function MT(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function FT(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function UT(e,t){FT(e),t=qT(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function jT(e,t){return FT(e),t=qT(e,t),e.g.has(t)}function VT(e,t,n){UT(e,t),0<n.length&&(e.i=null,e.g.set(qT(e,t),mx(n)),e.h+=n.length)}function qT(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Z_=MT.prototype).add=function(e,t){FT(this),this.i=null,e=qT(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Z_.forEach=function(e,t){FT(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Z_.oa=function(){FT(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Z_.W=function(e){FT(this);var t=[];if("string"===typeof e)jT(this,e)&&(t=t.concat(this.g.get(qT(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Z_.set=function(e,t){return FT(this),this.i=null,jT(this,e=qT(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Z_.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},Z_.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var BT=y((function e(t,n){d(this,e),this.h=t,this.g=n}));function zT(e){this.l=e||KT,rx.PerformanceNavigationTiming?e=0<(e=rx.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(rx.g&&rx.g.Ga&&rx.g.Ga()&&rx.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var WT,KT=10;function HT(e){return!!e.h||!!e.g&&e.g.size>=e.j}function GT(e){return e.h?1:e.g?e.g.size:0}function QT(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function $T(e,t){e.g?e.g.add(t):e.h=t}function YT(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function XT(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=C(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return mx(e.i)}function JT(){}function ZT(){this.g=new JT}function eE(e,t,n){var r=n||"";try{kT(e,(function(e,n){var i=e;ox(e)&&(i=mI(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function tE(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function nE(e){this.l=e.ac||null,this.j=e.jb||!1}function rE(e,t){dI.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=iE,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}zT.prototype.cancel=function(){if(this.i=XT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=C(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},JT.prototype.stringify=function(e){return rx.JSON.stringify(e,void 0)},JT.prototype.parse=function(e){return rx.JSON.parse(e,void 0)},dx(nE,$I),nE.prototype.g=function(){return new rE(this.l,this.j)},nE.prototype.i=(WT={},function(){return WT}),dx(rE,dI);var iE=0;function aE(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function oE(e){e.readyState=4,e.l=null,e.j=null,e.A=null,uE(e)}function uE(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Z_=rE.prototype).open=function(e,t){if(this.readyState!=iE)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,uE(this)},Z_.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||rx).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},Z_.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,oE(this)),this.readyState=iE},Z_.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,uE(this)),this.g&&(this.readyState=3,uE(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof rx.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;aE(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},Z_.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?oE(this):uE(this),3==this.readyState&&aE(this)}},Z_.Va=function(e){this.g&&(this.response=this.responseText=e,oE(this))},Z_.Ua=function(e){this.g&&(this.response=e,oE(this))},Z_.ga=function(){this.g&&oE(this)},Z_.setRequestHeader=function(e,t){this.v.append(e,t)},Z_.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Z_.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(rE.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var sE=rx.JSON.parse;function cE(e){dI.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=lE,this.K=this.L=!1}dx(cE,dI);var lE="",fE=/^https?$/i,hE=["POST","PUT"];function dE(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,pE(e),mE(e)}function pE(e){e.D||(e.D=!0,pI(e,"complete"),pI(e,"error"))}function vE(e){if(e.h&&"undefined"!=typeof nx&&(!e.C[1]||4!=gE(e)||2!=e.aa()))if(e.v&&4==gE(e))NI(e.Ha,0,e);else if(pI(e,"readystatechange"),4==gE(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(bT)[1]||null;if(!a&&rx.self&&rx.self.location){var o=rx.self.location.protocol;a=o.substr(0,o.length-1)}i=!fE.test(a?a.toLowerCase():"")}t=i}if(t)pI(e,"complete"),pI(e,"success");else{e.m=6;try{var u=2<gE(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.aa()+"]",pE(e)}}finally{mE(e)}}}function mE(e,t){if(e.g){yE(e);var n=e.g,r=e.C[0]?ix:null;e.g=null,e.C=null,t||pI(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function yE(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(rx.clearTimeout(e.A),e.A=null)}function gE(e){return e.g?e.g.readyState:0}function kE(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case lE:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(rS){return null}}function bE(e){var t="";return Qx(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function wE(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=bE(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ET(e,t,n))}function _E(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function xE(e){this.Ca=0,this.i=[],this.j=new MI,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=_E("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=_E("baseRetryDelayMs",5e3,e),this.bb=_E("retryDelaySeedMs",1e4,e),this.$a=_E("forwardChannelMaxRetries",2,e),this.ta=_E("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new zT(e&&e.concurrentRequestLimit),this.Fa=new ZT,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function IE(e){if(EE(e),3==e.G){var t=e.U++,n=_T(e.F);ET(n,"SID",e.I),ET(n,"RID",t),ET(n,"TYPE","terminate"),NE(e,n),(t=new rT(e,e.j,t,void 0)).K=2,t.v=ST(_T(n)),n=!1,rx.navigator&&rx.navigator.sendBeacon&&(n=rx.navigator.sendBeacon(t.v.toString(),"")),!n&&rx.Image&&((new Image).src=t.v,n=!0),n||(t.g=qE(t.l,null),t.g.da(t.v)),t.F=Date.now(),dT(t)}jE(e)}function TE(e){e.g&&(DE(e),e.g.cancel(),e.g=null)}function EE(e){TE(e),e.u&&(rx.clearTimeout(e.u),e.u=null),LE(e),e.h.cancel(),e.m&&("number"===typeof e.m&&rx.clearTimeout(e.m),e.m=null)}function SE(e){HT(e.h)||e.m||(e.m=!0,xI(e.Ja,e),e.C=0)}function CE(e,t){var n;n=t?t.m:e.U++;var r=_T(e.F);ET(r,"SID",e.I),ET(r,"RID",n),ET(r,"AID",e.T),NE(e,r),e.o&&e.s&&wE(r,e.o,e.s),n=new rT(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=AE(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),$T(e.h,n),sT(n,r,t)}function NE(e,t){e.ia&&Qx(e.ia,(function(e,n){ET(t,n,e)})),e.l&&kT({},(function(e,n){ET(t,n,e)}))}function AE(e,t,n){n=Math.min(e.i.length,n);var r=e.l?fx(e.l.Ra,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{eE(l,o,"req"+c+"_")}catch(f){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function RE(e){e.g||e.u||(e.Z=1,xI(e.Ia,e),e.A=0)}function PE(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=HI(fx(e.Ia,e),FE(e,e.A)),e.A++,!0)}function DE(e){null!=e.B&&(rx.clearTimeout(e.B),e.B=null)}function OE(e){e.g=new rT(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=_T(e.sa);ET(t,"RID","rpc"),ET(t,"SID",e.I),ET(t,"CI",e.L?"0":"1"),ET(t,"AID",e.T),ET(t,"TYPE","xmlhttp"),NE(e,t),e.o&&e.s&&wE(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=ST(_T(t)),n.s=null,n.P=!0,cT(n,e)}function LE(e){null!=e.v&&(rx.clearTimeout(e.v),e.v=null)}function ME(e,t){var n=null;if(e.g==t){LE(e),DE(e),e.g=null;var r=2}else{if(!QT(e.h,t))return;n=t.D,YT(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;pI(r=VI(),new KI(r,n)),SE(e)}else RE(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(GT(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=HI(fx(e.Ja,e,t),FE(e,e.C)),e.C++,!0))}(e,t)||2==r&&PE(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:UE(e,5);break;case 4:UE(e,10);break;case 3:UE(e,6);break;default:UE(e,2)}}function FE(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function UE(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=fx(e.kb,e);n||(n=new wT("//www.google.com/images/cleardot.gif"),rx.location&&"http"==rx.location.protocol||xT(n,"https"),ST(n)),function(e,t){var n=new MI;if(rx.Image){var r=new Image;r.onload=hx(tE,n,r,"TestLoadImage: loaded",!0,t),r.onerror=hx(tE,n,r,"TestLoadImage: error",!1,t),r.onabort=hx(tE,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=hx(tE,n,r,"TestLoadImage: timeout",!1,t),rx.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else WI(2);e.G=0,e.l&&e.l.va(t),jE(e),EE(e)}function jE(e){if(e.G=0,e.la=[],e.l){var t=XT(e.h);0==t.length&&0==e.i.length||(yx(e.la,t),yx(e.la,e.i),e.h.i.length=0,mx(e.i),e.i.length=0),e.l.ua()}}function VE(e,t,n){var r=n instanceof wT?_T(n):new wT(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),IT(r,r.m);else{var i=rx.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new wT(null,void 0);r&&xT(a,r),t&&(a.g=t),i&&IT(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&ET(r,n,t),ET(r,"VER",e.ma),NE(e,r),r}function qE(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new cE(new nE({jb:!0})):new cE(e.ra)).Ka(e.H),t}function BE(){}function zE(){if(Cx&&!(10<=Number(qx)))throw Error("Environmental error: no available transport.")}function WE(e,t){dI.call(this),this.g=new xE(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!bx(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!bx(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new GE(this)}function KE(e){eT.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function HE(){tT.call(this),this.status=1}function GE(e){this.g=e}(Z_=cE.prototype).Ka=function(e){this.L=e},Z_.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():JI.g(),this.C=this.u?YI(this.u):YI(JI),this.g.onreadystatechange=fx(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(u){return void dE(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=C(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=rx.FormData&&e instanceof rx.FormData,!(0<=vx(hE,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,c=C(n);try{for(c.s();!(s=c.n()).done;){var f=l(s.value,2),h=f[0],d=f[1];this.g.setRequestHeader(h,d)}}catch(p){c.e(p)}finally{c.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{yE(this),0<this.B&&((this.K=function(e){return Cx&&jx()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=fx(this.qa,this)):this.A=NI(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){dE(this,u)}},Z_.qa=function(){"undefined"!=typeof nx&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,pI(this,"timeout"),this.abort(8))},Z_.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,pI(this,"complete"),pI(this,"abort"),mE(this))},Z_.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),mE(this,!0)),cE.X.M.call(this)},Z_.Ha=function(){this.s||(this.F||this.v||this.l?vE(this):this.fb())},Z_.fb=function(){vE(this)},Z_.aa=function(){try{return 2<gE(this)?this.g.status:-1}catch(WT){return-1}},Z_.fa=function(){try{return this.g?this.g.responseText:""}catch(WT){return""}},Z_.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),sE(t)}},Z_.Ea=function(){return this.m},Z_.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Z_=xE.prototype).ma=8,Z_.G=1,Z_.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new rT(this,this.j,e,void 0),n=this.s;if(this.S&&(n?Xx(n=$x(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=AE(this,t,r),ET(i=_T(this.F),"RID",e),ET(i,"CVER",22),this.D&&ET(i,"X-HTTP-Session-Id",this.D),NE(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(bE(n)))+"&"+r:this.o&&wE(i,this.o,n)),$T(this.h,t),this.Ya&&ET(i,"TYPE","init"),this.O?(ET(i,"$req",r),ET(i,"SID","null"),t.Z=!0,sT(t,i,null)):sT(t,i,r),this.G=2}}else 3==this.G&&(e?CE(this,e):0==this.i.length||HT(this.h)||CE(this))},Z_.Ia=function(){if(this.u=null,OE(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=HI(fx(this.eb,this),e)}},Z_.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,WI(10),TE(this),OE(this))},Z_.cb=function(){null!=this.v&&(this.v=null,TE(this),PE(this),WI(19))},Z_.kb=function(e){e?(this.j.info("Successfully pinged google.com"),WI(2)):(this.j.info("Failed to ping google.com"),WI(1))},(Z_=BE.prototype).xa=function(){},Z_.wa=function(){},Z_.va=function(){},Z_.ua=function(){},Z_.Ra=function(){},zE.prototype.g=function(e,t){return new WE(e,t)},dx(WE,dI),WE.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;WI(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=VE(e,null,e.V),SE(e)},WE.prototype.close=function(){IE(this.g)},WE.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=mI(e),e=n);t.i.push(new BT(t.ab++,e)),3==t.G&&SE(t)},WE.prototype.M=function(){this.g.l=null,delete this.j,IE(this.g),delete this.g,WE.X.M.call(this)},dx(KE,eT),dx(HE,tT),dx(GE,BE),GE.prototype.xa=function(){pI(this.g,"a")},GE.prototype.wa=function(e){pI(this.g,new KE(e))},GE.prototype.va=function(e){pI(this.g,new HE)},GE.prototype.ua=function(){pI(this.g,"b")},zE.prototype.createWebChannel=zE.prototype.g,WE.prototype.send=WE.prototype.u,WE.prototype.open=WE.prototype.m,WE.prototype.close=WE.prototype.close,GI.NO_ERROR=0,GI.TIMEOUT=8,GI.HTTP_ERROR=6,QI.COMPLETE="complete",XI.EventType=ZI,ZI.OPEN="a",ZI.CLOSE="b",ZI.ERROR="c",ZI.MESSAGE="d",dI.prototype.listen=dI.prototype.N,cE.prototype.listenOnce=cE.prototype.O,cE.prototype.getLastError=cE.prototype.Oa,cE.prototype.getLastErrorCode=cE.prototype.Ea,cE.prototype.getStatus=cE.prototype.aa,cE.prototype.getResponseJson=cE.prototype.Sa,cE.prototype.getResponseText=cE.prototype.fa,cE.prototype.send=cE.prototype.da,cE.prototype.setWithCredentials=cE.prototype.Ka;var QE=tx.createWebChannelTransport=function(){return new zE},$E=tx.getStatEventTarget=function(){return VI()},YE=tx.ErrorCode=GI,XE=tx.EventType=QI,JE=tx.Event=UI,ZE=tx.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},eS=tx.FetchXmlHttpFactory=nE,tS=tx.WebChannel=XI,nS=tx.XhrIo=cE,rS="@firebase/firestore",iS=function(){function e(t){d(this,e),this.uid=t}return y(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();iS.UNAUTHENTICATED=new iS(null),iS.GOOGLE_CREDENTIALS=new iS("google-credentials-uid"),iS.FIRST_PARTY=new iS("first-party-uid"),iS.MOCK_USER=new iS("mock-user");var aS="9.15.0",oS=new rs("@firebase/firestore");function uS(){return oS.logLevel}function sS(e){if(oS.logLevel<=Yu.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(fS);oS.debug.apply(oS,["Firestore (".concat(aS,"): ").concat(e)].concat(h(i)))}}function cS(e){if(oS.logLevel<=Yu.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(fS);oS.error.apply(oS,["Firestore (".concat(aS,"): ").concat(e)].concat(h(i)))}}function lS(e){if(oS.logLevel<=Yu.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(fS);oS.warn.apply(oS,["Firestore (".concat(aS,"): ").concat(e)].concat(h(i)))}}function fS(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function hS(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(aS,") INTERNAL ASSERTION FAILED: ")+e;throw cS(t),new Error(t)}function dS(e,t){e||hS()}function pS(e,t){return e}var vS={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},mS=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return y(n)}(wu),yS=y((function e(){var t=this;d(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),gS=y((function e(t,n){d(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),kS=function(){function e(){d(this,e)}return y(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(iS.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),bS=function(){function e(t){d(this,e),this.token=t,this.changeListener=null}return y(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),wS=function(){function e(t){d(this,e),this.t=t,this.currentUser=iS.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return y(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new yS;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new yS,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(Ko(zo().mark((function e(){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){sS("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(sS("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new yS)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(sS("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(dS("string"==typeof n.accessToken),new gS(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return dS(null===e||"string"==typeof e),new iS(e)}}]),e}(),_S=function(){function e(t,n,r,i){d(this,e),this.h=t,this.l=n,this.m=r,this.g=i,this.type="FirstParty",this.user=iS.FIRST_PARTY,this.p=new Map}return y(e,[{key:"I",value:function(){return this.g?this.g():(dS(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}},{key:"headers",get:function(){this.p.set("X-Goog-AuthUser",this.l);var e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}]),e}(),xS=function(){function e(t,n,r,i){d(this,e),this.h=t,this.l=n,this.m=r,this.g=i}return y(e,[{key:"getToken",value:function(){return Promise.resolve(new _S(this.h,this.l,this.m,this.g))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(iS.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),IS=y((function e(t){d(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),TS=function(){function e(t){d(this,e),this.T=t,this.forceRefresh=!1,this.appCheck=null,this.A=null}return y(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&sS("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.A;return n.A=e.token,sS("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){sS("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.T.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.T.getImmediate({optional:!0});e?i(e):sS("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(dS("string"==typeof t.token),e.A=t.token,new IS(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function ES(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var SS=function(){function e(){d(this,e)}return y(e,null,[{key:"R",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=ES(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function CS(e,t){return e<t?-1:e>t?1:0}function NS(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function AS(e){return e+"\0"}var RS=function(){function e(t,n){if(d(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new mS(vS.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new mS(vS.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new mS(vS.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new mS(vS.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return y(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?CS(this.nanoseconds,e.nanoseconds):CS(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),PS=function(){function e(t){d(this,e),this.timestamp=t}return y(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new RS(0,0))}},{key:"max",value:function(){return new e(new RS(253402300799,999999999))}}]),e}(),DS=function(){function e(t,n,r){d(this,e),void 0===n?n=0:n>t.length&&hS(),void 0===r?r=t.length-n:r>t.length-n&&hS(),this.segments=t,this.offset=n,this.len=r}return y(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),OS=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new mS(vS.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,h(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(DS),LS=/^[_a-zA-Z][_a-zA-Z0-9]*$/,MS=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return LS.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new mS(vS.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new mS(vS.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new mS(vS.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new mS(vS.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(DS),FS=function(){function e(t){d(this,e),this.path=t}return y(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===OS.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(OS.fromString(t))}},{key:"fromName",value:function(t){return new e(OS.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(OS.emptyPath())}},{key:"comparator",value:function(e,t){return OS.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new OS(t.slice()))}}]),e}(),US=y((function e(t,n,r,i){d(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function jS(e){return e.fields.find((function(e){return 2===e.kind}))}function VS(e){return e.fields.filter((function(e){return 2!==e.kind}))}US.UNKNOWN_ID=-1;var qS=y((function e(t,n){d(this,e),this.fieldPath=t,this.kind=n}));var BS=function(){function e(t,n){d(this,e),this.sequenceNumber=t,this.offset=n}return y(e,null,[{key:"empty",value:function(){return new e(0,KS.min())}}]),e}();function zS(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=PS.fromTimestamp(1e9===r?new RS(n+1,0):new RS(n,r));return new KS(i,FS.empty(),t)}function WS(e){return new KS(e.readTime,e.key,-1)}var KS=function(){function e(t,n,r){d(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return y(e,null,[{key:"min",value:function(){return new e(PS.min(),FS.empty(),-1)}},{key:"max",value:function(){return new e(PS.max(),FS.empty(),-1)}}]),e}();function HS(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=FS.comparator(e.documentKey,t.documentKey))?n:CS(e.largestBatchId,t.largestBatchId)}var GS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",QS=function(){function e(){d(this,e),this.onCommittedListeners=[]}return y(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function $S(e){return YS.apply(this,arguments)}function YS(){return YS=Ko(zo().mark((function e(t){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===vS.FAILED_PRECONDITION&&t.message===GS){e.next=2;break}throw t;case 2:sS("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),YS.apply(this,arguments)}var XS=function(){function e(t){var n=this;d(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return y(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&hS(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=C(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),JS=function(){function e(t,n){var r=this;d(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.P=new yS,this.transaction.oncomplete=function(){r.P.resolve()},this.transaction.onabort=function(){n.error?r.P.reject(new tC(t,n.error)):r.P.resolve()},this.transaction.onerror=function(e){var n=oC(e.target.error);r.P.reject(new tC(t,n))}}return y(e,[{key:"v",get:function(){return this.P.promise}},{key:"abort",value:function(e){e&&this.P.reject(e),this.aborted||(sS("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"V",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new rC(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new tC(n,t)}}}]),e}(),ZS=function(){function e(t,n,r){d(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D(iu())&&cS("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return y(e,[{key:"F",value:function(){var e=Ko(zo().mark((function e(t){var n=this;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return sS("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new tC(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new mS(vS.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new mS(vS.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new tC(t,n))},i.onupgradeneeded=function(e){sS("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.$(t,i.transaction,e.oldVersion,n.version).next((function(){sS("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.B&&(this.db.onversionchange=function(e){return n.B(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"L",value:function(e){this.B=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=Ko(zo().mark((function e(t,n,r,i){var a,o,u,s,c=this;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,u=zo().mark((function e(){var n,u,s,l;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.F(t);case 4:return c.db=e.sent,n=JS.open(c.db,t,a?"readonly":"readwrite",r),u=i(n).next((function(e){return n.V(),e})).catch((function(e){return n.abort(e),XS.reject(e)})).toPromise(),u.catch((function(){})),e.next=9,n.v;case 9:return e.t0=u,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),s=e.t1,l="FirebaseError"!==s.name&&o<3,sS("SimpleDb","Transaction failed with error:",s.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(s)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(u(),"t0",4);case 4:if("object"!==typeof(s=e.t0)){e.next=7;break}return e.abrupt("return",s.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return sS("SimpleDb","Removing database:",e),iC(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"C",value:function(){if(!fu())return!1;if(e.N())return!0;var t=iu(),n=e.D(t),r=0<n&&n<10,i=e.k(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"N",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/Online-Booking-System",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.O)}},{key:"M",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"k",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),eC=function(){function e(t){d(this,e),this.q=t,this.U=!1,this.K=null}return y(e,[{key:"isDone",get:function(){return this.U}},{key:"G",get:function(){return this.K}},{key:"cursor",set:function(e){this.q=e}},{key:"done",value:function(){this.U=!0}},{key:"j",value:function(e){this.K=e}},{key:"delete",value:function(){return iC(this.q.delete())}}]),e}(),tC=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this,vS.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return y(n)}(mS);function nC(e){return"IndexedDbTransactionError"===e.name}var rC=function(){function e(t){d(this,e),this.store=t}return y(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(sS("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(sS("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),iC(n)}},{key:"add",value:function(e){return sS("SimpleDb","ADD",this.store.name,e,e),iC(this.store.add(e))}},{key:"get",value:function(e){var t=this;return iC(this.store.get(e)).next((function(n){return void 0===n&&(n=null),sS("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return sS("SimpleDb","DELETE",this.store.name,e),iC(this.store.delete(e))}},{key:"count",value:function(){return sS("SimpleDb","COUNT",this.store.name),iC(this.store.count())}},{key:"W",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.H(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new XS((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new XS((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"Y",value:function(e,t){sS("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.X=!1;var r=this.cursor(n);return this.H(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.H(r,t)}},{key:"tt",value:function(e){var t=this.cursor({});return new XS((function(n,r){t.onerror=function(e){var t=oC(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"H",value:function(e,t){var n=[];return new XS((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new eC(i),o=t(i.primaryKey,i.value,a);if(o instanceof XS){var u=o.catch((function(e){return a.done(),XS.reject(e)}));n.push(u)}a.isDone?r():null===a.G?i.continue():i.continue(a.G)}else r()}})).next((function(){return XS.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function iC(e){return new XS((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=oC(e.target.error);n(t)}}))}var aC=!1;function oC(e){var t=ZS.D(iu());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new mS("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return aC||(aC=!0,setTimeout((function(){throw r}),0)),r}}return e}var uC=function(){function e(t,n){d(this,e),this.asyncQueue=t,this.et=n,this.task=null}return y(e,[{key:"start",value:function(){this.nt(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"nt",value:function(e){var t=this;sS("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,Ko(zo().mark((function e(){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=sS,e.t1="Documents written: ",e.next=6,t.et.st();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!nC(e.t4)){e.next=17;break}sS("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,$S(e.t4);case 19:return e.next=21,t.nt(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),sC=function(){function e(t,n){d(this,e),this.localStore=t,this.persistence=n}return y(e,[{key:"st",value:function(){var e=Ko(zo().mark((function e(){var t,n=this,r=arguments;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.it(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"it",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return XS.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return sS("IndexBackiller","Processing collection: ".concat(t)),n.rt(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"rt",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.ot(i,n)})).next((function(n){return sS("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"ot",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=WS(t);HS(r,n)>0&&(n=r)})),new KS(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),cC=function(){function e(t,n){var r=this;d(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ut(e)},this.ct=function(e){return n.writeSequenceNumber(e)})}return y(e,[{key:"ut",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ct&&this.ct(e),e}}]),e}();cC.at=-1;var lC=y((function e(t,n,r,i,a,o,u,s){d(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),fC=function(){function e(t,n){d(this,e),this.projectId=t,this.database=n||"(default)"}return y(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}();function hC(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function dC(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function pC(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function vC(e){return null==e}function mC(e){return 0===e&&1/e==-1/0}function yC(e){return"number"==typeof e&&Number.isInteger(e)&&!mC(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var gC=function(e){function t(e){d(this,t),this.binaryString=e}return y(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return CS(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){return new t(atob(e))}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();gC.EMPTY_BYTE_STRING=new gC("");var kC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bC(e){if(dS(!!e),"string"==typeof e){var t=0,n=kC.exec(e);if(dS(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:wC(e.seconds),nanos:wC(e.nanos)}}function wC(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function _C(e){return"string"==typeof e?gC.fromBase64String(e):gC.fromUint8Array(e)}function xC(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function IC(e){var t=e.mapValue.fields.__previous_value__;return xC(t)?IC(t):t}function TC(e){var t=bC(e.mapValue.fields.__local_write_time__.timestampValue);return new RS(t.seconds,t.nanos)}var EC={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},SC={nullValue:"NULL_VALUE"};function CC(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?xC(e)?4:BC(e)?9007199254740991:10:hS()}function NC(e,t){if(e===t)return!0;var n=CC(e);if(n!==CC(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return TC(e).isEqual(TC(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=bC(e.timestampValue),r=bC(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return _C(e.bytesValue).isEqual(_C(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return wC(e.geoPointValue.latitude)===wC(t.geoPointValue.latitude)&&wC(e.geoPointValue.longitude)===wC(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return wC(e.integerValue)===wC(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=wC(e.doubleValue),r=wC(t.doubleValue);return n===r?mC(n)===mC(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return NS(e.arrayValue.values||[],t.arrayValue.values||[],NC);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(hC(n)!==hC(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!NC(n[i],r[i])))return!1;return!0}(e,t);default:return hS()}}function AC(e,t){return void 0!==(e.values||[]).find((function(e){return NC(e,t)}))}function RC(e,t){if(e===t)return 0;var n=CC(e),r=CC(t);if(n!==r)return CS(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return CS(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=wC(e.integerValue||e.doubleValue),r=wC(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return PC(e.timestampValue,t.timestampValue);case 4:return PC(TC(e),TC(t));case 5:return CS(e.stringValue,t.stringValue);case 6:return function(e,t){var n=_C(e),r=_C(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=CS(n[i],r[i]);if(0!==a)return a}return CS(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=CS(wC(e.latitude),wC(t.latitude));return 0!==n?n:CS(wC(e.longitude),wC(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=RC(n[i],r[i]);if(a)return a}return CS(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===EC.mapValue&&t===EC.mapValue)return 0;if(e===EC.mapValue)return 1;if(t===EC.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=CS(r[o],a[o]);if(0!==u)return u;var s=RC(n[r[o]],i[a[o]]);if(0!==s)return s}return CS(r.length,a.length)}(e.mapValue,t.mapValue);default:throw hS()}}function PC(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return CS(e,t);var n=bC(e),r=bC(t),i=CS(n.seconds,r.seconds);return 0!==i?i:CS(n.nanos,r.nanos)}function DC(e){return OC(e)}function OC(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=bC(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?_C(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,FS.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=C(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=OC(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=C(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(OC(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):hS();var t,n}function LC(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function MC(e){return!!e&&"integerValue"in e}function FC(e){return!!e&&"arrayValue"in e}function UC(e){return!!e&&"nullValue"in e}function jC(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function VC(e){return!!e&&"mapValue"in e}function qC(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return dC(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=qC(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=qC(e.arrayValue.values[r]);return n}return Object.assign({},e)}function BC(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function zC(e){return"nullValue"in e?SC:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?LC(fC.empty(),FS.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:hS()}function WC(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?LC(fC.empty(),FS.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?EC:hS()}function KC(e,t){var n=RC(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function HC(e,t){var n=RC(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var GC=y((function e(t,n){d(this,e),this.position=t,this.inclusive=n}));function QC(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?FS.comparator(FS.fromName(o.referenceValue),n.key):RC(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function $C(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!NC(e.position[n],t.position[n]))return!1;return!0}var YC=y((function e(){d(this,e)})),XC=function(e){k(n,e);var t=I(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return y(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(RC(t,this.value)):null!==t&&CC(this.value)===CC(t)&&this.matchesComparison(RC(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return hS()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new uN(e,t,r):"array-contains"===t?new fN(e,r):"in"===t?new hN(e,r):"not-in"===t?new dN(e,r):"array-contains-any"===t?new pN(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new sN(e,n):new cN(e,n)}}]),n}(YC),JC=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).filters=e,i.op=r,i.ht=null,i}return y(n,[{key:"matches",value:function(e){return ZC(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ht||(this.ht=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ht}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.lt((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"lt",value:function(e){var t,n=C(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(YC);function ZC(e){return"and"===e.op}function eN(e){return"or"===e.op}function tN(e){return nN(e)&&ZC(e)}function nN(e){var t,n=C(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof JC)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function rN(e){if(e instanceof XC)return e.field.canonicalString()+e.op.toString()+DC(e.value);var t=e.filters.map((function(e){return rN(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function iN(e,t){return e instanceof XC?function(e,t){return t instanceof XC&&e.op===t.op&&e.field.isEqual(t.field)&&NC(e.value,t.value)}(e,t):e instanceof JC?function(e,t){return t instanceof JC&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&iN(n,t.filters[r])}),!0)}(e,t):void hS()}function aN(e,t){var n=e.filters.concat(t);return JC.create(n,e.op)}function oN(e){return e instanceof XC?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(DC(e.value))}(e):e instanceof JC?function(e){return e.op.toString()+" {"+e.getFilters().map(oN).join(" ,")+"}"}(e):"Filter"}var uN=function(e){k(n,e);var t=I(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r,i)).key=FS.fromName(i.referenceValue),a}return y(n,[{key:"matches",value:function(e){var t=FS.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(XC),sN=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"in",r)).keys=lN("in",r),i}return y(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(XC),cN=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"not-in",r)).keys=lN("not-in",r),i}return y(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(XC);function lN(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return FS.fromName(e.referenceValue)}))}var fN=function(e){k(n,e);var t=I(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains",r)}return y(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return FC(t)&&AC(t.arrayValue,this.value)}}]),n}(XC),hN=function(e){k(n,e);var t=I(n);function n(e,r){return d(this,n),t.call(this,e,"in",r)}return y(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&AC(this.value.arrayValue,t)}}]),n}(XC),dN=function(e){k(n,e);var t=I(n);function n(e,r){return d(this,n),t.call(this,e,"not-in",r)}return y(n,[{key:"matches",value:function(e){if(AC(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!AC(this.value.arrayValue,t)}}]),n}(XC),pN=function(e){k(n,e);var t=I(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains-any",r)}return y(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!FC(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return AC(t.value.arrayValue,e)}))}}]),n}(XC),vN=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";d(this,e),this.field=t,this.dir=n}));function mN(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var yN=function(){function e(t,n){d(this,e),this.comparator=t,this.root=n||kN.EMPTY}return y(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,kN.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,kN.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new gN(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new gN(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new gN(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new gN(this.root,e,this.comparator,!0)}}]),e}(),gN=function(){function e(t,n,r,i){d(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return y(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),kN=function(){function e(t,n,r,i,a){d(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return y(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw hS();if(this.right.isRed())throw hS();var e=this.left.check();if(e!==this.right.check())throw hS();return e+(this.isRed()?0:1)}}]),e}();kN.EMPTY=null,kN.RED=!0,kN.BLACK=!1,kN.EMPTY=new(function(){function e(){d(this,e),this.size=0}return y(e,[{key:"key",get:function(){throw hS()}},{key:"value",get:function(){throw hS()}},{key:"color",get:function(){throw hS()}},{key:"left",get:function(){throw hS()}},{key:"right",get:function(){throw hS()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new kN(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var bN=function(){function e(t){d(this,e),this.comparator=t,this.data=new yN(this.comparator)}return y(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new wN(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new wN(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),wN=function(){function e(t){d(this,e),this.iter=t}return y(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function _N(e){return e.hasNext()?e.getNext():void 0}var xN=function(){function e(t){d(this,e),this.fields=t,t.sort(MS.comparator)}return y(e,[{key:"unionWith",value:function(t){var n,r=new bN(MS.comparator),i=C(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=C(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=C(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return NS(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),IN=function(){function e(t){d(this,e),this.value=t}return y(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!VC(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=qC(t)}},{key:"setAll",value:function(e){var t=this,n=MS.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=qC(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());VC(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return NC(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];VC(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){dC(t,(function(t,n){return e[t]=n}));var r,i=C(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(qC(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function TN(e){var t=[];return dC(e.fields,(function(e,n){var r=new MS([e]);if(VC(n)){var i=TN(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=C(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new xN(t)}var EN=function(){function e(t,n,r,i,a,o,u){d(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return y(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(PS.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=IN.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=IN.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=PS.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,PS.min(),PS.min(),PS.min(),IN.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,PS.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,PS.min(),PS.min(),IN.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,PS.min(),PS.min(),IN.empty(),2)}}]),e}(),SN=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;d(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ft=null}));function CN(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new SN(e,t,n,r,i,a,o)}function NN(e){var t=pS(e);if(null===t.ft){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return rN(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),vC(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return DC(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return DC(e)})).join(",")),t.ft=n}return t.ft}function AN(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!mN(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!iN(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!$C(e.startAt,t.startAt)&&$C(e.endAt,t.endAt)}function RN(e){return FS.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function PN(e,t){return e.filters.filter((function(e){return e instanceof XC&&e.field.isEqual(t)}))}function DN(e,t,n){var r,i=SC,a=!0,o=C(PN(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=SC,c=!0;switch(u.op){case"<":case"<=":s=zC(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=SC}KC({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];KC({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function ON(e,t,n){var r,i=EC,a=!0,o=C(PN(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=EC,c=!0;switch(u.op){case">=":case">":s=WC(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=EC}HC({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];HC({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var LN=y((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;d(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.dt=null,this._t=null,this.startAt,this.endAt}));function MN(e,t,n,r,i,a,o,u){return new LN(e,t,n,r,i,a,o,u)}function FN(e){return new LN(e)}function UN(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function jN(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function VN(e){var t,n=C(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function qN(e){return null!==e.collectionGroup}function BN(e){var t=pS(e);if(null===t.dt){t.dt=[];var n=VN(t),r=jN(t);if(null!==n&&null===r)n.isKeyField()||t.dt.push(new vN(n)),t.dt.push(new vN(MS.keyField(),"asc"));else{var i,a=!1,o=C(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.dt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new vN(MS.keyField(),s))}}}return t.dt}function zN(e){var t=pS(e);if(!t._t)if("F"===t.limitType)t._t=CN(t.path,t.collectionGroup,BN(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=C(BN(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new vN(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new GC(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new GC(t.startAt.position,t.startAt.inclusive):null;t._t=CN(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t._t}function WN(e,t){t.getFirstInequalityField(),VN(e);var n=e.filters.concat([t]);return new LN(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function KN(e,t,n){return new LN(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function HN(e,t){return AN(zN(e),zN(t))&&e.limitType===t.limitType}function GN(e){return"".concat(NN(zN(e)),"|lt:").concat(e.limitType)}function QN(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return oN(e)})).join(", "),"]")),vC(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return DC(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return DC(e)})).join(",")),"Target(".concat(t,")")}(zN(e)),"; limitType=").concat(e.limitType,")")}function $N(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):FS.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=C(BN(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=C(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=QC(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,BN(e),t))&&!(e.endAt&&!function(e,t,n){var r=QC(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,BN(e),t))}(e,t)}function YN(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function XN(e){return function(t,n){var r,i=!1,a=C(BN(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=JN(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function JN(e,t,n){var r=e.field.isKeyField()?FS.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?RC(r,i):hS()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return hS()}}function ZN(e,t){if(e.wt){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mC(t)?"-0":t}}function eA(e){return{integerValue:""+e}}function tA(e,t){return yC(t)?eA(t):ZN(e,t)}var nA=y((function e(){d(this,e),this._=void 0}));function rA(e,t,n){return e instanceof oA?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof uA?sA(e,t):e instanceof cA?lA(e,t):function(e,t){var n=aA(e,t),r=hA(n)+hA(e.gt);return MC(n)&&MC(e.gt)?eA(r):ZN(e.yt,r)}(e,t)}function iA(e,t,n){return e instanceof uA?sA(e,t):e instanceof cA?lA(e,t):n}function aA(e,t){return e instanceof fA?MC(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var oA=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n)}(nA),uA=function(e){k(n,e);var t=I(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return y(n)}(nA);function sA(e,t){var n,r=dA(t),i=C(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return NC(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var cA=function(e){k(n,e);var t=I(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return y(n)}(nA);function lA(e,t){var n,r=dA(t),i=C(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!NC(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var fA=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).yt=e,i.gt=r,i}return y(n)}(nA);function hA(e){return wC(e.integerValue||e.doubleValue)}function dA(e){return FC(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var pA=y((function e(t,n){d(this,e),this.field=t,this.transform=n}));var vA=y((function e(t,n){d(this,e),this.version=t,this.transformResults=n})),mA=function(){function e(t,n){d(this,e),this.updateTime=t,this.exists=n}return y(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function yA(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var gA=y((function e(){d(this,e)}));function kA(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new RA(e.key,mA.none()):new IA(e.key,e.data,mA.none());var n,r=e.data,i=IN.empty(),a=new bN(MS.comparator),o=C(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new TA(e.key,i,new xN(a.toArray()),mA.none())}function bA(e,t,n){e instanceof IA?function(e,t,n){var r=e.value.clone(),i=SA(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof TA?function(e,t,n){if(yA(e.precondition,t)){var r=SA(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(EA(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function wA(e,t,n,r){return e instanceof IA?function(e,t,n,r){if(!yA(e.precondition,t))return n;var i=e.value.clone(),a=CA(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof TA?function(e,t,n,r){if(!yA(e.precondition,t))return n;var i=CA(e.fieldTransforms,r,t),a=t.data;return a.setAll(EA(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return yA(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function _A(e,t){var n,r=null,i=C(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=aA(a.transform,o||null);null!=u&&(null===r&&(r=IN.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function xA(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&NS(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof uA&&t instanceof uA||e instanceof cA&&t instanceof cA?NS(e.elements,t.elements,NC):e instanceof fA&&t instanceof fA?NC(e.gt,t.gt):e instanceof oA&&t instanceof oA}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var IA=function(e){k(n,e);var t=I(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return d(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return y(n,[{key:"getFieldMask",value:function(){return null}}]),n}(gA),TA=function(e){k(n,e);var t=I(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return d(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return y(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(gA);function EA(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function SA(e,t,n){var r=new Map;dS(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,iA(o,u,n[i]))}return r}function CA(e,t,n){var r,i=new Map,a=C(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,rA(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var NA,AA,RA=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return y(n,[{key:"getFieldMask",value:function(){return null}}]),n}(gA),PA=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return y(n,[{key:"getFieldMask",value:function(){return null}}]),n}(gA),DA=y((function e(t){d(this,e),this.count=t}));function OA(e){switch(e){default:return hS();case vS.CANCELLED:case vS.UNKNOWN:case vS.DEADLINE_EXCEEDED:case vS.RESOURCE_EXHAUSTED:case vS.INTERNAL:case vS.UNAVAILABLE:case vS.UNAUTHENTICATED:return!1;case vS.INVALID_ARGUMENT:case vS.NOT_FOUND:case vS.ALREADY_EXISTS:case vS.PERMISSION_DENIED:case vS.FAILED_PRECONDITION:case vS.ABORTED:case vS.OUT_OF_RANGE:case vS.UNIMPLEMENTED:case vS.DATA_LOSS:return!0}}function LA(e){if(void 0===e)return cS("GRPC error has no .code"),vS.UNKNOWN;switch(e){case NA.OK:return vS.OK;case NA.CANCELLED:return vS.CANCELLED;case NA.UNKNOWN:return vS.UNKNOWN;case NA.DEADLINE_EXCEEDED:return vS.DEADLINE_EXCEEDED;case NA.RESOURCE_EXHAUSTED:return vS.RESOURCE_EXHAUSTED;case NA.INTERNAL:return vS.INTERNAL;case NA.UNAVAILABLE:return vS.UNAVAILABLE;case NA.UNAUTHENTICATED:return vS.UNAUTHENTICATED;case NA.INVALID_ARGUMENT:return vS.INVALID_ARGUMENT;case NA.NOT_FOUND:return vS.NOT_FOUND;case NA.ALREADY_EXISTS:return vS.ALREADY_EXISTS;case NA.PERMISSION_DENIED:return vS.PERMISSION_DENIED;case NA.FAILED_PRECONDITION:return vS.FAILED_PRECONDITION;case NA.ABORTED:return vS.ABORTED;case NA.OUT_OF_RANGE:return vS.OUT_OF_RANGE;case NA.UNIMPLEMENTED:return vS.UNIMPLEMENTED;case NA.DATA_LOSS:return vS.DATA_LOSS;default:return hS()}}(AA=NA||(NA={}))[AA.OK=0]="OK",AA[AA.CANCELLED=1]="CANCELLED",AA[AA.UNKNOWN=2]="UNKNOWN",AA[AA.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",AA[AA.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",AA[AA.NOT_FOUND=5]="NOT_FOUND",AA[AA.ALREADY_EXISTS=6]="ALREADY_EXISTS",AA[AA.PERMISSION_DENIED=7]="PERMISSION_DENIED",AA[AA.UNAUTHENTICATED=16]="UNAUTHENTICATED",AA[AA.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",AA[AA.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",AA[AA.ABORTED=10]="ABORTED",AA[AA.OUT_OF_RANGE=11]="OUT_OF_RANGE",AA[AA.UNIMPLEMENTED=12]="UNIMPLEMENTED",AA[AA.INTERNAL=13]="INTERNAL",AA[AA.UNAVAILABLE=14]="UNAVAILABLE",AA[AA.DATA_LOSS=15]="DATA_LOSS";var MA=function(){function e(t,n){d(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return y(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=C(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){dC(this.inner,(function(t,n){var r,i=C(n);try{for(i.s();!(r=i.n()).done;){var a=l(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return pC(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),FA=new yN(FS.comparator);function UA(){return FA}var jA=new yN(FS.comparator);function VA(){for(var e=jA,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function qA(e){var t=jA;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function BA(){return WA()}function zA(){return WA()}function WA(){return new MA((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var KA=new yN(FS.comparator),HA=new bN(FS.comparator);function GA(){for(var e=HA,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var QA=new bN(CS);function $A(){return QA}var YA=function(){function e(t,n,r,i,a){d(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return y(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,XA.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(PS.min(),i,$A(),UA(),GA())}}]),e}(),XA=function(){function e(t,n,r,i,a){d(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return y(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,GA(),GA(),GA())}}]),e}(),JA=y((function e(t,n,r,i){d(this,e),this.It=t,this.removedTargetIds=n,this.key=r,this.Tt=i})),ZA=y((function e(t,n){d(this,e),this.targetId=t,this.Et=n})),eR=y((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gC.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;d(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),tR=function(){function e(){d(this,e),this.At=0,this.Rt=iR(),this.bt=gC.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}return y(e,[{key:"current",get:function(){return this.Pt}},{key:"resumeToken",get:function(){return this.bt}},{key:"Vt",get:function(){return 0!==this.At}},{key:"St",get:function(){return this.vt}},{key:"Dt",value:function(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}},{key:"Ct",value:function(){var e=GA(),t=GA(),n=GA();return this.Rt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:hS()}})),new XA(this.bt,this.Pt,e,t,n)}},{key:"xt",value:function(){this.vt=!1,this.Rt=iR()}},{key:"Nt",value:function(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}},{key:"kt",value:function(e){this.vt=!0,this.Rt=this.Rt.remove(e)}},{key:"Ot",value:function(){this.At+=1}},{key:"Mt",value:function(){this.At-=1}},{key:"Ft",value:function(){this.vt=!0,this.Pt=!0}}]),e}(),nR=function(){function e(t){d(this,e),this.$t=t,this.Bt=new Map,this.Lt=UA(),this.qt=rR(),this.Ut=new bN(CS)}return y(e,[{key:"Kt",value:function(e){var t,n=C(e.It);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Tt&&e.Tt.isFoundDocument()?this.Gt(r,e.Tt):this.Qt(r,e.key,e.Tt)}}catch(u){n.e(u)}finally{n.f()}var i,a=C(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Qt(o,e.key,e.Tt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"jt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Wt(n);switch(e.state){case 0:t.zt(n)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||t.removeTarget(n);break;case 3:t.zt(n)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:t.zt(n)&&(t.Ht(n),r.Dt(e.resumeToken));break;default:hS()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((function(e,r){n.zt(r)&&t(r)}))}},{key:"Jt",value:function(e){var t=e.targetId,n=e.Et.count,r=this.Yt(t);if(r){var i=r.target;if(RN(i))if(0===n){var a=new FS(i.path);this.Qt(t,a,EN.newNoDocument(a,PS.min()))}else dS(1===n);else this.Xt(t)!==n&&(this.Ht(t),this.Ut=this.Ut.add(t))}}},{key:"Zt",value:function(e){var t=this,n=new Map;this.Bt.forEach((function(r,i){var a=t.Yt(i);if(a){if(r.current&&RN(a.target)){var o=new FS(a.target.path);null!==t.Lt.get(o)||t.te(i,o)||t.Qt(i,o,EN.newNoDocument(o,e))}r.St&&(n.set(i,r.Ct()),r.xt())}}));var r=GA();this.qt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Yt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Lt.forEach((function(t,n){return n.setReadTime(e)}));var i=new YA(e,n,this.Ut,this.Lt,r);return this.Lt=UA(),this.qt=rR(),this.Ut=new bN(CS),i}},{key:"Gt",value:function(e,t){if(this.zt(e)){var n=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,n),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}}},{key:"Qt",value:function(e,t,n){if(this.zt(e)){var r=this.Wt(e);this.te(e,t)?r.Nt(t,1):r.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),n&&(this.Lt=this.Lt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Bt.delete(e)}},{key:"Xt",value:function(e){var t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ot",value:function(e){this.Wt(e).Ot()}},{key:"Wt",value:function(e){var t=this.Bt.get(e);return t||(t=new tR,this.Bt.set(e,t)),t}},{key:"ee",value:function(e){var t=this.qt.get(e);return t||(t=new bN(CS),this.qt=this.qt.insert(e,t)),t}},{key:"zt",value:function(e){var t=null!==this.Yt(e);return t||sS("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Yt",value:function(e){var t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}},{key:"Ht",value:function(e){var t=this;this.Bt.set(e,new tR),this.$t.getRemoteKeysForTarget(e).forEach((function(n){t.Qt(e,n,null)}))}},{key:"te",value:function(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}]),e}();function rR(){return new yN(FS.comparator)}function iR(){return new yN(FS.comparator)}var aR={asc:"ASCENDING",desc:"DESCENDING"},oR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uR={and:"AND",or:"OR"},sR=y((function e(t,n){d(this,e),this.databaseId=t,this.wt=n}));function cR(e,t){return e.wt?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function lR(e,t){return e.wt?t.toBase64():t.toUint8Array()}function fR(e,t){return cR(e,t.toTimestamp())}function hR(e){return dS(!!e),PS.fromTimestamp(function(e){var t=bC(e);return new RS(t.seconds,t.nanos)}(e))}function dR(e,t){return function(e){return new OS(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function pR(e){var t=OS.fromString(e);return dS(FR(t)),t}function vR(e,t){return dR(e.databaseId,t.path)}function mR(e,t){var n=pR(t);if(n.get(1)!==e.databaseId.projectId)throw new mS(vS.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new mS(vS.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new FS(bR(n))}function yR(e,t){return dR(e.databaseId,t)}function gR(e){var t=pR(e);return 4===t.length?OS.emptyPath():bR(t)}function kR(e){return new OS(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function bR(e){return dS(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function wR(e,t,n){return{name:vR(e,t),fields:n.value.mapValue.fields}}function _R(e,t,n){var r=mR(e,t.name),i=hR(t.updateTime),a=t.createTime?hR(t.createTime):PS.min(),o=new IN({mapValue:{fields:t.fields}}),u=EN.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function xR(e,t){return"found"in t?function(e,t){dS(!!t.found),t.found.name,t.found.updateTime;var n=mR(e,t.found.name),r=hR(t.found.updateTime),i=t.found.createTime?hR(t.found.createTime):PS.min(),a=new IN({mapValue:{fields:t.found.fields}});return EN.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){dS(!!t.missing),dS(!!t.readTime);var n=mR(e,t.missing),r=hR(t.readTime);return EN.newNoDocument(n,r)}(e,t):hS()}function IR(e,t){var n;if(t instanceof IA)n={update:wR(e,t.key,t.value)};else if(t instanceof RA)n={delete:vR(e,t.key)};else if(t instanceof TA)n={update:wR(e,t.key,t.data),updateMask:MR(t.fieldMask)};else{if(!(t instanceof PA))return hS();n={verify:vR(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof oA)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof uA)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof cA)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof fA)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw hS()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:fR(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:hS()}(e,t.precondition)),n}function TR(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?mA.updateTime(hR(e.updateTime)):void 0!==e.exists?mA.exists(e.exists):mA.none()}(t.currentDocument):mA.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)dS("REQUEST_TIME"===t.setToServerValue),n=new oA;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new uA(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new cA(i)}else"increment"in t?n=new fA(e,t.increment):hS();var a=MS.fromServerFormat(t.fieldPath);return new pA(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=mR(e,t.update.name),a=new IN({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new xN(t.map((function(e){return MS.fromServerFormat(e)})))}(t.updateMask);return new TA(i,a,o,n,r)}return new IA(i,a,n,r)}if(t.delete){var u=mR(e,t.delete);return new RA(u,n)}if(t.verify){var s=mR(e,t.verify);return new PA(s,n)}return hS()}function ER(e,t){return{documents:[yR(e,t.path)]}}function SR(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=yR(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=yR(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return LR(JC.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:DR(e.field),direction:AR(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.wt||vC(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function CR(e){var t=gR(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){dS(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=NR(e);return t instanceof JC&&tN(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new vN(OR(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return vC(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new GC(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new GC(n,t)}(n.endAt)),MN(t,i,u,o,s,"F",c,l)}function NR(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=OR(e.unaryFilter.field);return XC.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=OR(e.unaryFilter.field);return XC.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=OR(e.unaryFilter.field);return XC.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=OR(e.unaryFilter.field);return XC.create(i,"!=",{nullValue:"NULL_VALUE"});default:return hS()}}(e):void 0!==e.fieldFilter?function(e){return XC.create(OR(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return hS()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return JC.create(e.compositeFilter.filters.map((function(e){return NR(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return hS()}}(e.compositeFilter.op))}(e):hS()}function AR(e){return aR[e]}function RR(e){return oR[e]}function PR(e){return uR[e]}function DR(e){return{fieldPath:e.canonicalString()}}function OR(e){return MS.fromServerFormat(e.fieldPath)}function LR(e){return e instanceof XC?function(e){if("=="===e.op){if(jC(e.value))return{unaryFilter:{field:DR(e.field),op:"IS_NAN"}};if(UC(e.value))return{unaryFilter:{field:DR(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(jC(e.value))return{unaryFilter:{field:DR(e.field),op:"IS_NOT_NAN"}};if(UC(e.value))return{unaryFilter:{field:DR(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:DR(e.field),op:RR(e.op),value:e.value}}}(e):e instanceof JC?function(e){var t=e.getFilters().map((function(e){return LR(e)}));return 1===t.length?t[0]:{compositeFilter:{op:PR(e.op),filters:t}}}(e):hS()}function MR(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function FR(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function UR(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=VR(t)),t=jR(e.get(n),t);return VR(t)}function jR(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function VR(e){return e+"\x01\x01"}function qR(e){var t=e.length;if(dS(t>=2),2===t)return dS("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),OS.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&hS(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:hS()}a=o+2}return new OS(r)}var BR=["userId","batchId"];function zR(e,t){return[e,UR(t)]}function WR(e,t,n){return[e,UR(t),n]}var KR={},HR=["prefixPath","collectionGroup","readTime","documentId"],GR=["prefixPath","collectionGroup","documentId"],QR=["collectionGroup","readTime","prefixPath","documentId"],$R=["canonicalId","targetId"],YR=["targetId","path"],XR=["path","targetId"],JR=["collectionId","parent"],ZR=["indexId","uid"],eP=["uid","sequenceNumber"],tP=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],nP=["indexId","uid","orderedDocumentKey"],rP=["userId","collectionPath","documentId"],iP=["userId","collectionPath","largestBatchId"],aP=["userId","collectionGroup","largestBatchId"],oP=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),uP=[].concat(h(oP),["documentOverlays"]),sP=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],cP=sP,lP=[].concat(cP,["indexConfiguration","indexState","indexEntries"]),fP=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).se=e,i.currentSequenceNumber=r,i}return y(n)}(QS);function hP(e,t){var n=pS(e);return ZS.M(n.se,t)}var dP=function(){function e(t,n,r,i){d(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return y(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&bA(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=C(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=wA(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=C(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=wA(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=zA();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=kA(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(PS.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),GA())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&NS(this.mutations,e.mutations,(function(e,t){return xA(e,t)}))&&NS(this.baseMutations,e.baseMutations,(function(e,t){return xA(e,t)}))}}]),e}(),pP=function(){function e(t,n,r,i){d(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return y(e,null,[{key:"from",value:function(t,n,r){dS(t.mutations.length===r.length);for(var i=KA,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),vP=function(){function e(t,n){d(this,e),this.largestBatchId=t,this.mutation=n}return y(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),mP=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:PS.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:PS.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:gC.EMPTY_BYTE_STRING;d(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return y(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),yP=y((function e(t){d(this,e),this.ie=t}));function gP(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:kP(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:vR(e,t.key),fields:t.data.value.mapValue.fields,updateTime:cR(e,t.version.toTimestamp()),createTime:cR(e,t.createTime.toTimestamp())}}(e.ie,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:bP(t.version)};else{if(!t.isUnknownDocument())return hS();r.unknownDocument={path:n.path.toArray(),version:bP(t.version)}}return r}function kP(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function bP(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function wP(e){var t=new RS(e.seconds,e.nanoseconds);return PS.fromTimestamp(t)}function _P(e,t){for(var n=(t.baseMutations||[]).map((function(t){return TR(e.ie,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return TR(e.ie,t)})),u=RS.fromMillis(t.localWriteTimeMs);return new dP(t.batchId,u,n,o)}function xP(e){var t,n,r=wP(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?wP(e.lastLimboFreeSnapshotVersion):PS.min();return void 0!==e.query.documents?(dS(1===(n=e.query).documents.length),t=zN(FN(gR(n.documents[0])))):t=function(e){return zN(CR(e))}(e.query),new mP(t,e.targetId,0,e.lastListenSequenceNumber,r,i,gC.fromBase64String(e.resumeToken))}function IP(e,t){var n,r=bP(t.snapshotVersion),i=bP(t.lastLimboFreeSnapshotVersion);n=RN(t.target)?ER(e.ie,t.target):SR(e.ie,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:NN(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function TP(e){var t=CR({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?KN(t,t.limit,"L"):t}function EP(e,t){return new vP(t.largestBatchId,TR(e.ie,t.overlayMutation))}function SP(e,t){var n=t.path.lastSegment();return[e,UR(t.path.popLast()),n]}function CP(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:bP(r.readTime),documentKey:UR(r.documentKey.path),largestBatchId:r.largestBatchId}}var NP=function(){function e(){d(this,e)}return y(e,[{key:"getBundleMetadata",value:function(e,t){return AP(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:wP(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return AP(e).put({bundleId:(n=t).id,createTime:bP(hR(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return RP(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:TP(t.bundledQuery),readTime:wP(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return RP(e).put(function(e){return{name:e.name,readTime:bP(hR(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function AP(e){return hP(e,"bundles")}function RP(e){return hP(e,"namedQueries")}var PP=function(){function e(t,n){d(this,e),this.yt=t,this.userId=n}return y(e,[{key:"getOverlay",value:function(e,t){var n=this;return DP(e).get(SP(this.userId,t)).next((function(e){return e?EP(n.yt,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=BA();return XS.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new vP(t,a);i.push(r.oe(e,o))})),XS.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(UR(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(DP(e).Y("collectionPathOverlayIndex",i))})),XS.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=BA(),a=UR(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return DP(e).W("collectionPathOverlayIndex",o).next((function(e){var t,n=C(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=EP(r.yt,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=BA(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return DP(e).Z({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=EP(a.yt,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"oe",value:function(e,t){return DP(e).put(function(e,t,n){var r=l(SP(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:IR(e.ie,n.mutation)}}(this.yt,this.userId,t))}}],[{key:"re",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function DP(e){return hP(e,"documentOverlays")}var OP=function(){function e(){d(this,e)}return y(e,[{key:"ue",value:function(e,t){this.ce(e,t),t.ae()}},{key:"ce",value:function(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(wC(e.integerValue));else if("doubleValue"in e){var n=wC(e.doubleValue);isNaN(n)?this.he(t,13):(this.he(t,15),mC(n)?t.le(0):t.le(n))}else if("timestampValue"in e){var r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe("".concat(r.seconds||"")),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(_C(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.he(t,45),t.le(i.latitude||0),t.le(i.longitude||0)}else"mapValue"in e?BC(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):hS()}},{key:"de",value:function(e,t){this.he(t,25),this.pe(e,t)}},{key:"pe",value:function(e,t){t.fe(e)}},{key:"ge",value:function(e,t){var n=e.fields||{};this.he(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.de(a,t),this.ce(n[a],t)}}},{key:"ye",value:function(e,t){var n=e.values||[];this.he(t,50);var r,i=C(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.ce(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"me",value:function(e,t){var n=this;this.he(t,37),FS.fromName(e).path.forEach((function(e){n.he(t,60),n.pe(e,t)}))}},{key:"he",value:function(e,t){e.le(t)}},{key:"_e",value:function(e){e.le(2)}}]),e}();function LP(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function MP(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=LP(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}OP.Ie=new OP;var FP=function(){function e(){d(this,e),this.buffer=new Uint8Array(1024),this.position=0}return y(e,[{key:"Te",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ee(n.value),n=t.next();this.Ae()}},{key:"Re",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.be(n.value),n=t.next();this.Pe()}},{key:"ve",value:function(e){var t,n=C(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ee(i);else if(i<2048)this.Ee(960|i>>>6),this.Ee(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ee(480|i>>>12),this.Ee(128|63&i>>>6),this.Ee(128|63&i);else{var a=r.codePointAt(0);this.Ee(240|a>>>18),this.Ee(128|63&a>>>12),this.Ee(128|63&a>>>6),this.Ee(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ae()}},{key:"Ve",value:function(e){var t,n=C(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.be(i);else if(i<2048)this.be(960|i>>>6),this.be(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.be(480|i>>>12),this.be(128|63&i>>>6),this.be(128|63&i);else{var a=r.codePointAt(0);this.be(240|a>>>18),this.be(128|63&a>>>12),this.be(128|63&a>>>6),this.be(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Pe()}},{key:"Se",value:function(e){var t=this.De(e),n=MP(t);this.Ce(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"xe",value:function(e){var t=this.De(e),n=MP(t);this.Ce(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"Ne",value:function(){this.ke(255),this.ke(255)}},{key:"Oe",value:function(){this.Me(255),this.Me(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"Fe",value:function(){return this.buffer.slice(0,this.position)}},{key:"De",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ee",value:function(e){var t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}},{key:"be",value:function(e){var t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}},{key:"Ae",value:function(){this.ke(0),this.ke(1)}},{key:"Pe",value:function(){this.Me(0),this.Me(1)}},{key:"ke",value:function(e){this.Ce(1),this.buffer[this.position++]=e}},{key:"Me",value:function(e){this.Ce(1),this.buffer[this.position++]=~e}},{key:"Ce",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),UP=function(){function e(t){d(this,e),this.$e=t}return y(e,[{key:"we",value:function(e){this.$e.Te(e)}},{key:"fe",value:function(e){this.$e.ve(e)}},{key:"le",value:function(e){this.$e.Se(e)}},{key:"ae",value:function(){this.$e.Ne()}}]),e}(),jP=function(){function e(t){d(this,e),this.$e=t}return y(e,[{key:"we",value:function(e){this.$e.Re(e)}},{key:"fe",value:function(e){this.$e.Ve(e)}},{key:"le",value:function(e){this.$e.xe(e)}},{key:"ae",value:function(){this.$e.Oe()}}]),e}(),VP=function(){function e(){d(this,e),this.$e=new FP,this.Be=new UP(this.$e),this.Le=new jP(this.$e)}return y(e,[{key:"seed",value:function(e){this.$e.seed(e)}},{key:"qe",value:function(e){return 0===e?this.Be:this.Le}},{key:"Fe",value:function(){return this.$e.Fe()}},{key:"reset",value:function(){this.$e.reset()}}]),e}(),qP=function(){function e(t,n,r,i){d(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return y(e,[{key:"Ue",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function BP(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=zP(e.arrayValue,t.arrayValue))?n:0!==(n=zP(e.directionalValue,t.directionalValue))?n:FS.comparator(e.documentKey,t.documentKey)}function zP(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var WP=function(){function e(t){d(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ke=t.orderBy,this.Ge=[];var n,r=C(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Qe=i:this.Ge.push(i)}}catch(a){r.e(a)}finally{r.f()}}return y(e,[{key:"je",value:function(e){dS(e.collectionGroup===this.collectionId);var t=jS(e);if(void 0!==t&&!this.We(t))return!1;for(var n=VS(e),r=0,i=0;r<n.length&&this.We(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Qe){var a=n[r];if(!this.ze(this.Qe,a)||!this.He(this.Ke[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ke.length||!this.He(this.Ke[i++],o))return!1}return!0}},{key:"We",value:function(e){var t,n=C(this.Ge);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.ze(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"ze",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"He",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function KP(e){var t,n;if(dS(e instanceof XC||e instanceof JC),e instanceof XC){if(e instanceof hN){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return XC.create(e.field,"==",t)})))||[];return JC.create(r,"or")}return e}var i=e.filters.map((function(e){return KP(e)}));return JC.create(i,e.op)}function HP(e){if(0===e.getFilters().length)return[];var t=YP(KP(e));return dS($P(t)),GP(t)||QP(t)?[t]:t.getFilters()}function GP(e){return e instanceof XC}function QP(e){return e instanceof JC&&tN(e)}function $P(e){return GP(e)||QP(e)||function(e){if(e instanceof JC&&eN(e)){var t,n=C(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!GP(r)&&!QP(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function YP(e){if(dS(e instanceof XC||e instanceof JC),e instanceof XC)return e;if(1===e.filters.length)return YP(e.filters[0]);var t=e.filters.map((function(e){return YP(e)})),n=JC.create(t,e.op);return $P(n=ZP(n))?n:(dS(n instanceof JC),dS(ZC(n)),dS(n.filters.length>1),n.filters.reduce((function(e,t){return XP(e,t)})))}function XP(e,t){var n;return dS(e instanceof XC||e instanceof JC),dS(t instanceof XC||t instanceof JC),n=e instanceof XC?t instanceof XC?function(e,t){return JC.create([e,t],"and")}(e,t):JP(e,t):t instanceof XC?JP(t,e):function(e,t){if(dS(e.filters.length>0&&t.filters.length>0),ZC(e)&&ZC(t))return aN(e,t.getFilters());var n=eN(e)?e:t,r=eN(e)?t:e,i=n.filters.map((function(e){return XP(e,r)}));return JC.create(i,"or")}(e,t),ZP(n)}function JP(e,t){if(ZC(t))return aN(t,e.getFilters());var n=t.filters.map((function(t){return XP(e,t)}));return JC.create(n,"or")}function ZP(e){if(dS(e instanceof XC||e instanceof JC),e instanceof XC)return e;var t=e.getFilters();if(1===t.length)return ZP(t[0]);if(nN(e))return e;var n=t.map((function(e){return ZP(e)})),r=[];return n.forEach((function(t){t instanceof XC?r.push(t):t instanceof JC&&(t.op===e.op?r.push.apply(r,h(t.filters)):r.push(t))})),1===r.length?r[0]:JC.create(r,e.op)}var eD=function(){function e(){d(this,e),this.Je=new tD}return y(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.Je.add(t),XS.resolve()}},{key:"getCollectionParents",value:function(e,t){return XS.resolve(this.Je.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return XS.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return XS.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return XS.resolve(null)}},{key:"getIndexType",value:function(e,t){return XS.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return XS.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return XS.resolve(null)}},{key:"getMinOffset",value:function(e,t){return XS.resolve(KS.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return XS.resolve(KS.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return XS.resolve()}},{key:"updateIndexEntries",value:function(e,t){return XS.resolve()}}]),e}(),tD=function(){function e(){d(this,e),this.index={}}return y(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new bN(OS.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new bN(OS.comparator)).toArray()}}]),e}(),nD=new Uint8Array(0),rD=function(){function e(t,n){d(this,e),this.user=t,this.databaseId=n,this.Ye=new tD,this.Xe=new MA((function(e){return NN(e)}),(function(e,t){return AN(e,t)})),this.uid=t.uid||""}return y(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ye.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Ye.add(t)}));var a={collectionId:r,parent:UR(i)};return iD(e).put(a)}return XS.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[AS(t),""],!1,!0);return iD(e).W(r).next((function(e){var r,i=C(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(qR(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=oD(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=uD(e);return a.next((function(e){o.put(CP(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=oD(e),r=uD(e),i=aD(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=aD(e),i=!0,a=new Map;return XS.forEach(this.Ze(t),(function(t){return n.tn(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=GA(),o=[];return XS.forEach(a,(function(i,a){var u;sS("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(NN(t)));var s=function(e,t){var n=jS(t);if(void 0===n)return null;var r,i=C(PN(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=C(VS(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=C(PN(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=C(VS(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?DN(e,o.fieldPath,e.startAt):ON(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new GC(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=C(VS(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?ON(e,o.fieldPath,e.endAt):DN(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new GC(r,i)}(a,i),h=n.en(i,a,l),d=n.en(i,a,f),p=n.nn(i,a,c),v=n.sn(i.indexId,s,h,l.inclusive,d,f.inclusive,p);return XS.forEach(v,(function(n){return r.J(n,t.limit).next((function(t){t.forEach((function(t){var n=FS.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return XS.resolve(null)}))}},{key:"Ze",value:function(e){var t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:HP(JC.create(e.filters,"and")).map((function(t){return CN(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.Xe.set(e,t),t)}},{key:"sn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(){var s=t?u.rn(t[d/c]):nD,f=u.on(e,s,n[d%c],r),p=u.un(e,s,i[d%c],a),v=o.map((function(t){return u.on(e,s,t,!0)}));l.push.apply(l,h(u.createRange(f,p,v)))},d=0;d<s;++d)f();return l}},{key:"on",value:function(e,t,n,r){var i=new qP(e,FS.empty(),t,n);return r?i:i.Ue()}},{key:"un",value:function(e,t,n,r){var i=new qP(e,FS.empty(),t,n);return r?i.Ue():i}},{key:"tn",value:function(e,t){var n=new WP(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=C(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.je(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.Ze(t);return XS.forEach(i,(function(t){return n.tn(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new bN(MS.comparator),r=!1,i=C(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=C(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=C(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"cn",value:function(e,t){var n,r=new VP,i=C(VS(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.qe(a.kind);OP.Ie.ue(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.Fe()}},{key:"rn",value:function(e){var t=new VP;return OP.Ie.ue(e,t.qe(0)),t.Fe()}},{key:"an",value:function(e,t){var n=new VP;return OP.Ie.ue(LC(this.databaseId,t),n.qe(function(e){var t=VS(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Fe()}},{key:"nn",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new VP);var i,a=0,o=C(VS(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=C(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.hn(t,s.fieldPath)&&FC(c))r=this.ln(r,s,c);else{var h=f.qe(s.kind);OP.Ie.ue(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.fn(r)}},{key:"en",value:function(e,t,n){return this.nn(e,t,n.position)}},{key:"fn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].Fe();return t}},{key:"ln",value:function(e,t,n){var r,i=h(e),a=[],o=C(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=C(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new VP;f.seed(l.Fe()),OP.Ie.ue(s,f.qe(t.kind)),a.push(f)}}catch(d){c.e(d)}finally{c.f()}}}catch(d){o.e(d)}finally{o.f()}return a}},{key:"hn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof XC&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=oD(e),i=uD(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next((function(e){var t=[];return XS.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new BS(t.sequenceNumber,new KS(wP(t.readTime),new FS(qR(t.documentKey)),t.largestBatchId)):BS.empty(),r=e.fields.map((function(e){var t=l(e,2),n=t[0],r=t[1];return new qS(MS.fromServerFormat(n),r)}));return new US(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:CS(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=oD(e),a=uD(e);return this.dn(e).next((function(e){return i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return XS.forEach(t,(function(t){return a.put(CP(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return XS.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?XS.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),XS.forEach(a,(function(r){return n._n(e,t,r).next((function(t){var a=n.wn(i,r);return t.isEqual(a)?XS.resolve():n.mn(e,i,r,t,a)}))}))}))}))}},{key:"gn",value:function(e,t,n,r){return aD(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.an(n,t.key),documentKey:t.key.path.toArray()})}},{key:"yn",value:function(e,t,n,r){return aD(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.an(n,t.key),t.key.path.toArray()])}},{key:"_n",value:function(e,t,n){var r=aD(e),i=new bN(BP);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.an(n,t)])},(function(e,r){i=i.add(new qP(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"wn",value:function(e,t){var n=new bN(BP),r=this.cn(t,e);if(null==r)return n;var i=jS(t);if(null!=i){var a=e.data.field(i.fieldPath);if(FC(a)){var o,u=C(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new qP(t.indexId,e.key,this.rn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new qP(t.indexId,e.key,nD,r));return n}},{key:"mn",value:function(e,t,n,r,i){var a=this;sS("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=_N(a),s=_N(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=_N(o)):l?(i(u),u=_N(a)):(u=_N(a),s=_N(o))}}(r,i,BP,(function(r){o.push(a.gn(e,t,n,r))}),(function(r){o.push(a.yn(e,t,n,r))})),XS.waitFor(o)}},{key:"dn",value:function(e){var t=1;return uD(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return BP(e,t)})).filter((function(e,t,n){return!t||0!==BP(e,n[t-1])}));var r=[];r.push(e);var i,a=C(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=BP(o,e),s=BP(o,t);if(0===u)r[0]=e.Ue();else if(u>0&&s<0)r.push(o),r.push(o.Ue());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.pn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,nD,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,nD,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"pn",value:function(e,t){return BP(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(sD)}},{key:"getMinOffset",value:function(e,t){var n=this;return XS.mapArray(this.Ze(t),(function(t){return n.tn(e,t).next((function(e){return e||hS()}))})).next(sD)}}]),e}();function iD(e){return hP(e,"collectionParents")}function aD(e){return hP(e,"indexEntries")}function oD(e){return hP(e,"indexConfiguration")}function uD(e){return hP(e,"indexState")}function sD(e){dS(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;HS(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new KS(t.readTime,t.documentKey,n)}var cD={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},lD=function(){function e(t,n,r){d(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return y(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function fD(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Z({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){dS(1===u)})));var c,l=[],f=C(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=WR(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return XS.waitFor(a).next((function(){return l}))}function hD(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw hS();t=e.noDocument}return JSON.stringify(t).length}lD.DEFAULT_COLLECTION_PERCENTILE=10,lD.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,lD.DEFAULT=new lD(41943040,lD.DEFAULT_COLLECTION_PERCENTILE,lD.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),lD.DISABLED=new lD(-1,0,0);var dD=function(){function e(t,n,r,i){d(this,e),this.userId=t,this.yt=n,this.indexManager=r,this.referenceDelegate=i,this.In={}}return y(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return vD(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=mD(e),o=vD(e);return o.add({}).next((function(u){dS("number"==typeof u);var s,c=new dP(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return IR(e.ie,t)})),i=n.mutations.map((function(t){return IR(e.ie,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.yt,i.userId,c),f=[],h=new bN((function(e,t){return CS(e.canonicalString(),t.canonicalString())})),d=C(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=WR(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,KR))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.In[u]=c.keys()})),XS.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return vD(e).get(t).next((function(e){return e?(dS(e.userId===n.userId),_P(n.yt,e)):null}))}},{key:"Tn",value:function(e,t){var n=this;return this.In[t]?XS.resolve(this.In[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.In[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return vD(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(dS(t.batchId>=r),a=_P(n.yt,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return vD(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return vD(e).W("userMutationsIndex",n).next((function(e){return e.map((function(e){return _P(t.yt,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=zR(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return mD(e).Z({range:i},(function(r,i,o){var u=l(r,3),s=u[0],c=u[1],f=u[2],h=qR(c);if(s===n.userId&&t.path.isEqual(h))return vD(e).get(f).next((function(e){if(!e)throw hS();dS(e.userId===n.userId),a.push(_P(n.yt,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new bN(CS),i=[];return t.forEach((function(t){var a=zR(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=mD(e).Z({range:o},(function(e,i,a){var o=l(e,3),u=o[0],s=o[1],c=o[2],f=qR(s);u===n.userId&&t.path.isEqual(f)?r=r.add(c):a.done()}));i.push(u)})),XS.waitFor(i).next((function(){return n.En(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=zR(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new bN(CS);return mD(e).Z({range:o},(function(e,t,a){var o=l(e,3),s=o[0],c=o[1],f=o[2],h=qR(c);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.En(e,u)}))}},{key:"En",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(vD(e).get(t).next((function(e){if(null===e)throw hS();dS(e.userId===n.userId),r.push(_P(n.yt,e))})))})),XS.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return fD(e.se,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.An(t.batchId)})),XS.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"An",value:function(e){delete this.In[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return XS.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return mD(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=qR(e[1]);i.push(a)}else r.done()})).next((function(){dS(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return pD(e,this.userId,t)}},{key:"Rn",value:function(e){var t=this;return yD(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"re",value:function(t,n,r,i){return dS(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function pD(e,t,n){var r=zR(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return mD(e).Z({range:a,X:!0},(function(e,n,r){var a=l(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function vD(e){return hP(e,"mutations")}function mD(e){return hP(e,"documentMutations")}function yD(e){return hP(e,"mutationQueues")}var gD=function(){function e(t){d(this,e),this.bn=t}return y(e,[{key:"next",value:function(){return this.bn+=2,this.bn}}],[{key:"Pn",value:function(){return new e(0)}},{key:"vn",value:function(){return new e(-1)}}]),e}(),kD=function(){function e(t,n){d(this,e),this.referenceDelegate=t,this.yt=n}return y(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Vn(e).next((function(n){var r=new gD(n.highestTargetId);return n.highestTargetId=r.next(),t.Sn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Vn(e).next((function(e){return PS.fromTimestamp(new RS(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Vn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Vn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Sn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Dn(e,t).next((function(){return n.Vn(e).next((function(r){return r.targetCount+=1,n.Cn(t,r),n.Sn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Dn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return bD(e).delete(t.targetId)})).next((function(){return n.Vn(e)})).next((function(t){return dS(t.targetCount>0),t.targetCount-=1,n.Sn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return bD(e).Z((function(o,u){var s=xP(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return XS.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return bD(e).Z((function(e,n){var r=xP(n);t(r)}))}},{key:"Vn",value:function(e){return wD(e).get("targetGlobalKey").next((function(e){return dS(null!==e),e}))}},{key:"Sn",value:function(e,t){return wD(e).put("targetGlobalKey",t)}},{key:"Dn",value:function(e,t){return bD(e).put(IP(this.yt,t))}},{key:"Cn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Vn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=NN(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return bD(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=xP(n);AN(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=_D(e);return t.forEach((function(t){var o=UR(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),XS.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=_D(e);return XS.forEach(t,(function(t){var a=UR(t.path);return XS.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=_D(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=_D(e),i=GA();return r.Z({range:n,X:!0},(function(e,t,n){var r=qR(e[1]),a=new FS(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=UR(t.path),r=IDBKeyRange.bound([n],[AS(n)],!1,!0),i=0;return _D(e).Z({index:"documentTargetsIndex",X:!0,range:r},(function(e,t,n){var r=l(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"ne",value:function(e,t){return bD(e).get(t).next((function(e){return e?xP(e):null}))}}]),e}();function bD(e){return hP(e,"targets")}function wD(e){return hP(e,"targetGlobal")}function _D(e){return hP(e,"targetDocuments")}function xD(e,t){var n=l(e,2),r=n[0],i=n[1],a=l(t,2),o=a[0],u=a[1],s=CS(r,o);return 0===s?CS(i,u):s}var ID=function(){function e(t){d(this,e),this.xn=t,this.buffer=new bN(xD),this.Nn=0}return y(e,[{key:"kn",value:function(){return++this.Nn}},{key:"On",value:function(e){var t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();xD(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),TD=function(){function e(t,n,r){d(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Mn=null}return y(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}},{key:"stop",value:function(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}},{key:"started",get:function(){return null!==this.Mn}},{key:"Fn",value:function(e){var t=this;sS("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,Ko(zo().mark((function e(){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Mn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!nC(e.t0)){e.next=12;break}sS("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,$S(e.t0);case 14:return e.next=16,t.Fn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),ED=function(){function e(t,n){d(this,e),this.$n=t,this.params=n}return y(e,[{key:"calculateTargetCount",value:function(e,t){return this.$n.Bn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return XS.resolve(cC.at);var r=new ID(t);return this.$n.forEachTarget(e,(function(e){return r.On(e.sequenceNumber)})).next((function(){return n.$n.Ln(e,(function(e){return r.On(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.$n.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.$n.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(sS("LruGarbageCollector","Garbage collection skipped; disabled"),XS.resolve(cD)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(sS("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),cD):n.qn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.$n.getCacheSize(e)}},{key:"qn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(sS("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),uS()<=Yu.DEBUG&&sS("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),XS.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),SD=function(){function e(t,n){d(this,e),this.db=t,this.garbageCollector=function(e,t){return new ED(e,t)}(this,n)}return y(e,[{key:"Bn",value:function(e){var t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Un",value:function(e){var t=0;return this.Ln(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Ln",value:function(e,t){return this.Kn(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return CD(e,n)}},{key:"removeReference",value:function(e,t,n){return CD(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return CD(e,t)}},{key:"Gn",value:function(e,t){return function(e,t){var n=!1;return yD(e).tt((function(r){return pD(e,r,t).next((function(e){return e&&(n=!0),XS.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Kn(e,(function(o,u){if(u<=t){var s=n.Gn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,PS.min()),_D(e).delete([0,UR(o.path)])}))}));i.push(s)}})).next((function(){return XS.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return CD(e,t)}},{key:"Kn",value:function(e,t){var n,r=_D(e),i=cC.at;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=l(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==cC.at&&t(new FS(qR(n)),i),i=s,n=u):i=cC.at})).next((function(){i!==cC.at&&t(new FS(qR(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function CD(e,t){return _D(e).put(function(e,t){return{targetId:0,path:UR(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var ND=function(){function e(){d(this,e),this.changes=new MA((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return y(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,EN.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?XS.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),AD=function(){function e(t){d(this,e),this.yt=t}return y(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return OD(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return OD(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],kP(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Qn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=EN.newInvalidDocument(t);return OD(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(LD(t))},(function(e,i){r=n.jn(t,i)})).next((function(){return r}))}},{key:"Wn",value:function(e,t){var n=this,r={size:0,document:EN.newInvalidDocument(t)};return OD(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(LD(t))},(function(e,i){r={document:n.jn(t,i),size:hD(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=UA();return this.zn(e,t,(function(e,t){var i=n.jn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Hn",value:function(e,t){var n=this,r=UA(),i=new yN(FS.comparator);return this.zn(e,t,(function(e,t){var a=n.jn(e,t);r=r.insert(e,a),i=i.insert(e,hD(t))})).next((function(){return{documents:r,Jn:i}}))}},{key:"zn",value:function(e,t,n){if(t.isEmpty())return XS.resolve();var r=new bN(FD);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(LD(r.first()),LD(r.last())),a=r.getIterator(),o=a.getNext();return OD(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=FS.fromSegments([].concat(h(t.prefixPath),[t.collectionGroup,t.documentId]));o&&FD(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.j(LD(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getAllFromCollection",value:function(e,t,n){var r=this,i=[t.popLast().toArray(),t.lastSegment(),kP(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return OD(e).W(IDBKeyRange.bound(i,a,!0)).next((function(e){var t,n=UA(),i=C(e);try{for(i.s();!(t=i.n()).done;){var a=t.value,o=r.jn(FS.fromSegments(a.prefixPath.concat(a.collectionGroup,a.documentId)),a);n=n.insert(o.key,o)}}catch(u){i.e(u)}finally{i.f()}return n}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=UA(),o=MD(t,n),u=MD(t,KS.max());return OD(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.jn(FS.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new PD(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return DD(e).get("remoteDocumentGlobalKey").next((function(e){return dS(!!e),e}))}},{key:"Qn",value:function(e,t){return DD(e).put("remoteDocumentGlobalKey",t)}},{key:"jn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=_R(e.ie,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=FS.fromSegments(t.noDocument.path),i=wP(t.noDocument.readTime);n=EN.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return hS();var a=FS.fromSegments(t.unknownDocument.path),o=wP(t.unknownDocument.version);n=EN.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new RS(e[0],e[1]);return PS.fromTimestamp(t)}(t.readTime)),n}(this.yt,t);if(!n.isNoDocument()||!n.version.isEqual(PS.min()))return n}return EN.newInvalidDocument(e)}}]),e}();function RD(e){return new AD(e)}var PD=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).Yn=e,i.trackRemovals=r,i.Xn=new MA((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return y(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new bN((function(e,t){return CS(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Xn.get(a);if(n.push(t.Yn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=gP(t.Yn.yt,o);i=i.add(a.path.popLast());var c=hD(s);r+=c-u.size,n.push(t.Yn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=gP(t.Yn.yt,o.convertToNoDocument(PS.min()));n.push(t.Yn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Yn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Yn.updateMetadata(e,r)),XS.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Yn.Wn(e,t).next((function(e){return n.Xn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Yn.Hn(e,t).next((function(e){var t=e.documents;return e.Jn.forEach((function(e,r){n.Xn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(ND);function DD(e){return hP(e,"remoteDocumentGlobal")}function OD(e){return hP(e,"remoteDocumentsV14")}function LD(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function MD(e,t){var n=t.documentKey.path.toArray();return[e,kP(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function FD(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=CS(n[a],r[a]))return i;return(i=CS(n.length,r.length))||((i=CS(n[n.length-2],r[r.length-2]))||CS(n[n.length-1],r[r.length-1]))}var UD=y((function e(t,n){d(this,e),this.overlayedDocument=t,this.mutatedFields=n})),jD=function(){function e(t,n,r,i){d(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return y(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&wA(r.mutation,e,xN.empty(),RS.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,GA()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:GA(),i=BA();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=VA();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=BA();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,GA())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=UA(),a=WA(),o=WA();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof TA)?i=i.insert(t.key,t):void 0!==o&&(a.set(t.key,o.mutation.getFieldMask()),wA(o.mutation,t,o.mutation.getFieldMask(),RS.now()))})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new UD(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=WA(),i=new yN((function(e,t){return e-t})),a=GA();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=C(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||xN.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||GA()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=zA();c.forEach((function(e){if(!a.has(e)){var n=kA(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return XS.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return FS.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):qN(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):XS.resolve(BA()),u=-1,s=a;return o.next((function(t){return XS.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?XS.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,GA())})).next((function(e){return{batchId:u,changes:qA(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new FS(t)).next((function(e){var t=VA();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=VA();return this.indexManager.getCollectionParents(e,i).next((function(o){return XS.forEach(o,(function(o){var u=function(e,t){return new LN(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.remoteDocumentCache.getAllFromCollection(e,t.path,n).next((function(a){return r=a,i.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId)})).next((function(e){e.forEach((function(e,t){var n=t.getKey();null===r.get(n)&&(r=r.insert(n,EN.newInvalidDocument(n)))}));var n=VA();return r.forEach((function(r,i){var a=e.get(r);void 0!==a&&wA(a.mutation,i,xN.empty(),RS.now()),$N(t,i)&&(n=n.insert(r,i))})),n}))}}]),e}(),VD=function(){function e(t){d(this,e),this.yt=t,this.Zn=new Map,this.ts=new Map}return y(e,[{key:"getBundleMetadata",value:function(e,t){return XS.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:hR(n.createTime)}),XS.resolve()}},{key:"getNamedQuery",value:function(e,t){return XS.resolve(this.ts.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.ts.set(t.name,function(e){return{name:e.name,query:TP(e.bundledQuery),readTime:hR(e.readTime)}}(t)),XS.resolve()}}]),e}(),qD=function(){function e(){d(this,e),this.overlays=new yN(FS.comparator),this.es=new Map}return y(e,[{key:"getOverlay",value:function(e,t){return XS.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=BA();return XS.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.oe(e,t,i)})),XS.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.es.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.es.delete(n)),XS.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=BA(),i=t.length+1,a=new FS(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return XS.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new yN((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=BA(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=BA(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return XS.resolve(s)}},{key:"oe",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.es.get(r.largestBatchId).delete(n.key);this.es.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new vP(t,n));var a=this.es.get(t);void 0===a&&(a=GA(),this.es.set(t,a)),this.es.set(t,a.add(n.key))}}]),e}(),BD=function(){function e(){d(this,e),this.ns=new bN(zD.ss),this.rs=new bN(zD.os)}return y(e,[{key:"isEmpty",value:function(){return this.ns.isEmpty()}},{key:"addReference",value:function(e,t){var n=new zD(e,t);this.ns=this.ns.add(n),this.rs=this.rs.add(n)}},{key:"us",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.cs(new zD(e,t))}},{key:"hs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"ls",value:function(e){var t=this,n=new FS(new OS([])),r=new zD(n,e),i=new zD(n,e+1),a=[];return this.rs.forEachInRange([r,i],(function(e){t.cs(e),a.push(e.key)})),a}},{key:"fs",value:function(){var e=this;this.ns.forEach((function(t){return e.cs(t)}))}},{key:"cs",value:function(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}},{key:"ds",value:function(e){var t=new FS(new OS([])),n=new zD(t,e),r=new zD(t,e+1),i=GA();return this.rs.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new zD(e,0),n=this.ns.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),zD=function(){function e(t,n){d(this,e),this.key=t,this._s=n}return y(e,null,[{key:"ss",value:function(e,t){return FS.comparator(e.key,t.key)||CS(e._s,t._s)}},{key:"os",value:function(e,t){return CS(e._s,t._s)||FS.comparator(e.key,t.key)}}]),e}(),WD=function(){function e(t,n){d(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this.gs=new bN(zD.ss)}return y(e,[{key:"checkEmpty",value:function(e){return XS.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new dP(i,t,n,r);this.mutationQueue.push(a);var o,u=C(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.gs=this.gs.add(new zD(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return XS.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return XS.resolve(this.ys(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ps(n),i=r<0?0:r;return XS.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return XS.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return XS.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new zD(t,0),i=new zD(t,Number.POSITIVE_INFINITY),a=[];return this.gs.forEachInRange([r,i],(function(e){var t=n.ys(e._s);a.push(t)})),XS.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new bN(CS);return t.forEach((function(e){var t=new zD(e,0),i=new zD(e,Number.POSITIVE_INFINITY);n.gs.forEachInRange([t,i],(function(e){r=r.add(e._s)}))})),XS.resolve(this.Is(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;FS.isDocumentKey(i)||(i=i.child(""));var a=new zD(new FS(i),0),o=new bN(CS);return this.gs.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e._s)),!0)}),a),XS.resolve(this.Is(o))}},{key:"Is",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.ys(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;dS(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();var r=this.gs;return XS.forEach(t.mutations,(function(i){var a=new zD(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.gs=r}))}},{key:"An",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new zD(t,0),r=this.gs.firstAfterOrEqual(n);return XS.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,XS.resolve()}},{key:"Ts",value:function(e,t){return this.ps(e)}},{key:"ps",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"ys",value:function(e){var t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),KD=function(){function e(t){d(this,e),this.Es=t,this.docs=new yN(FS.comparator),this.size=0}return y(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Es(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return XS.resolve(n?n.document.mutableCopy():EN.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=UA();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():EN.newInvalidDocument(e))})),XS.resolve(r)}},{key:"getAllFromCollection",value:function(e,t,n){for(var r=UA(),i=new FS(t.child("")),a=this.docs.getIteratorFrom(i);a.hasNext();){var o=a.getNext(),u=o.key,s=o.value.document;if(!t.isPrefixOf(u.path))break;u.path.length>t.length+1||HS(WS(s),n)<=0||(r=r.insert(s.key,s.mutableCopy()))}return XS.resolve(r)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){hS()}},{key:"As",value:function(e,t){return XS.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new HD(this)}},{key:"getSize",value:function(e){return XS.resolve(this.size)}}]),e}(),HD=function(e){k(n,e);var t=I(n);function n(e){var r;return d(this,n),(r=t.call(this)).Yn=e,r}return y(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Yn.addEntry(e,i)):t.Yn.removeEntry(r)})),XS.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Yn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Yn.getEntries(e,t)}}]),n}(ND),GD=function(){function e(t){d(this,e),this.persistence=t,this.Rs=new MA((function(e){return NN(e)}),AN),this.lastRemoteSnapshotVersion=PS.min(),this.highestTargetId=0,this.bs=0,this.Ps=new BD,this.targetCount=0,this.vs=gD.Pn()}return y(e,[{key:"forEachTarget",value:function(e,t){return this.Rs.forEach((function(e,n){return t(n)})),XS.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return XS.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return XS.resolve(this.bs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.vs.next(),XS.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.bs&&(this.bs=t),XS.resolve()}},{key:"Dn",value:function(e){this.Rs.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.vs=new gD(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Dn(t),this.targetCount+=1,XS.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Dn(t),XS.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,XS.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Rs.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Rs.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),XS.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return XS.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Rs.get(t)||null;return XS.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Ps.us(t,n),XS.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Ps.hs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),XS.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Ps.ls(t),XS.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Ps.ds(t);return XS.resolve(n)}},{key:"containsKey",value:function(e,t){return XS.resolve(this.Ps.containsKey(t))}}]),e}(),QD=function(){function e(t,n){var r=this;d(this,e),this.Vs={},this.overlays={},this.Ss=new cC(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=t(this),this.Cs=new GD(this),this.indexManager=new eD,this.remoteDocumentCache=new KD((function(e){return r.referenceDelegate.xs(e)})),this.yt=new yP(n),this.Ns=new VD(this.yt)}return y(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ds=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ds}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new qD,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Vs[e.toKey()];return n||(n=new WD(t,this.referenceDelegate),this.Vs[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;sS("MemoryPersistence","Starting transaction:",e);var i=new $D(this.Ss.next());return this.referenceDelegate.ks(),n(i).next((function(e){return r.referenceDelegate.Os(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Ms",value:function(e,t){return XS.or(Object.values(this.Vs).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),$D=function(e){k(n,e);var t=I(n);function n(e){var r;return d(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return y(n)}(QS),YD=function(){function e(t){d(this,e),this.persistence=t,this.Fs=new BD,this.$s=null}return y(e,[{key:"Ls",get:function(){if(this.$s)return this.$s;throw hS()}},{key:"addReference",value:function(e,t,n){return this.Fs.addReference(n,t),this.Ls.delete(n.toString()),XS.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Fs.removeReference(n,t),this.Ls.add(n.toString()),XS.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Ls.add(t.toString()),XS.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Fs.ls(t.targetId).forEach((function(e){return n.Ls.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Ls.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"ks",value:function(){this.$s=new Set}},{key:"Os",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return XS.forEach(this.Ls,(function(r){var i=FS.fromPath(r);return t.qs(e,i).next((function(e){e||n.removeEntry(i,PS.min())}))})).next((function(){return t.$s=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.qs(e,t).next((function(e){e?n.Ls.delete(t.toString()):n.Ls.add(t.toString())}))}},{key:"xs",value:function(e){return 0}},{key:"qs",value:function(e,t){var n=this;return XS.or([function(){return XS.resolve(n.Fs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ms(e,t)}])}}],[{key:"Bs",value:function(t){return new e(t)}}]),e}(),XD=function(){function e(t){d(this,e),this.yt=t}return y(e,[{key:"$",value:function(e,t,n,r){var i=this,a=new JS("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",BR,{unique:!0}),e.createObjectStore("documentMutations")}(e),JD(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=XS.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),JD(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:PS.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").W().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",BR,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return XS.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.Us(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Ks(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Gs(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Qs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.js(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:rP});t.createIndex("collectionPathOverlayIndex",iP,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",aP,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:HR});t.createIndex("documentKeyIndex",GR),t.createIndex("collectionGroupIndex",QR)}(e)})).next((function(){return i.Ws(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.zs(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:ZR}).createIndex("sequenceNumberIndex",eP,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:tP}).createIndex("documentKeyIndex",nP,{unique:!1})}(e)}))),o}},{key:"Ks",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=hD(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"Us",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next((function(n){return XS.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",i).next((function(r){return XS.forEach(r,(function(r){dS(r.userId===n.userId);var i=_P(t.yt,r);return fD(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Gs",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new OS(n),o=function(e){return[0,UR(e)]}(a);r.push(t.get(o).next((function(n){return n?XS.resolve():function(n){return t.put({targetId:0,path:UR(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return XS.waitFor(r)}))}))}},{key:"Qs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:JR});var n=t.store("collectionParents"),r=new tD,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:UR(i)})}};return t.store("remoteDocuments").Z({X:!0},(function(e,t){var n=new OS(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({X:!0},(function(e,t){var n=l(e,3),r=(n[0],n[1]),a=(n[2],qR(r));return i(a.popLast())}))}))}},{key:"js",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=xP(r),a=IP(t.yt,i);return n.put(a)}))}},{key:"Ws",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new FS(OS.fromString(i.document.name).popFirst(5)):i.noDocument?FS.fromSegments(i.noDocument.path):i.unknownDocument?FS.fromSegments(i.unknownDocument.path):hS()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return XS.waitFor(r)}))}},{key:"zs",value:function(e,t){var n=this,r=t.store("mutations"),i=RD(this.yt),a=new QD(YD.Bs,this.yt.ie);return r.W().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:GA();_P(n.yt,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),XS.forEach(r,(function(e,r){var o=new iS(r),u=PP.re(n.yt,o),s=a.getIndexManager(o),c=dD.re(o,n.yt,s,a.referenceDelegate);return new jD(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new fP(t,cC.at),e).next()}))}))}}]),e}();function JD(e){e.createObjectStore("targetDocuments",{keyPath:YR}).createIndex("documentTargetsIndex",XR,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",$R,{unique:!0}),e.createObjectStore("targetGlobal")}var ZD="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",eO=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(d(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Hs=a,this.window=o,this.document=u,this.Js=c,this.Ys=l,this.Xs=f,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=function(e){return Promise.resolve()},!e.C())throw new mS(vS.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new SD(this,i),this.ii=n+"main",this.yt=new yP(s),this.ri=new ZS(this.ii,this.Xs,new XD(this.yt)),this.Cs=new kD(this.referenceDelegate,this.yt),this.remoteDocumentCache=RD(this.yt),this.Ns=new NP,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===l&&cS("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return y(e,[{key:"start",value:function(){var e=this;return this.ui().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new mS(vS.FAILED_PRECONDITION,ZD);return e.ci(),e.ai(),e.hi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Cs.getHighestSequenceNumber(t)}))})).then((function(t){e.Ss=new cC(t,e.Js)})).then((function(){e.Ds=!0})).catch((function(t){return e.ri&&e.ri.close(),Promise.reject(t)}))}},{key:"li",value:function(e){var t=this;return this.si=function(){var n=Ko(zo().mark((function n(r){return zo().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ri.L(function(){var t=Ko(zo().mark((function t(n){return zo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget(Ko(zo().mark((function e(){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.ui();case 4:case"end":return e.stop()}}),e)})))))}},{key:"ui",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return nO(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.fi(t).next((function(t){t||(e.isPrimary=!1,e.Hs.enqueueRetryable((function(){return e.si(!1)})))}))})).next((function(){return e.di(t)})).next((function(n){return e.isPrimary&&!n?e._i(t).next((function(){return!1})):!!n&&e.wi(t).next((function(){return!0}))}))})).catch((function(t){if(nC(t))return sS("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return sS("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Hs.enqueueRetryable((function(){return e.si(t)})),e.isPrimary=t}))}},{key:"fi",value:function(e){var t=this;return tO(e).get("owner").next((function(e){return XS.resolve(t.mi(e))}))}},{key:"gi",value:function(e){return nO(e).delete(this.clientId)}},{key:"yi",value:function(){var e=Ko(zo().mark((function e(){var t,n,r,i,a=this;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.pi(this.ni,18e5)){e.next=6;break}return this.ni=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=hP(e,"clientMetadata");return t.W().next((function(e){var n=a.Ii(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return XS.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.oi){n=C(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.oi.removeItem(this.Ti(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"hi",value:function(){var e=this;this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.ui().then((function(){return e.yi()})).then((function(){return e.hi()}))}))}},{key:"mi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"di",value:function(e){var t=this;return this.Ys?XS.resolve(!0):tO(e).get("owner").next((function(n){if(null!==n&&t.pi(n.leaseTimestampMs,5e3)&&!t.Ei(n.ownerId)){if(t.mi(n)&&t.networkEnabled)return!0;if(!t.mi(n)){if(!n.allowTabSynchronization)throw new mS(vS.FAILED_PRECONDITION,ZD);return!1}}return!(!t.networkEnabled||!t.inForeground)||nO(e).W().next((function(e){return void 0===t.Ii(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&sS("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=Ko(zo().mark((function e(){var t=this;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ds=!1,this.Ai(),this.ei&&(this.ei.cancel(),this.ei=null),this.Ri(),this.bi(),e.next=7,this.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new fP(e,cC.at);return t._i(n).next((function(){return t.gi(n)}))}));case 7:this.ri.close(),this.Pi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ii",value:function(e,t){var n=this;return e.filter((function(e){return n.pi(e.updateTimeMs,t)&&!n.Ei(e.clientId)}))}},{key:"vi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return nO(t).W().next((function(t){return e.Ii(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Ds}},{key:"getMutationQueue",value:function(e,t){return dD.re(e,this.yt,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Cs}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new rD(e,this.yt.ie.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return PP.re(this.yt,e)}},{key:"getBundleCache",value:function(){return this.Ns}},{key:"runTransaction",value:function(e,t,n){var r=this;sS("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Xs)?lP:14===i?cP:13===i?sP:12===i?uP:11===i?oP:void hS();return this.ri.runTransaction(e,o,u,(function(i){return a=new fP(i,r.Ss?r.Ss.next():cC.at),"readwrite-primary"===t?r.fi(a).next((function(e){return!!e||r.di(a)})).next((function(t){if(!t)throw cS("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Hs.enqueueRetryable((function(){return r.si(!1)})),new mS(vS.FAILED_PRECONDITION,GS);return n(a)})).next((function(e){return r.wi(a).next((function(){return e}))})):r.Vi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Vi",value:function(e){var t=this;return tO(e).get("owner").next((function(e){if(null!==e&&t.pi(e.leaseTimestampMs,5e3)&&!t.Ei(e.ownerId)&&!t.mi(e)&&!(t.Ys||t.allowTabSynchronization&&e.allowTabSynchronization))throw new mS(vS.FAILED_PRECONDITION,ZD)}))}},{key:"wi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return tO(e).put("owner",t)}},{key:"_i",value:function(e){var t=this,n=tO(e);return n.get("owner").next((function(e){return t.mi(e)?(sS("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):XS.resolve()}))}},{key:"pi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(cS("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ci",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=function(){e.Hs.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.ui()}))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ri",value:function(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}},{key:"ai",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=function(){t.Ai(),!ou()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&navigator.appVersion.match(/Version\/1[45]/)&&t.Hs.enterRestrictedMode(!0),t.Hs.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Zs))}},{key:"bi",value:function(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}},{key:"Ei",value:function(e){var t;try{var n=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return sS("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return cS("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ai",value:function(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(dx){cS("Failed to set zombie client id.",dx)}}},{key:"Pi",value:function(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(dx){}}},{key:"Ti",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"C",value:function(){return ZS.C()}}]),e}();function tO(e){return hP(e,"owner")}function nO(e){return hP(e,"clientMetadata")}function rO(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var iO=function(){function e(t,n,r,i){d(this,e),this.targetId=t,this.fromCache=n,this.Si=r,this.Di=i}return y(e,null,[{key:"Ci",value:function(t,n){var r,i=GA(),a=GA(),o=C(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),aO=function(){function e(){d(this,e),this.xi=!1}return y(e,[{key:"initialize",value:function(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.ki(e,t).next((function(a){return a||i.Oi(e,t,r,n)})).next((function(n){return n||i.Mi(e,t)}))}},{key:"ki",value:function(e,t){var n=this;if(UN(t))return XS.resolve(null);var r=zN(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=KN(t,null,"F"),r=zN(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=GA.apply(void 0,h(i));return n.Ni.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Fi(t,i);return n.$i(t,o,a,r.readTime)?n.ki(e,KN(t,null,"F")):n.Bi(e,o,t,r)}))}))})))}))}},{key:"Oi",value:function(e,t,n,r){var i=this;return UN(t)||r.isEqual(PS.min())?this.Mi(e,t):this.Ni.getDocuments(e,n).next((function(a){var o=i.Fi(t,a);return i.$i(t,o,n,r)?i.Mi(e,t):(uS()<=Yu.DEBUG&&sS("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),QN(t)),i.Bi(e,o,t,zS(r,-1)))}))}},{key:"Fi",value:function(e,t){var n=new bN(XN(e));return t.forEach((function(t,r){$N(e,r)&&(n=n.add(r))})),n}},{key:"$i",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Mi",value:function(e,t){return uS()<=Yu.DEBUG&&sS("QueryEngine","Using full collection scan to execute query:",QN(t)),this.Ni.getDocumentsMatchingQuery(e,t,KS.min())}},{key:"Bi",value:function(e,t,n,r){return this.Ni.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),oO=function(){function e(t,n,r,i){d(this,e),this.persistence=t,this.Li=n,this.yt=i,this.qi=new yN(CS),this.Ui=new MA((function(e){return NN(e)}),AN),this.Ki=new Map,this.Gi=t.getRemoteDocumentCache(),this.Cs=t.getTargetCache(),this.Ns=t.getBundleCache(),this.Qi(r)}return y(e,[{key:"Qi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new jD(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.qi)}))}}]),e}();function uO(e,t,n,r){return new oO(e,t,n,r)}function sO(e,t){return cO.apply(this,arguments)}function cO(){return cO=Ko(zo().mark((function e(t,n){var r;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pS(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Qi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=GA(),s=C(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=C(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=C(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var m,y=C(v.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{ji:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),cO.apply(this,arguments)}function lO(e,t){var n=pS(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Gi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=XS.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);dS(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=GA(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function fO(e){var t=pS(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Cs.getLastRemoteSnapshotVersion(e)}))}function hO(e,t){var n=pS(e),r=t.snapshotVersion,i=n.qi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Gi.newChangeBuffer({trackRemovals:!0});i=n.qi;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Cs.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Cs.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(gC.EMPTY_BYTE_STRING,PS.min()).withLastLimboFreeSnapshotVersion(PS.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Cs.updateTargetData(e,c))}}));var u=UA(),s=GA();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(dO(e,a,t.documentUpdates).next((function(e){u=e.Wi,s=e.zi}))),!r.isEqual(PS.min())){var c=n.Cs.getLastRemoteSnapshotVersion(e).next((function(t){return n.Cs.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return XS.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.qi=i,e}))}function dO(e,t,n){var r=GA(),i=GA();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=UA();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(PS.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):sS("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{Wi:r,zi:i}}))}function pO(e,t){var n=pS(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function vO(e,t){var n=pS(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Cs.getTargetData(e,t).next((function(i){return i?(r=i,XS.resolve(r)):n.Cs.allocateTargetId(e).next((function(i){return r=new mP(t,i,0,e.currentSequenceNumber),n.Cs.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.qi.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.qi=n.qi.insert(e.targetId,e),n.Ui.set(t,e.targetId)),e}))}function mO(e,t,n){return yO.apply(this,arguments)}function yO(){return yO=Ko(zo().mark((function e(t,n,r){var i,a,o;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=pS(t),a=i.qi.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),nC(e.t1)){e.next=12;break}throw e.t1;case 12:sS("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.qi=i.qi.remove(n),i.Ui.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),yO.apply(this,arguments)}function gO(e,t,n){var r=pS(e),i=PS.min(),a=GA();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=pS(e),i=r.Ui.get(n);return void 0!==i?XS.resolve(r.qi.get(i)):r.Cs.getTargetData(t,n)}(r,e,zN(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Li.getDocumentsMatchingQuery(e,t,n?i:PS.min(),n?a:GA())})).next((function(e){return wO(r,YN(t),e),{documents:e,Hi:a}}))}))}function kO(e,t){var n=pS(e),r=pS(n.Cs),i=n.qi.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.ne(e,t).next((function(e){return e?e.target:null}))}))}function bO(e,t){var n=pS(e),r=n.Ki.get(t)||PS.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Gi.getAllFromCollectionGroup(e,t,zS(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return wO(n,t,e),e}))}function wO(e,t,n){var r=e.Ki.get(t)||PS.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ki.set(t,r)}function _O(e,t,n,r){return xO.apply(this,arguments)}function xO(){return xO=Ko(zo().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,h,d,p;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=pS(t),o=GA(),u=UA(),s=C(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Ji(l.metadata.name),l.document&&(o=o.add(f)),(h=n.Yi(l)).setReadTime(n.Xi(l.metadata.readTime)),u=u.insert(f,h)}catch(v){s.e(v)}finally{s.f()}return d=a.Gi.newChangeBuffer({trackRemovals:!0}),e.next=7,vO(a,function(e){return zN(FN(OS.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return dO(e,d,u).next((function(t){return d.apply(e),t})).next((function(t){return a.Cs.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Cs.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.Wi,t.zi)})).next((function(){return t.Wi}))}))})));case 9:case"end":return e.stop()}}),e)}))),xO.apply(this,arguments)}function IO(e,t){return TO.apply(this,arguments)}function TO(){return TO=Ko(zo().mark((function e(t,n){var r,i,a,o=arguments;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:GA(),e.next=3,vO(t,zN(TP(n.bundledQuery)));case 3:return i=e.sent,a=pS(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=hR(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.Ns.saveNamedQuery(e,n);var o=i.withResumeToken(gC.EMPTY_BYTE_STRING,t);return a.qi=a.qi.insert(o.targetId,o),a.Cs.updateTargetData(e,o).next((function(){return a.Cs.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Cs.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.Ns.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),TO.apply(this,arguments)}function EO(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function SO(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function CO(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var NO=function(){function e(t,n,r,i){d(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return y(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new mS(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(cS("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),AO=function(){function e(t,n,r){d(this,e),this.targetId=t,this.state=n,this.error=r}return y(e,[{key:"tr",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new mS(i.error.code,i.error.message))),a?new e(t,i.state,r):(cS("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),RO=function(){function e(t,n){d(this,e),this.clientId=t,this.activeTargetIds=n}return y(e,null,[{key:"Zi",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=$A(),o=0;i&&o<r.activeTargetIds.length;++o)i=yC(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(cS("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),PO=function(){function e(t,n){d(this,e),this.clientId=t,this.onlineState=n}return y(e,null,[{key:"Zi",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(cS("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),DO=function(){function e(){d(this,e),this.activeTargetIds=$A()}return y(e,[{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"nr",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"tr",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),OO=function(){function e(t,n,r,i,a){d(this,e),this.window=t,this.Hs=n,this.persistenceKey=r,this.sr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new yN(CS),this.started=!1,this.cr=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.ar=EO(this.persistenceKey,this.sr),this.hr=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ur=this.ur.insert(this.sr,new DO),this.lr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.dr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this._r=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.wr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.mr=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}return y(e,[{key:"start",value:function(){var e=Ko(zo().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,h=this;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.vi();case 2:t=e.sent,n=C(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.sr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(EO(this.persistenceKey,i)))&&(o=RO.Zi(i,a))&&(this.ur=this.ur.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.gr(),(u=this.storage.getItem(this.wr))&&(s=this.yr(u))&&this.pr(s),c=C(this.cr);try{for(c.s();!(l=c.n()).done;)f=l.value,this.rr(f)}catch(d){c.e(d)}finally{c.f()}this.cr=[],this.window.addEventListener("pagehide",(function(){return h.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.hr,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Ir(this.ur)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ur.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Tr(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Tr(e,t,n),this.Er(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(CO(this.persistenceKey,e));if(n){var r=AO.Zi(e,n);r&&(t=r.state)}}return this.Ar.er(e),this.gr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Ar.nr(e),this.gr()}},{key:"isLocalQueryTarget",value:function(e){return this.Ar.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(CO(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Rr(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Er(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.br(e)}},{key:"notifyBundleLoaded",value:function(e){this.Pr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return sS("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){sS("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){sS("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"rr",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(sS("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ar)return void cS("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable(Ko(zo().mark((function e(){var r,i,a,o,u,s,c;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.lr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.vr(n.key),e.abrupt("return",t.Vr(r,null));case 6:if(!(i=t.Sr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Vr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.dr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Dr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Cr(a));case 16:e.next=41;break;case 18:if(!t._r.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Nr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.kr(o));case 23:e.next=41;break;case 25:if(n.key!==t.wr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.yr(n.newValue))){e.next=30;break}return e.abrupt("return",t.pr(u));case 30:e.next=41;break;case 32:if(n.key!==t.hr){e.next=37;break}s=function(e){var t=cC.at;if(null!=e)try{var n=JSON.parse(e);dS("number"==typeof n),t=n}catch(e){cS("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==cC.at&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t.mr){e.next=41;break}return c=t.Or(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Mr(e)})));case 41:e.next=44;break;case 43:t.cr.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Ar",get:function(){return this.ur.get(this.sr)}},{key:"gr",value:function(){this.setItem(this.ar,this.Ar.tr())}},{key:"Tr",value:function(e,t,n){var r=new NO(this.currentUser,e,t,n),i=SO(this.persistenceKey,this.currentUser,e);this.setItem(i,r.tr())}},{key:"Er",value:function(e){var t=SO(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"br",value:function(e){var t={clientId:this.sr,onlineState:e};this.storage.setItem(this.wr,JSON.stringify(t))}},{key:"Rr",value:function(e,t,n){var r=CO(this.persistenceKey,e),i=new AO(e,t,n);this.setItem(r,i.tr())}},{key:"Pr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}},{key:"vr",value:function(e){var t=this.lr.exec(e);return t?t[1]:null}},{key:"Sr",value:function(e,t){var n=this.vr(e);return RO.Zi(n,t)}},{key:"Dr",value:function(e,t){var n=this.dr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return NO.Zi(new iS(i),r,t)}},{key:"Nr",value:function(e,t){var n=this._r.exec(e),r=Number(n[1]);return AO.Zi(r,t)}},{key:"yr",value:function(e){return PO.Zi(e)}},{key:"Or",value:function(e){return JSON.parse(e)}},{key:"Cr",value:function(){var e=Ko(zo().mark((function e(t){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Fr(t.batchId,t.state,t.error));case 2:sS("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"kr",value:function(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}},{key:"Vr",value:function(e,t){var n=this,r=t?this.ur.insert(e,t):this.ur.remove(e),i=this.Ir(this.ur),a=this.Ir(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Br(o,u).then((function(){n.ur=r}))}},{key:"pr",value:function(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Ir",value:function(e){var t=$A();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"C",value:function(e){return!(!e||!e.localStorage)}}]),e}(),LO=function(){function e(){d(this,e),this.Lr=new DO,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return y(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Lr.er(e),this.qr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.qr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Lr.nr(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.qr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Lr.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Lr.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Lr=new DO,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),MO=function(){function e(){d(this,e)}return y(e,[{key:"Ur",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),FO=function(){function e(){var t=this;d(this,e),this.Kr=function(){return t.Gr()},this.Qr=function(){return t.jr()},this.Wr=[],this.zr()}return y(e,[{key:"Ur",value:function(e){this.Wr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}},{key:"zr",value:function(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}},{key:"Gr",value:function(){sS("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=C(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"jr",value:function(){sS("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=C(this.Wr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),UO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},jO=function(){function e(t){d(this,e),this.Hr=t.Hr,this.Jr=t.Jr}return y(e,[{key:"Yr",value:function(e){this.Xr=e}},{key:"Zr",value:function(e){this.eo=e}},{key:"onMessage",value:function(e){this.no=e}},{key:"close",value:function(){this.Jr()}},{key:"send",value:function(e){this.Hr(e)}},{key:"so",value:function(){this.Xr()}},{key:"io",value:function(e){this.eo(e)}},{key:"ro",value:function(e){this.no(e)}}]),e}(),VO=function(e){k(n,e);var t=I(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return y(n,[{key:"fo",value:function(e,t,n,r){return new Promise((function(i,a){var o=new nS;o.setWithCredentials(!0),o.listenOnce(XE.COMPLETE,(function(){try{switch(o.getLastErrorCode()){case YE.NO_ERROR:var t=o.getResponseJson();sS("Connection","XHR received:",JSON.stringify(t)),i(t);break;case YE.TIMEOUT:sS("Connection",'RPC "'+e+'" timed out'),a(new mS(vS.DEADLINE_EXCEEDED,"Request time out"));break;case YE.HTTP_ERROR:var n=o.getStatus();if(sS("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){var r=o.getResponseJson();Array.isArray(r)&&(r=r[0]);var u=null==r?void 0:r.error;if(u&&u.status&&u.message){var s=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(vS).indexOf(t)>=0?t:vS.UNKNOWN}(u.status);a(new mS(s,u.message))}else a(new mS(vS.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new mS(vS.UNAVAILABLE,"Connection failed."));break;default:hS()}}finally{sS("Connection",'RPC "'+e+'" completed.')}}));var u=JSON.stringify(r);o.send(t,"POST",u,n,15)}))}},{key:"wo",value:function(e,t,n){var r=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=QE(),a=$E(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new eS({})),this.lo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;var u=r.join("");sS("Connection","Creating WebChannel: "+u,o);var s=i.createWebChannel(u,o),c=!1,l=!1,f=new jO({Hr:function(e){l?sS("Connection","Not sending because WebChannel is closed:",e):(c||(sS("Connection","Opening WebChannel transport."),s.open(),c=!0),sS("Connection","WebChannel sending:",e),s.send(e))},Jr:function(){return s.close()}}),h=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return h(s,tS.EventType.OPEN,(function(){l||sS("Connection","WebChannel transport opened.")})),h(s,tS.EventType.CLOSE,(function(){l||(l=!0,sS("Connection","WebChannel transport closed"),f.io())})),h(s,tS.EventType.ERROR,(function(e){l||(l=!0,lS("Connection","WebChannel transport errored:",e),f.io(new mS(vS.UNAVAILABLE,"The operation could not be completed")))})),h(s,tS.EventType.MESSAGE,(function(e){var t;if(!l){var n=e.data[0];dS(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){sS("Connection","WebChannel received error:",i);var a=i.status,o=function(e){var t=NA[e];if(void 0!==t)return LA(t)}(a),u=i.message;void 0===o&&(o=vS.INTERNAL,u="Unknown error status: "+a+" with message "+i.message),l=!0,f.io(new mS(o,u)),s.close()}else sS("Connection","WebChannel received:",n),f.ro(n)}})),h(a,JE.STAT_EVENT,(function(e){e.stat===ZE.PROXY?sS("Connection","Detected buffering proxy"):e.stat===ZE.NOPROXY&&sS("Connection","Detected no buffering proxy")})),setTimeout((function(){f.so()}),0),f}}]),n}(function(){function e(t){d(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.oo=n+"://"+t.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return y(e,[{key:"co",get:function(){return!1}},{key:"ao",value:function(e,t,n,r,i){var a=this.ho(e,t);sS("RestConnection","Sending: ",a,n);var o={};return this.lo(o,r,i),this.fo(e,a,o,n).then((function(e){return sS("RestConnection","Received: ",e),e}),(function(t){throw lS("RestConnection","".concat(e," failed with error: "),t,"url: ",a,"request:",n),t}))}},{key:"_o",value:function(e,t,n,r,i,a){return this.ao(e,t,n,r,i)}},{key:"lo",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+aS,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ho",value:function(e,t){var n=UO[e];return"".concat(this.oo,"/v1/").concat(t,":").concat(n)}}]),e}());function qO(){return"undefined"!=typeof window?window:null}function BO(){return"undefined"!=typeof document?document:null}function zO(e){return new sR(e,!0)}var WO=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;d(this,e),this.Hs=t,this.timerId=n,this.mo=r,this.yo=i,this.po=a,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}return y(e,[{key:"reset",value:function(){this.Io=0}},{key:"Ao",value:function(){this.Io=this.po}},{key:"Ro",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),i=Math.max(0,n-r);i>0&&sS("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Io," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.To=this.Hs.enqueueAfterDelay(this.timerId,i,(function(){return t.Eo=Date.now(),e()})),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}},{key:"Po",value:function(){null!==this.To&&(this.To.skipDelay(),this.To=null)}},{key:"cancel",value:function(){null!==this.To&&(this.To.cancel(),this.To=null)}},{key:"bo",value:function(){return(Math.random()-.5)*this.Io}}]),e}(),KO=function(){function e(t,n,r,i,a,o,u,s){d(this,e),this.Hs=t,this.vo=r,this.Vo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new WO(t,n)}return y(e,[{key:"No",value:function(){return 1===this.state||5===this.state||this.ko()}},{key:"ko",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Oo()}},{key:"stop",value:function(){var e=Ko(zo().mark((function e(){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.No(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Mo",value:function(){this.state=0,this.xo.reset()}},{key:"Fo",value:function(){var e=this;this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,(function(){return e.$o()})))}},{key:"Bo",value:function(e){this.Lo(),this.stream.send(e)}},{key:"$o",value:function(){var e=Ko(zo().mark((function e(){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.ko()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"qo",value:function(){this.Co&&(this.Co.cancel(),this.Co=null)}},{key:"close",value:function(){var e=Ko(zo().mark((function e(t,n){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Lo(),this.qo(),this.xo.cancel(),this.So++,4!==t?this.xo.reset():n&&n.code===vS.RESOURCE_EXHAUSTED?(cS(n.toString()),cS("Using maximum backoff delay to prevent overloading the backend."),this.xo.Ao()):n&&n.code===vS.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Uo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"Uo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Ko(this.So),n=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=l(t,2),i=r[0],a=r[1];e.So===n&&e.Go(i,a)}),(function(n){t((function(){var t=new mS(vS.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Qo(t)}))}))}},{key:"Go",value:function(e,t){var n=this,r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr((function(){r((function(){return n.state=2,n.Co=n.Hs.enqueueAfterDelay(n.Vo,1e4,(function(){return n.ko()&&(n.state=3),Promise.resolve()})),n.listener.Yr()}))})),this.stream.Zr((function(e){r((function(){return n.Qo(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Oo",value:function(){var e=this;this.state=5,this.xo.Ro(Ko(zo().mark((function t(){return zo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Qo",value:function(e){return sS("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Ko",value:function(e){var t=this;return function(n){t.Hs.enqueueAndForget((function(){return t.So===e?n():(sS("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),HO=function(e){k(n,e);var t=I(n);function n(e,r,i,a,o,u){var s;return d(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).yt=o,s}return y(n,[{key:"jo",value:function(e,t){return this.connection.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.xo.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:hS()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.wt?(dS(void 0===t||"string"==typeof t),gC.fromBase64String(t||"")):(dS(void 0===t||t instanceof Uint8Array),gC.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?vS.UNKNOWN:LA(e.code);return new mS(t,e.message||"")}(o);n=new eR(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=mR(e,s.document.name),l=hR(s.document.updateTime),f=s.document.createTime?hR(s.document.createTime):PS.min(),h=new IN({mapValue:{fields:s.document.fields}}),d=EN.newFoundDocument(c,l,f,h),p=s.targetIds||[],v=s.removedTargetIds||[];n=new JA(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=mR(e,m.document),g=m.readTime?hR(m.readTime):PS.min(),k=EN.newNoDocument(y,g),b=m.removedTargetIds||[];n=new JA([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var _=mR(e,w.document),x=w.removedTargetIds||[];n=new JA([],x,_,null)}else{if(!("filter"in t))return hS();t.filter;var I=t.filter;I.targetId;var T=I.count||0,E=new DA(T),S=I.targetId;n=new ZA(S,E)}return n}(this.yt,e),n=function(e){if(!("targetChange"in e))return PS.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?PS.min():t.readTime?hR(t.readTime):PS.min()}(e);return this.listener.Wo(t,n)}},{key:"zo",value:function(e){var t={};t.database=kR(this.yt),t.addTarget=function(e,t){var n,r=t.target;return(n=RN(r)?{documents:ER(e,r)}:{query:SR(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=lR(e,t.resumeToken):t.snapshotVersion.compareTo(PS.min())>0&&(n.readTime=cR(e,t.snapshotVersion.toTimestamp())),n}(this.yt,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return hS()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.yt,e);n&&(t.labels=n),this.Bo(t)}},{key:"Ho",value:function(e){var t={};t.database=kR(this.yt),t.removeTarget=e,this.Bo(t)}}]),n}(KO),GO=function(e){k(n,e);var t=I(n);function n(e,r,i,a,o,u){var s;return d(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).yt=o,s.Jo=!1,s}return y(n,[{key:"Yo",get:function(){return this.Jo}},{key:"start",value:function(){this.Jo=!1,this.lastStreamToken=void 0,Bo(b(n.prototype),"start",this).call(this)}},{key:"Uo",value:function(){this.Jo&&this.Xo([])}},{key:"jo",value:function(e,t){return this.connection.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(dS(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();var t=function(e,t){return e&&e.length>0?(dS(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?hR(e.updateTime):hR(t);return n.isEqual(PS.min())&&(n=hR(t)),new vA(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=hR(e.commitTime);return this.listener.Zo(n,t)}return dS(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}},{key:"eu",value:function(){var e={};e.database=kR(this.yt),this.Bo(e)}},{key:"Xo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return IR(t.yt,e)}))};this.Bo(n)}}]),n}(KO),QO=function(e){k(n,e);var t=I(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.yt=a,o.nu=!1,o}return y(n,[{key:"su",value:function(){if(this.nu)throw new mS(vS.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"ao",value:function(e,t,n){var r=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=l(i,2),o=a[0],u=a[1];return r.connection.ao(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===vS.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new mS(vS.UNKNOWN,e.toString())}))}},{key:"_o",value:function(e,t,n,r){var i=this;return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=l(a,2),u=o[0],s=o[1];return i.connection._o(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===vS.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new mS(vS.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.nu=!0}}]),n}(function(){return y((function e(){d(this,e)}))}());var $O=function(){function e(t,n){d(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}return y(e,[{key:"uu",value:function(){var e=this;0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.ru=null,e.au("Backend didn't respond within 10 seconds."),e.cu("Offline"),Promise.resolve()})))}},{key:"hu",value:function(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.cu("Offline")))}},{key:"set",value:function(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}},{key:"cu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"au",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ou?(cS(t),this.ou=!1):sS("OnlineStateTracker",t)}},{key:"lu",value:function(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}]),e}(),YO=y((function e(t,n,r,i,a){var o=this;d(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=a,this.mu.Ur((function(e){r.enqueueAndForget(Ko(zo().mark((function e(){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=uL(o),!e.t0){e.next=5;break}return sS("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=Ko(zo().mark((function e(t){var n;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=pS(t))._u.add(4),e.next=4,ZO(n);case 4:return n.gu.set("Unknown"),n._u.delete(4),e.next=8,XO(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.gu=new $O(r,i)}));function XO(e){return JO.apply(this,arguments)}function JO(){return JO=Ko(zo().mark((function e(t){var n,r,i;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!uL(t)){e.next=18;break}n=C(t.wu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),JO.apply(this,arguments)}function ZO(e){return eL.apply(this,arguments)}function eL(){return eL=Ko(zo().mark((function e(t){var n,r,i;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=C(t.wu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),eL.apply(this,arguments)}function tL(e,t){var n=pS(e);n.du.has(t.targetId)||(n.du.set(t.targetId,t),oL(n)?aL(n):ML(n).ko()&&rL(n,t))}function nL(e,t){var n=pS(e),r=ML(n);n.du.delete(t),r.ko()&&iL(n,t),0===n.du.size&&(r.ko()?r.Fo():uL(n)&&n.gu.set("Unknown"))}function rL(e,t){e.yu.Ot(t.targetId),ML(e).zo(t)}function iL(e,t){e.yu.Ot(t),ML(e).Ho(t)}function aL(e){e.yu=new nR({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ne:function(t){return e.du.get(t)||null}}),ML(e).start(),e.gu.uu()}function oL(e){return uL(e)&&!ML(e).No()&&e.du.size>0}function uL(e){return 0===pS(e)._u.size}function sL(e){e.yu=void 0}function cL(e){return lL.apply(this,arguments)}function lL(){return lL=Ko(zo().mark((function e(t){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.du.forEach((function(e,n){rL(t,e)}));case 1:case"end":return e.stop()}}),e)}))),lL.apply(this,arguments)}function fL(e,t){return hL.apply(this,arguments)}function hL(){return hL=Ko(zo().mark((function e(t,n){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:sL(t),oL(t)?(t.gu.hu(n),aL(t)):t.gu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),hL.apply(this,arguments)}function dL(e,t,n){return pL.apply(this,arguments)}function pL(){return pL=Ko(zo().mark((function e(t,n,r){var i;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.gu.set("Online"),!(n instanceof eR&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=Ko(zo().mark((function e(t,n){var r,i,a,o;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=C(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.du.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.du.delete(o),t.yu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),sS("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,vL(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof JA?t.yu.Kt(n):n instanceof ZA?t.yu.Jt(n):t.yu.jt(n),r.isEqual(PS.min())){e.next=29;break}return e.prev=14,e.next=17,fO(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.yu.Zt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.du.get(r);i&&e.du.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.du.get(t);if(n){e.du.set(t,n.withResumeToken(gC.EMPTY_BYTE_STRING,n.snapshotVersion)),iL(e,t);var r=new mP(n.target,t,1,n.sequenceNumber);rL(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),sS("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,vL(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),pL.apply(this,arguments)}function vL(e,t,n){return mL.apply(this,arguments)}function mL(){return mL=Ko(zo().mark((function e(t,n,r){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(nC(n)){e.next=2;break}throw n;case 2:return t._u.add(1),e.next=5,ZO(t);case 5:t.gu.set("Offline"),r||(r=function(){return fO(t.localStore)}),t.asyncQueue.enqueueRetryable(Ko(zo().mark((function e(){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sS("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t._u.delete(1),e.next=6,XO(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),mL.apply(this,arguments)}function yL(e,t){return t().catch((function(n){return vL(e,n,t)}))}function gL(e){return kL.apply(this,arguments)}function kL(){return kL=Ko(zo().mark((function e(t){var n,r,i,a;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=pS(t),r=FL(n),i=n.fu.length>0?n.fu[n.fu.length-1].batchId:-1;case 2:if(!bL(n)){e.next=19;break}return e.prev=3,e.next=6,pO(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.fu.length&&r.Fo(),e.abrupt("break",19);case 10:i=a.batchId,wL(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,vL(n,e.t0);case 17:e.next=2;break;case 19:_L(n)&&xL(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),kL.apply(this,arguments)}function bL(e){return uL(e)&&e.fu.length<10}function wL(e,t){e.fu.push(t);var n=FL(e);n.ko()&&n.Yo&&n.Xo(t.mutations)}function _L(e){return uL(e)&&!FL(e).No()&&e.fu.length>0}function xL(e){FL(e).start()}function IL(e){return TL.apply(this,arguments)}function TL(){return TL=Ko(zo().mark((function e(t){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:FL(t).eu();case 1:case"end":return e.stop()}}),e)}))),TL.apply(this,arguments)}function EL(e){return SL.apply(this,arguments)}function SL(){return SL=Ko(zo().mark((function e(t){var n,r,i,a;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=FL(t),r=C(t.fu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Xo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),SL.apply(this,arguments)}function CL(e,t,n){return NL.apply(this,arguments)}function NL(){return NL=Ko(zo().mark((function e(t,n,r){var i,a;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.fu.shift(),a=pP.from(i,n,r),e.next=3,yL(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,gL(t);case 5:case"end":return e.stop()}}),e)}))),NL.apply(this,arguments)}function AL(e,t){return RL.apply(this,arguments)}function RL(){return RL=Ko(zo().mark((function e(t,n){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&FL(t).Yo,!e.t0){e.next=4;break}return e.next=4,function(){var e=Ko(zo().mark((function e(t,n){var r,i;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!OA(i=n.code)||i===vS.ABORTED){e.next=7;break}return r=t.fu.shift(),FL(t).Mo(),e.next=5,yL(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,gL(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:_L(t)&&xL(t);case 5:case"end":return e.stop()}}),e)}))),RL.apply(this,arguments)}function PL(e,t){return DL.apply(this,arguments)}function DL(){return DL=Ko(zo().mark((function e(t,n){var r,i;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=pS(t)).asyncQueue.verifyOperationInProgress(),sS("RemoteStore","RemoteStore received new credentials"),i=uL(r),r._u.add(3),e.next=6,ZO(r);case 6:return i&&r.gu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r._u.delete(3),e.next=12,XO(r);case 12:case"end":return e.stop()}}),e)}))),DL.apply(this,arguments)}function OL(e,t){return LL.apply(this,arguments)}function LL(){return LL=Ko(zo().mark((function e(t,n){var r;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=pS(t),!n){e.next=7;break}return r._u.delete(2),e.next=5,XO(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r._u.add(2),e.next=12,ZO(r);case 12:r.gu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),LL.apply(this,arguments)}function ML(e){return e.pu||(e.pu=function(e,t,n){var r=pS(e);return r.su(),new HO(t,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,n)}(e.datastore,e.asyncQueue,{Yr:cL.bind(null,e),Zr:fL.bind(null,e),Wo:dL.bind(null,e)}),e.wu.push(function(){var t=Ko(zo().mark((function t(n){return zo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.pu.Mo(),oL(e)?aL(e):e.gu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.pu.stop();case 6:sL(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.pu}function FL(e){return e.Iu||(e.Iu=function(e,t,n){var r=pS(e);return r.su(),new GO(t,r.connection,r.authCredentials,r.appCheckCredentials,r.yt,n)}(e.datastore,e.asyncQueue,{Yr:IL.bind(null,e),Zr:AL.bind(null,e),tu:EL.bind(null,e),Zo:CL.bind(null,e)}),e.wu.push(function(){var t=Ko(zo().mark((function t(n){return zo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Iu.Mo(),t.next=4,gL(e);case 4:t.next=9;break;case 6:return t.next=8,e.Iu.stop();case 8:e.fu.length>0&&(sS("RemoteStore","Stopping write stream with ".concat(e.fu.length," pending writes")),e.fu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.Iu}var UL=function(){function e(t,n,r,i,a){d(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new yS,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return y(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new mS(vS.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function jL(e,t){if(cS("AsyncQueue","".concat(t,": ").concat(e)),nC(e))return new mS(vS.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var VL=function(){function e(t){d(this,e),this.comparator=t?function(e,n){return t(e,n)||FS.comparator(e.key,n.key)}:function(e,t){return FS.comparator(e.key,t.key)},this.keyedMap=VA(),this.sortedSet=new yN(this.comparator)}return y(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),qL=function(){function e(){d(this,e),this.Tu=new yN(FS.comparator)}return y(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Tu.get(t);n?0!==e.type&&3===n.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==n.type?this.Tu=this.Tu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Tu=this.Tu.remove(t):1===e.type&&2===n.type?this.Tu=this.Tu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):hS():this.Tu=this.Tu.insert(t,e)}},{key:"Eu",value:function(){var e=[];return this.Tu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),BL=function(){function e(t,n,r,i,a,o,u,s,c){d(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return y(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&HN(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,VL.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),zL=y((function e(){d(this,e),this.Au=void 0,this.listeners=[]})),WL=y((function e(){d(this,e),this.queries=new MA((function(e){return GN(e)}),HN),this.onlineState="Unknown",this.Ru=new Set}));function KL(e,t){return HL.apply(this,arguments)}function HL(){return HL=Ko(zo().mark((function e(t,n){var r,i,a,o,u;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=pS(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new zL),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Au=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=jL(e.t0,"Initialization of query '".concat(QN(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.bu(r.onlineState),o.Au&&n.Pu(o.Au)&&XL(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),HL.apply(this,arguments)}function GL(e,t){return QL.apply(this,arguments)}function QL(){return QL=Ko(zo().mark((function e(t,n){var r,i,a,o,u;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=pS(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),QL.apply(this,arguments)}function $L(e,t){var n,r=pS(e),i=!1,a=C(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=C(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.Pu(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Au=o}}}catch(f){a.e(f)}finally{a.f()}i&&XL(r)}function YL(e,t,n){var r=pS(e),i=r.queries.get(t);if(i){var a,o=C(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function XL(e){e.Ru.forEach((function(e){e.next()}))}var JL=function(){function e(t,n,r){d(this,e),this.query=t,this.vu=n,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}return y(e,[{key:"Pu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=C(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new BL(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),a=!0):this.Cu(e,this.onlineState)&&(this.xu(e),a=!0),this.Su=e,a}},{key:"onError",value:function(e){this.vu.error(e)}},{key:"bu",value:function(e){this.onlineState=e;var t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}},{key:"Cu",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Nu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Du",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"xu",value:function(e){e=BL.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}]),e}(),ZL=function(){function e(t,n){d(this,e),this.ku=t,this.byteLength=n}return y(e,[{key:"Ou",value:function(){return"metadata"in this.ku}}]),e}(),eM=function(){function e(t){d(this,e),this.yt=t}return y(e,[{key:"Ji",value:function(e){return mR(this.yt,e)}},{key:"Yi",value:function(e){return e.metadata.exists?_R(this.yt,e.document,!1):EN.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}},{key:"Xi",value:function(e){return hR(e)}}]),e}(),tM=function(){function e(t,n,r){d(this,e),this.Mu=t,this.localStore=n,this.yt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=nM(t)}return y(e,[{key:"Fu",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;var n=OS.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"$u",value:function(e){var t,n=new Map,r=new eM(this.yt),i=C(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Ji(a.metadata.name),s=C(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||GA()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=Ko(zo().mark((function e(){var t,n,r,i,a;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_O(this.localStore,new eM(this.yt),this.documents,this.Mu.id);case 2:t=e.sent,n=this.$u(this.documents),r=C(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,IO(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Bu:this.collectionGroups,Lu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function nM(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var rM=y((function e(t){d(this,e),this.key=t})),iM=y((function e(t){d(this,e),this.key=t})),aM=function(){function e(t,n){d(this,e),this.query=t,this.qu=n,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=GA(),this.mutatedKeys=GA(),this.Gu=XN(t),this.Qu=new VL(this.Gu)}return y(e,[{key:"ju",get:function(){return this.qu}},{key:"Wu",value:function(e,t){var n=this,r=t?t.zu:new qL,i=t?t.Qu:this.Qu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=$N(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Hu(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.Gu(f,s)>0||c&&n.Gu(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Qu:o,zu:r,$i:u,mutatedKeys:a}}},{key:"Hu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;var a=e.zu.Eu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return hS()}};return n(e)-n(t)}(e.type,t.type)||r.Gu(e.doc,t.doc)})),this.Ju(n);var o=t?this.Yu():[],u=0===this.Ku.size&&this.current?1:0,s=u!==this.Uu;return this.Uu=u,0!==a.length||s?{snapshot:new BL(this.query,e.Qu,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),Xu:o}:{Xu:o}}},{key:"bu",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new qL,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}},{key:"Zu",value:function(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}},{key:"Ju",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.qu=t.qu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.qu=t.qu.delete(e)})),this.current=e.current)}},{key:"Yu",value:function(){var e=this;if(!this.current)return[];var t=this.Ku;this.Ku=GA(),this.Qu.forEach((function(t){e.Zu(t.key)&&(e.Ku=e.Ku.add(t.key))}));var n=[];return t.forEach((function(t){e.Ku.has(t)||n.push(new iM(t))})),this.Ku.forEach((function(e){t.has(e)||n.push(new rM(e))})),n}},{key:"tc",value:function(e){this.qu=e.Hi,this.Ku=GA();var t=this.Wu(e.documents);return this.applyChanges(t,!0)}},{key:"ec",value:function(){return BL.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}]),e}(),oM=y((function e(t,n,r){d(this,e),this.query=t,this.targetId=n,this.view=r})),uM=y((function e(t){d(this,e),this.key=t,this.nc=!1})),sM=function(){function e(t,n,r,i,a,o){d(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.sc={},this.ic=new MA((function(e){return GN(e)}),HN),this.rc=new Map,this.oc=new Set,this.uc=new yN(FS.comparator),this.cc=new Map,this.ac=new BD,this.hc={},this.lc=new Map,this.fc=gD.vn(),this.onlineState="Unknown",this.dc=void 0}return y(e,[{key:"isPrimaryClient",get:function(){return!0===this.dc}}]),e}();function cM(e,t){return lM.apply(this,arguments)}function lM(){return lM=Ko(zo().mark((function e(t,n){var r,i,a,o,u,s;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=nF(t),!(o=r.ic.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.ec(),e.next=15;break;case 6:return e.next=8,vO(r.localStore,zN(n));case 8:return u=e.sent,r.isPrimaryClient&&tL(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,fM(r,n,i,"current"===s,u.resumeToken);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),lM.apply(this,arguments)}function fM(e,t,n,r,i){return hM.apply(this,arguments)}function hM(){return hM=Ko(zo().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._c=function(e,n,r){return function(){var e=Ko(zo().mark((function e(t,n,r,i){var a,o,u;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.Wu(r),e.t0=a.$i,!e.t0){e.next=6;break}return e.next=5,gO(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.Wu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(PM(t,n.targetId,u.Xu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,gO(t.localStore,n,!0);case 3:return o=e.sent,u=new aM(n,o.Hi),s=u.Wu(o.documents),c=XA.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),PM(t,r,l.Xu),f=new oM(n,r,u),e.abrupt("return",(t.ic.set(n,f),t.rc.has(r)?t.rc.get(r).push(n):t.rc.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),hM.apply(this,arguments)}function dM(e,t){return pM.apply(this,arguments)}function pM(){return pM=Ko(zo().mark((function e(t,n){var r,i,a;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=pS(t),i=r.ic.get(n),!((a=r.rc.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.rc.set(i.targetId,a.filter((function(e){return!HN(e,n)}))),void r.ic.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,mO(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),nL(r.remoteStore,i.targetId),AM(r,i.targetId)})).catch($S);case 9:e.next=14;break;case 11:return AM(r,i.targetId),e.next=14,mO(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),pM.apply(this,arguments)}function vM(e,t,n){return mM.apply(this,arguments)}function mM(){return mM=Ko(zo().mark((function e(t,n,r){var i,a,o;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=rF(t),e.prev=1,e.next=4,function(e,t){var n,r,i=pS(e),a=RS.now(),o=t.reduce((function(e,t){return e.add(t.key)}),GA());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=UA(),s=GA();return i.Gi.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=C(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=_A(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new TA(c.key,l,TN(l.value.mapValue),mA.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:qA(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.hc[e.currentUser.toKey()];r||(r=new yN(CS)),r=r.insert(t,n),e.hc[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,LM(i,a.changes);case 9:return e.next=11,gL(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=jL(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),mM.apply(this,arguments)}function yM(e,t){return gM.apply(this,arguments)}function gM(){return gM=Ko(zo().mark((function e(t,n){var r,i;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pS(t),e.prev=1,e.next=4,hO(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.cc.get(t);n&&(dS(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.nc=!0:e.modifiedDocuments.size>0?dS(n.nc):e.removedDocuments.size>0&&(dS(n.nc),n.nc=!1))})),e.next=8,LM(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,$S(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),gM.apply(this,arguments)}function kM(e,t,n){var r=pS(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ic.forEach((function(e,n){var r=n.view.bu(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=pS(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=C(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.bu(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&XL(n)}(r.eventManager,t),i.length&&r.sc.Wo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function bM(e,t,n){return wM.apply(this,arguments)}function wM(){return wM=Ko(zo().mark((function e(t,n,r){var i,a,o,u,s,c;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=pS(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.cc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new yN(FS.comparator)).insert(o,EN.newNoDocument(o,PS.min())),s=GA().add(o),c=new YA(PS.min(),new Map,new bN(CS),u,s),e.next=9,yM(i,c);case 9:i.uc=i.uc.remove(o),i.cc.delete(n),OM(i),e.next=16;break;case 14:return e.next=16,mO(i.localStore,n,!1).then((function(){return AM(i,n,r)})).catch($S);case 16:case"end":return e.stop()}}),e)}))),wM.apply(this,arguments)}function _M(e,t){return xM.apply(this,arguments)}function xM(){return xM=Ko(zo().mark((function e(t,n){var r,i,a;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pS(t),i=n.batch.batchId,e.prev=1,e.next=4,lO(r.localStore,n);case 4:return a=e.sent,NM(r,i,null),CM(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,LM(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,$S(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),xM.apply(this,arguments)}function IM(e,t,n){return TM.apply(this,arguments)}function TM(){return TM=Ko(zo().mark((function e(t,n,r){var i,a;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=pS(t),e.prev=1,e.next=4,function(e,t){var n=pS(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return dS(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,NM(i,n,r),CM(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,LM(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,$S(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),TM.apply(this,arguments)}function EM(e,t){return SM.apply(this,arguments)}function SM(){return SM=Ko(zo().mark((function e(t,n){var r,i,a,o;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return uL((r=pS(t)).remoteStore)||sS("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=pS(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.lc.get(i)||[]).push(n),r.lc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=jL(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),SM.apply(this,arguments)}function CM(e,t){(e.lc.get(t)||[]).forEach((function(e){e.resolve()})),e.lc.delete(t)}function NM(e,t,n){var r=pS(e),i=r.hc[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.hc[r.currentUser.toKey()]=i}}function AM(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=C(e.rc.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ic.delete(a),n&&e.sc.wc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.rc.delete(t),e.isPrimaryClient&&e.ac.ls(t).forEach((function(t){e.ac.containsKey(t)||RM(e,t)}))}function RM(e,t){e.oc.delete(t.path.canonicalString());var n=e.uc.get(t);null!==n&&(nL(e.remoteStore,n),e.uc=e.uc.remove(t),e.cc.delete(n),OM(e))}function PM(e,t,n){var r,i=C(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof rM?(e.ac.addReference(a.key,t),DM(e,a)):a instanceof iM?(sS("SyncEngine","Document no longer in limbo: "+a.key),e.ac.removeReference(a.key,t),e.ac.containsKey(a.key)||RM(e,a.key)):hS()}}catch(o){i.e(o)}finally{i.f()}}function DM(e,t){var n=t.key,r=n.path.canonicalString();e.uc.get(n)||e.oc.has(r)||(sS("SyncEngine","New document in limbo: "+n),e.oc.add(r),OM(e))}function OM(e){for(;e.oc.size>0&&e.uc.size<e.maxConcurrentLimboResolutions;){var t=e.oc.values().next().value;e.oc.delete(t);var n=new FS(OS.fromString(t)),r=e.fc.next();e.cc.set(r,new uM(n)),e.uc=e.uc.insert(n,r),tL(e.remoteStore,new mP(zN(FN(n.path)),r,2,cC.at))}}function LM(e,t,n){return MM.apply(this,arguments)}function MM(){return MM=Ko(zo().mark((function e(t,n,r){var i,a,o,u;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=pS(t),a=[],o=[],u=[],e.t0=i.ic.isEmpty(),e.t0){e.next=9;break}return i.ic.forEach((function(e,t){u.push(i._c(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=iO.Ci(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.sc.Wo(a),e.next=9,function(){var e=Ko(zo().mark((function e(t,n){var r,i,a,o,u,s,c,l;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pS(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return XS.forEach(n,(function(t){return XS.forEach(t.Si,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return XS.forEach(t.Di,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),nC(e.t0)){e.next=10;break}throw e.t0;case 10:sS("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=C(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.qi.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.qi=r.qi.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),MM.apply(this,arguments)}function FM(e,t){return UM.apply(this,arguments)}function UM(){return UM=Ko(zo().mark((function e(t,n){var r,i;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=pS(t)).currentUser.isEqual(n)){e.next=11;break}return sS("SyncEngine","User change. New user:",n.toKey()),e.next=5,sO(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.lc.forEach((function(e){e.forEach((function(e){e.reject(new mS(vS.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.lc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,LM(r,i.ji);case 11:case"end":return e.stop()}}),e)}))),UM.apply(this,arguments)}function jM(e,t){var n=pS(e),r=n.cc.get(t);if(r&&r.nc)return GA().add(r.key);var i=GA(),a=n.rc.get(t);if(!a)return i;var o,u=C(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ic.get(s);i=i.unionWith(c.view.ju)}}catch(l){u.e(l)}finally{u.f()}return i}function VM(e,t){return qM.apply(this,arguments)}function qM(){return qM=Ko(zo().mark((function e(t,n){var r,i,a;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pS(t),e.next=3,gO(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.tc(i),e.abrupt("return",(r.isPrimaryClient&&PM(r,n.targetId,a.Xu),a));case 6:case"end":return e.stop()}}),e)}))),qM.apply(this,arguments)}function BM(e,t){return zM.apply(this,arguments)}function zM(){return zM=Ko(zo().mark((function e(t,n){var r;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pS(t),e.abrupt("return",bO(r.localStore,n).then((function(e){return LM(r,e)})));case 2:case"end":return e.stop()}}),e)}))),zM.apply(this,arguments)}function WM(e,t,n,r){return KM.apply(this,arguments)}function KM(){return KM=Ko(zo().mark((function e(t,n,r,i){var a,o;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=pS(t),e.next=3,function(e,t){var n=pS(e),r=pS(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Tn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):XS.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,gL(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(NM(a,n,i||null),CM(a,n),function(e,t){pS(pS(e).mutationQueue).An(t)}(a.localStore,n)):hS();case 11:return e.next=13,LM(a,o);case 13:e.next=16;break;case 15:sS("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),KM.apply(this,arguments)}function HM(e,t){return GM.apply(this,arguments)}function GM(){return GM=Ko(zo().mark((function e(t,n){var r,i,a,o,u,s,c,l;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(nF(r=pS(t)),rF(r),!0!==n||!0===r.dc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,QM(r,i.toArray());case 5:return a=e.sent,r.dc=!0,e.next=9,OL(r.remoteStore,!0);case 9:o=C(a);try{for(o.s();!(u=o.n()).done;)s=u.value,tL(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.dc){e.next=25;break}return c=[],l=Promise.resolve(),r.rc.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return AM(r,t),mO(r.localStore,t,!0)})),nL(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,QM(r,c);case 21:return function(e){var t=pS(e);t.cc.forEach((function(e,n){nL(t.remoteStore,n)})),t.ac.fs(),t.cc=new Map,t.uc=new yN(FS.comparator)}(r),r.dc=!1,e.next=25,OL(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),GM.apply(this,arguments)}function QM(e,t,n){return $M.apply(this,arguments)}function $M(){return $M=Ko(zo().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h,d,p,v,m,y;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=pS(t),a=[],o=[],u=C(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.rc.get(c))||0===f.length){e.next=34;break}return e.next=11,vO(i.localStore,zN(f[0]));case 11:l=e.sent,h=C(f),e.prev=13,h.s();case 15:if((d=h.n()).done){e.next=24;break}return p=d.value,v=i.ic.get(p),e.next=20,VM(i,v);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),h.e(e.t0);case 29:return e.prev=29,h.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,kO(i.localStore,c);case 36:return y=e.sent,e.next=39,vO(i.localStore,y);case 39:return l=e.sent,e.next=42,fM(i,YM(y),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.sc.Wo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),$M.apply(this,arguments)}function YM(e){return MN(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function XM(e){var t=pS(e);return pS(pS(t.localStore).persistence).vi()}function JM(e,t,n,r){return ZM.apply(this,arguments)}function ZM(){return ZM=Ko(zo().mark((function e(t,n,r,i){var a,o,u,s;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=pS(t)).dc){e.next=3;break}return e.abrupt("return",void sS("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.rc.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,bO(a.localStore,YN(o[0]));case 10:return u=e.sent,s=YA.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,gC.EMPTY_BYTE_STRING),e.next=14,LM(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,mO(a.localStore,n,!0);case 17:return AM(a,n,i),e.abrupt("break",20);case 19:hS();case 20:case"end":return e.stop()}}),e)}))),ZM.apply(this,arguments)}function eF(e,t,n){return tF.apply(this,arguments)}function tF(){return tF=Ko(zo().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,h;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=nF(t)).dc){e.next=45;break}a=C(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.rc.has(u)){e.next=10;break}return sS("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,kO(i.localStore,u);case 12:return s=e.sent,e.next=15,vO(i.localStore,s);case 15:return c=e.sent,e.next=18,fM(i,YM(s),c.targetId,!1,c.resumeToken);case 18:tL(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=C(r),e.prev=30,h=zo().mark((function e(){var t;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.rc.has(t),!e.t0){e.next=5;break}return e.next=5,mO(i.localStore,t,!1).then((function(){nL(i.remoteStore,t),AM(i,t)})).catch($S);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(h(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),tF.apply(this,arguments)}function nF(e){var t=pS(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=yM.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=jM.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=bM.bind(null,t),t.sc.Wo=$L.bind(null,t.eventManager),t.sc.wc=YL.bind(null,t.eventManager),t}function rF(e){var t=pS(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=_M.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=IM.bind(null,t),t}function iF(e,t,n){var r=pS(e);(function(){var e=Ko(zo().mark((function e(t,n,r){var i,a,o,u,s;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=pS(e),r=hR(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ns.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(nM(i)),a=new tM(i,t.localStore,n.yt),e.next=15,n.mc();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.Fu(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n.mc();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,LM(t,s.Lu,void 0);case 31:return e.next=33,function(e,t){var n=pS(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ns.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Bu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(lS("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var aF=function(){function e(){d(this,e),this.synchronizeTabs=!1}return y(e,[{key:"initialize",value:function(){var e=Ko(zo().mark((function e(t){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.yt=zO(t.databaseInfo.databaseId),this.sharedClientState=this.gc(t),this.persistence=this.yc(t),e.next=5,this.persistence.start();case 5:this.localStore=this.Ic(t),this.gcScheduler=this.Tc(t,this.localStore),this.indexBackfillerScheduler=this.Ec(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Tc",value:function(e,t){return null}},{key:"Ec",value:function(e,t){return null}},{key:"Ic",value:function(e){return uO(this.persistence,new aO,e.initialUser,this.yt)}},{key:"yc",value:function(e){return new QD(YD.Bs,this.yt)}},{key:"gc",value:function(e){return new LO}},{key:"terminate",value:function(){var e=Ko(zo().mark((function e(){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),oF=function(e){k(n,e);var t=I(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).Ac=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return y(n,[{key:"initialize",value:function(){var e=Ko(zo().mark((function e(t){var r=this;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bo(b(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Ac.initialize(this,t);case 4:return e.next=6,rF(this.Ac.syncEngine);case 6:return e.next=8,gL(this.Ac.remoteStore);case 8:return e.next=10,this.persistence.li((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Ic",value:function(e){return uO(this.persistence,new aO,e.initialUser,this.yt)}},{key:"Tc",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new TD(n,e.asyncQueue,t)}},{key:"Ec",value:function(e,t){var n=new sC(t,this.persistence);return new uC(e.asyncQueue,n)}},{key:"yc",value:function(e){var t=rO(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?lD.withCacheSize(this.cacheSizeBytes):lD.DEFAULT;return new eO(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,qO(),BO(),this.yt,this.sharedClientState,!!this.forceOwnership)}},{key:"gc",value:function(e){return new LO}}]),n}(aF),uF=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r,!1)).Ac=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return y(n,[{key:"initialize",value:function(){var e=Ko(zo().mark((function e(t){var r,i=this;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Bo(b(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Ac.syncEngine,e.t0=this.sharedClientState instanceof OO,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Fr:WM.bind(null,r),$r:JM.bind(null,r),Br:eF.bind(null,r),vi:XM.bind(null,r),Mr:BM.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.li(function(){var e=Ko(zo().mark((function e(t){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,HM(i.Ac.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"gc",value:function(e){var t=qO();if(!OO.C(t))throw new mS(vS.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=rO(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new OO(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(oF),sF=function(){function e(){d(this,e)}return y(e,[{key:"initialize",value:function(){var e=Ko(zo().mark((function e(t,n){var r=this;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return kM(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=FM.bind(null,this.syncEngine),e.next=12,OL(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new WL}},{key:"createDatastore",value:function(e){var t,n=zO(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new VO(t));return function(e,t,n,r){return new QO(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return kM(o.syncEngine,e,0)},a=FO.C()?new FO:new MO,new YO(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new sM(e,t,n,r,i,a);return o&&(u.dc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=Ko(zo().mark((function e(t){var n;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=pS(t),sS("RemoteStore","RemoteStore shutting down."),n._u.add(5),e.next=5,ZO(n);case 5:n.mu.shutdown(),n.gu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function cF(e,t,n){if(!n)throw new mS(vS.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function lF(e,t,n,r){if(!0===t&&!0===r)throw new mS(vS.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function fF(e){if(!FS.isDocumentKey(e))throw new mS(vS.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function hF(e){if(FS.isDocumentKey(e))throw new mS(vS.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function dF(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":hS()}function pF(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new mS(vS.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=dF(e);throw new mS(vS.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function vF(e,t){if(t<=0)throw new mS(vS.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var mF=new Map,yF=function(){function e(t){var n;if(d(this,e),void 0===t.host){if(void 0!==t.ssl)throw new mS(vS.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new mS(vS.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,lF("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return y(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),gF=function(){function e(t,n,r,i){d(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new yF({}),this._settingsFrozen=!1}return y(e,[{key:"app",get:function(){if(!this._app)throw new mS(vS.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new mS(vS.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new yF(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new kS;switch(e.type){case"gapi":var t=e.client;return new xS(t,e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new mS(vS.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=mF.get(e);t&&(sS("ComponentProvider","Removing Datastore"),mF.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function kF(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=pF(e,gF))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&lS("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=iS.MOCK_USER;else{o=bu(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new mS(vS.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new iS(s)}e._authCredentials=new bS(new gS(o,u))}}var bF=function(){function e(t,n,r){d(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return y(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new _F(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),wF=function(){function e(t,n,r){d(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return y(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),_F=function(e){k(n,e);var t=I(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this,e,r,FN(i)))._path=i,a.type="collection",a}return y(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new bF(this.firestore,null,new FS(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(wF);function xF(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ku(e),cF("collection","path",t),e instanceof gF){var a=OS.fromString.apply(OS,[t].concat(r));return hF(a),new _F(e,null,a)}if(!(e instanceof bF||e instanceof _F))throw new mS(vS.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(OS.fromString.apply(OS,[t].concat(r)));return hF(o),new _F(e.firestore,null,o)}function IF(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Ku(e),1===arguments.length&&(t=SS.R()),cF("doc","path",t),e instanceof gF){var a=OS.fromString.apply(OS,[t].concat(r));return fF(a),new bF(e,null,new FS(a))}if(!(e instanceof bF||e instanceof _F))throw new mS(vS.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(OS.fromString.apply(OS,[t].concat(r)));return fF(o),new bF(e.firestore,e instanceof _F?e.converter:null,new FS(o))}function TF(e,t){return e=Ku(e),t=Ku(t),(e instanceof bF||e instanceof _F)&&(t instanceof bF||t instanceof _F)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function EF(e,t){return e=Ku(e),t=Ku(t),e instanceof wF&&t instanceof wF&&e.firestore===t.firestore&&HN(e._query,t._query)&&e.converter===t.converter}function SF(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return Ko(zo().mark((function r(){var i;return zo().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return Ko(zo().mark((function e(){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var CF=function(){function e(t){d(this,e),this.observer=t,this.muted=!1}return y(e,[{key:"next",value:function(e){this.observer.next&&this.Rc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Rc(this.observer.error,e):cS("Uncaught Error in snapshot listener:",e.toString())}},{key:"bc",value:function(){this.muted=!0}},{key:"Rc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),NF=function(){function e(t,n){var r=this;d(this,e),this.Pc=t,this.yt=n,this.metadata=new yS,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then((function(e){e&&e.Ou()?r.metadata.resolve(e.ku.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.ku))))}),(function(e){return r.metadata.reject(e)}))}return y(e,[{key:"close",value:function(){return this.Pc.cancel()}},{key:"getMetadata",value:function(){var e=Ko(zo().mark((function e(){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"mc",value:function(){var e=Ko(zo().mark((function e(){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Vc());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Vc",value:function(){var e=Ko(zo().mark((function e(){var t,n,r,i;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Sc();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.vc.decode(t),r=Number(n),isNaN(r)&&this.Dc("length string (".concat(n,") is not valid number")),e.next=9,this.Cc(r);case 9:return i=e.sent,e.abrupt("return",new ZL(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"xc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Sc",value:function(){var e=Ko(zo().mark((function e(){var t,n;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.xc()<0)){e.next=7;break}return e.next=3,this.Nc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.xc())<0&&this.Dc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Cc",value:function(){var e=Ko(zo().mark((function e(t){var n;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Nc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Dc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.vc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Dc",value:function(e){throw this.Pc.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Nc",value:function(){var e=Ko(zo().mark((function e(){var t,n;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Pc.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),AF=function(){function e(t){d(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return y(e,[{key:"lookup",value:function(){var e=Ko(zo().mark((function e(t){var n,r=this;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new mS(vS.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=Ko(zo().mark((function e(t,n){var r,i,a,o,u,s;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pS(t),i=kR(r.yt)+"/documents",a={documents:n.map((function(e){return vR(r.yt,e)}))},e.next=5,r._o("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=xR(r.yt,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());dS(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new RA(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=Ko(zo().mark((function e(){var t,n=this;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=FS.fromPath(t);n.mutations.push(new PA(r,n.precondition(r)))})),e.next=7,function(){var e=Ko(zo().mark((function e(t,n){var r,i,a;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=pS(t),i=kR(r.yt)+"/documents",a={writes:n.map((function(e){return IR(r.yt,e)}))},e.next=3,r.ao("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw hS();t=PS.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new mS(vS.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(PS.min())?mA.exists(!1):mA.updateTime(t):mA.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(PS.min()))throw new mS(vS.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return mA.updateTime(t)}return mA.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),RF=function(){function e(t,n,r,i,a){d(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.kc=r.maxAttempts,this.xo=new WO(this.asyncQueue,"transaction_retry")}return y(e,[{key:"run",value:function(){this.kc-=1,this.Oc()}},{key:"Oc",value:function(){var e=this;this.xo.Ro(Ko(zo().mark((function t(){var n,r;return zo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new AF(e.datastore),(r=e.Mc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Fc(t)}))}))})).catch((function(t){e.Fc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Mc",value:function(e){try{var t=this.updateFunction(e);return!vC(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Fc",value:function(e){var t=this;this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Oc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"$c",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!OA(t)}return!1}}]),e}(),PF=function(){function e(t,n,r,i){var a=this;d(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=iS.UNAUTHENTICATED,this.clientId=SS.R(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=Ko(zo().mark((function e(t){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return sS("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return sS("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return y(e,[{key:"getConfiguration",value:function(){var e=Ko(zo().mark((function e(){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new mS(vS.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new yS;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(Ko(zo().mark((function n(){var r;return zo().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=jL(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function DF(e,t){return OF.apply(this,arguments)}function OF(){return OF=Ko(zo().mark((function e(t,n){var r,i;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),sS("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=Ko(zo().mark((function e(t){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,sO(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),OF.apply(this,arguments)}function LF(e,t){return MF.apply(this,arguments)}function MF(){return MF=Ko(zo().mark((function e(t,n){var r,i;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,FF(t);case 3:return r=e.sent,sS("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return PL(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return PL(n.remoteStore,t)})),t.onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),MF.apply(this,arguments)}function FF(e){return UF.apply(this,arguments)}function UF(){return UF=Ko(zo().mark((function e(t){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return sS("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,DF(t,new aF);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}}),e)}))),UF.apply(this,arguments)}function jF(e){return VF.apply(this,arguments)}function VF(){return VF=Ko(zo().mark((function e(t){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return sS("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,LF(t,new sF);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}}),e)}))),VF.apply(this,arguments)}function qF(e){return FF(e).then((function(e){return e.persistence}))}function BF(e){return FF(e).then((function(e){return e.localStore}))}function zF(e){return jF(e).then((function(e){return e.remoteStore}))}function WF(e){return jF(e).then((function(e){return e.syncEngine}))}function KF(e){return jF(e).then((function(e){return e.datastore}))}function HF(e){return GF.apply(this,arguments)}function GF(){return GF=Ko(zo().mark((function e(t){var n,r;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jF(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=cM.bind(null,n.syncEngine),r.onUnlisten=dM.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),GF.apply(this,arguments)}function QF(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new yS;return e.asyncQueue.enqueueAndForget(Ko(zo().mark((function i(){return zo().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new CF({next:function(a){t.enqueueAndForget((function(){return GL(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new mS(vS.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new mS(vS.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new JL(FN(n.path),a,{includeMetadataChanges:!0,Nu:!0});return KL(e,o)},i.next=3,HF(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function $F(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new yS;return e.asyncQueue.enqueueAndForget(Ko(zo().mark((function i(){return zo().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new CF({next:function(n){t.enqueueAndForget((function(){return GL(e,o)})),n.fromCache&&"server"===r.source?i.reject(new mS(vS.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new JL(n,a,{includeMetadataChanges:!0,Nu:!0});return KL(e,o)},i.next=3,HF(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var YF=function(){function e(){var t=this;d(this,e),this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new WO(this,"async_queue_retry"),this.Wc=function(){var e=BO();e&&sS("AsyncQueue","Visibility state changed to "+e.visibilityState),t.xo.Po()};var n=BO();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Wc)}return y(e,[{key:"isShuttingDown",get:function(){return this.qc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.zc(),this.Hc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;var t=BO();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}},{key:"enqueue",value:function(e){var t=this;if(this.zc(),this.qc)return new Promise((function(){}));var n=new yS;return this.Hc((function(){return t.qc&&t.Qc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Lc.push(e),t.Jc()}))}},{key:"Jc",value:function(){var e=Ko(zo().mark((function e(){var t=this;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Lc.length){e.next=14;break}return e.prev=1,e.next=4,this.Lc[0]();case 4:this.Lc.shift(),this.xo.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),nC(e.t0)){e.next=12;break}throw e.t0;case 12:sS("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Lc.length>0&&this.xo.Ro((function(){return t.Jc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Hc",value:function(e){var t=this,n=this.Bc.then((function(){return t.Gc=!0,e().catch((function(e){t.Kc=e,t.Gc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw cS("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Gc=!1,e}))}));return this.Bc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.zc(),this.jc.indexOf(e)>-1&&(t=0);var i=UL.createAndSchedule(this,e,t,n,(function(e){return r.Yc(e)}));return this.Uc.push(i),i}},{key:"zc",value:function(){this.Kc&&hS()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Xc",value:function(){var e=Ko(zo().mark((function e(){var t;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Bc,e.next=3,t;case 3:if(t!==this.Bc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Zc",value:function(e){var t,n=C(this.Uc);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"ta",value:function(e){var t=this;return this.Xc().then((function(){t.Uc.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=C(t.Uc);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.Xc()}))}},{key:"ea",value:function(e){this.jc.push(e)}},{key:"Yc",value:function(e){var t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}]),e}();function XF(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=C(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var JF=function(){function e(){d(this,e),this._progressObserver={},this._taskCompletionResolver=new yS,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return y(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),ZF=function(e){k(n,e);var t=I(n);function n(e,r,i,a){var o;return d(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new YF,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return y(n,[{key:"_terminate",value:function(){return this._firestoreClient||tU(this),this._firestoreClient.terminate()}}]),n}(gF);function eU(e){return e._firestoreClient||tU(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function tU(e){var t,n=e._freezeSettings(),r=function(e,t,n,r){return new lC(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new PF(e._authCredentials,e._appCheckCredentials,e._queue,r)}function nU(e,t,n){var r=new yS;return e.asyncQueue.enqueue(Ko(zo().mark((function i(){var a;return zo().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,DF(e,n);case 3:return i.next=5,LF(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),function(e){return"FirebaseError"===e.name?e.code===vS.FAILED_PRECONDITION||e.code===vS.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||(22===e.code||20===e.code||11===e.code)}(a=i.t0)){i.next=13;break}throw a;case 13:lS("Error enabling offline persistence. Falling back to persistence disabled: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function rU(e){return function(e){return e.asyncQueue.enqueue(Ko(zo().mark((function t(){var n,r;return zo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,qF(e);case 2:return n=t.sent,t.next=5,zF(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=pS(e);return t._u.delete(0),XO(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(eU(e=pF(e,ZF)))}function iU(e){return function(e){return e.asyncQueue.enqueue(Ko(zo().mark((function t(){var n,r;return zo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,qF(e);case 2:return n=t.sent,t.next=5,zF(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=Ko(zo().mark((function e(t){var n;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=pS(t))._u.add(0),e.next=4,ZO(n);case 4:n.gu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(eU(e=pF(e,ZF)))}function aU(e,t){var n=eU(e=pF(e,ZF)),r=new JF;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new NF(e,t)}(function(e,t){if(e instanceof Uint8Array)return SF(e,t);if(e instanceof ArrayBuffer)return SF(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,zO(t));e.asyncQueue.enqueueAndForget(Ko(zo().mark((function t(){return zo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=iF,t.next=3,WF(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function oU(e,t){return function(e,t){return e.asyncQueue.enqueue(Ko(zo().mark((function n(){return zo().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=pS(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ns.getNamedQuery(e,t)}))},n.next=3,BF(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(eU(e=pF(e,ZF)),t).then((function(t){return t?new wF(e,null,t.query):null}))}function uU(e){if(e._initialized||e._terminated)throw new mS(vS.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var sU=function(){function e(t){d(this,e),this._byteString=t}return y(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(gC.fromBase64String(t))}catch(t){throw new mS(vS.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(gC.fromUint8Array(t))}}]),e}(),cU=function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new mS(vS.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new MS(n)}return y(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var lU=y((function e(t){d(this,e),this._methodName=t})),fU=function(){function e(t,n){if(d(this,e),!isFinite(t)||t<-90||t>90)throw new mS(vS.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new mS(vS.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return y(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return CS(this._lat,e._lat)||CS(this._long,e._long)}}]),e}(),hU=/^__.*__$/,dU=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return y(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new TA(e,this.data,this.fieldMask,t,this.fieldTransforms):new IA(e,this.data,t,this.fieldTransforms)}}]),e}(),pU=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return y(e,[{key:"toMutation",value:function(e,t){return new TA(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function vU(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw hS()}}var mU=function(){function e(t,n,r,i,a,o){d(this,e),this.settings=t,this.databaseId=n,this.yt=r,this.ignoreUndefinedProperties=i,void 0===a&&this.na(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return y(e,[{key:"path",get:function(){return this.settings.path}},{key:"sa",get:function(){return this.settings.sa}},{key:"ia",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"ra",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.ua(e),r}},{key:"ca",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.ia({path:n,oa:!1});return r.na(),r}},{key:"aa",value:function(e){return this.ia({path:void 0,oa:!0})}},{key:"ha",value:function(e){return MU(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"na",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ua(this.path.get(e))}},{key:"ua",value:function(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(vU(this.sa)&&hU.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}]),e}(),yU=function(){function e(t,n,r){d(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.yt=r||zO(t)}return y(e,[{key:"da",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new mU({sa:e,methodName:t,fa:n,path:MS.emptyPath(),oa:!1,la:r},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}]),e}();function gU(e){var t=e._freezeSettings(),n=zO(e._databaseId);return new yU(e._databaseId,!!t.ignoreUndefinedProperties,n)}function kU(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.da(a.merge||a.mergeFields?2:0,t,n,i);PU("Data must be an object, but it was:",o,r);var u,s,c=AU(r,o);if(a.merge)u=new xN(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=C(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=l.value,p=DU(t,d,n);if(!o.contains(p))throw new mS(vS.INVALID_ARGUMENT,"Field '".concat(p,"' is specified in your field mask but missing from your input data."));FU(f,p)||f.push(p)}}catch(v){h.e(v)}finally{h.f()}u=new xN(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new dU(new IN(c),u,s)}var bU=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.sa)throw 1===e.sa?e.ha("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ha("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(lU);function wU(e,t,n){return new mU({sa:3,fa:t.settings.fa,methodName:e._methodName,oa:n},t.databaseId,t.yt,t.ignoreUndefinedProperties)}var _U=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"_toFieldTransform",value:function(e){return new pA(e.path,new oA)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(lU),xU=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e))._a=r,i}return y(n,[{key:"_toFieldTransform",value:function(e){var t=wU(this,e,!0),n=this._a.map((function(e){return NU(e,t)})),r=new uA(n);return new pA(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(lU),IU=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e))._a=r,i}return y(n,[{key:"_toFieldTransform",value:function(e){var t=wU(this,e,!0),n=this._a.map((function(e){return NU(e,t)})),r=new cA(n);return new pA(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(lU),TU=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).wa=r,i}return y(n,[{key:"_toFieldTransform",value:function(e){var t=new fA(e.yt,tA(e.yt,this.wa));return new pA(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(lU);function EU(e,t,n,r){var i=e.da(1,t,n);PU("Data must be an object, but it was:",i,r);var a=[],o=IN.empty();dC(r,(function(e,r){var u=LU(t,e,n);r=Ku(r);var s=i.ca(u);if(r instanceof bU)a.push(u);else{var c=NU(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new xN(a);return new pU(o,u,i.fieldTransforms)}function SU(e,t,n,r,i,a){var o=e.da(1,t,n),u=[DU(t,r,n)],s=[i];if(a.length%2!=0)throw new mS(vS.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(DU(t,a[c])),s.push(a[c+1]);for(var l=[],f=IN.empty(),h=u.length-1;h>=0;--h)if(!FU(l,u[h])){var d=u[h],p=s[h];p=Ku(p);var v=o.ca(d);if(p instanceof bU)l.push(d);else{var m=NU(p,v);null!=m&&(l.push(d),f.set(d,m))}}var y=new xN(l);return new pU(f,y,o.fieldTransforms)}function CU(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return NU(n,e.da(r?4:3,t))}function NU(e,t){if(RU(e=Ku(e)))return PU("Unsupported field value:",t,e),AU(e,t);if(e instanceof lU)return function(e,t){if(!vU(t.sa))throw t.ha("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ha("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.oa&&4!==t.sa)throw t.ha("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=C(e);try{for(a.s();!(n=a.n()).done;){var o=NU(n.value,t.aa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Ku(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return tA(t.yt,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=RS.fromDate(e);return{timestampValue:cR(t.yt,n)}}if(e instanceof RS){var r=new RS(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:cR(t.yt,r)}}if(e instanceof fU)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof sU)return{bytesValue:lR(t.yt,e._byteString)};if(e instanceof bF){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ha("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:dR(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ha("Unsupported field value: ".concat(dF(e)))}(e,t)}function AU(e,t){var n={};return pC(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):dC(e,(function(e,r){var i=NU(r,t.ra(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function RU(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof RS||e instanceof fU||e instanceof sU||e instanceof bF||e instanceof lU)}function PU(e,t,n){if(!RU(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=dF(n);throw"an object"===r?t.ha(e+" a custom object"):t.ha(e+" "+r)}}function DU(e,t,n){if((t=Ku(t))instanceof cU)return t._internalPath;if("string"==typeof t)return LU(e,t);throw MU("Field path arguments must be of type string or ",e,!1,void 0,n)}var OU=new RegExp("[~\\*/\\[\\]]");function LU(e,t,n){if(t.search(OU)>=0)throw MU("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return T(cU,h(t.split(".")))._internalPath}catch(r){throw MU("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function MU(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new mS(vS.INVALID_ARGUMENT,u+e+s)}function FU(e,t){return e.some((function(e){return e.isEqual(t)}))}var UU=function(){function e(t,n,r,i,a){d(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return y(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new bF(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new jU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(VU("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),jU=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"data",value:function(){return Bo(b(n.prototype),"data",this).call(this)}}]),n}(UU);function VU(e,t){return"string"==typeof t?LU(e,t):t instanceof cU?t._internalPath:t._delegate._internalPath}function qU(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new mS(vS.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var BU=y((function e(){d(this,e)})),zU=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n)}(BU);function WU(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof BU&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof HU})).length,n=e.filter((function(e){return e instanceof KU})).length;if(t>1||t>0&&n>0)throw new mS(vS.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=C(n);try{for(u.s();!(o=u.n()).done;){var s=o.value;e=s._apply(e)}}catch(c){u.e(c)}finally{u.f()}return e}var KU=function(e){k(n,e);var t=I(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return y(n,[{key:"_apply",value:function(e){var t=this._parse(e);return ij(e._query,t),new wF(e.firestore,e.converter,WN(e._query,t))}},{key:"_parse",value:function(e){var t=gU(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new mS(vS.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){rj(o,a);var s,c=[],l=C(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(nj(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=nj(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||rj(o,a),u=CU(n,"where",o,"in"===a||"not-in"===a);return XC.create(i,a,u)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(zU);var HU=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return y(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:JC.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=C(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;ij(r,a),r=WN(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new wF(e.firestore,e.converter,WN(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(BU);var GU=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return y(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new mS(vS.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new mS(vS.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new vN(t,n);return function(e,t){if(null===jN(e)){var n=VN(e);null!==n&&aj(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new wF(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new LN(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(zU);var QU=function(e){k(n,e);var t=I(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return y(n,[{key:"_apply",value:function(e){return new wF(e.firestore,e.converter,KN(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(zU);var $U=function(e){k(n,e);var t=I(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return y(n,[{key:"_apply",value:function(e){var t=tj(e,this.type,this._docOrFields,this._inclusive);return new wF(e.firestore,e.converter,function(e,t){return new LN(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(zU);function YU(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return $U._create("startAt",t,!0)}function XU(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return $U._create("startAfter",t,!1)}var JU=function(e){k(n,e);var t=I(n);function n(e,r,i){var a;return d(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return y(n,[{key:"_apply",value:function(e){var t=tj(e,this.type,this._docOrFields,this._inclusive);return new wF(e.firestore,e.converter,function(e,t){return new LN(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(zU);function ZU(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return JU._create("endBefore",t,!1)}function ej(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return JU._create("endAt",t,!0)}function tj(e,t,n,r){if(n[0]=Ku(n[0]),n[0]instanceof UU)return function(e,t,n,r,i){if(!r)throw new mS(vS.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=C(BN(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(LC(t,r.key));else{var c=r.data.field(s.field);if(xC(c))throw new mS(vS.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new mS(vS.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new GC(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=gU(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new mS(vS.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new mS(vS.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!qN(e)&&-1!==c.indexOf("/"))throw new mS(vS.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(OS.fromString(c));if(!FS.isDocumentKey(l))throw new mS(vS.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new FS(l);u.push(LC(t,f))}else{var h=CU(n,r,c);u.push(h)}}return new GC(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function nj(e,t,n){if("string"==typeof(n=Ku(n))){if(""===n)throw new mS(vS.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qN(t)&&-1!==n.indexOf("/"))throw new mS(vS.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(OS.fromString(n));if(!FS.isDocumentKey(r))throw new mS(vS.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return LC(e,new FS(r))}if(n instanceof bF)return LC(e,n._key);throw new mS(vS.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(dF(n),"."))}function rj(e,t){if(!Array.isArray(e)||0===e.length)throw new mS(vS.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new mS(vS.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function ij(e,t){if(t.isInequality()){var n=VN(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new mS(vS.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=jN(e);null!==i&&aj(e,r,i)}var a=function(e,t){var n,r=C(e);try{for(r.s();!(n=r.n()).done;){var i,a=C(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new mS(vS.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new mS(vS.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function aj(e,t,n){if(!n.isEqual(t))throw new mS(vS.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var oj=function(){function e(){d(this,e)}return y(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(CC(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wC(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(_C(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw hS()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return dC(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new fU(wC(e.latitude),wC(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=IC(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(TC(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=bC(e);return new RS(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=OS.fromString(e);dS(FR(n));var r=new fC(n.get(1),n.get(3)),i=new FS(n.popFirst(5));return r.isEqual(t)||cS("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function uj(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var sj=function(e){k(n,e);var t=I(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return y(n,[{key:"convertBytes",value:function(e){return new sU(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new bF(this.firestore,null,t)}}]),n}(oj),cj=function(){function e(t,n){d(this,e),this.hasPendingWrites=t,this.fromCache=n}return y(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),lj=function(e){k(n,e);var t=I(n);function n(e,r,i,a,o,u){var s;return d(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return y(n,[{key:"exists",value:function(){return Bo(b(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new fj(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(VU("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(UU),fj=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Bo(b(n.prototype),"data",this).call(this,e)}}]),n}(lj),hj=function(){function e(t,n,r,i){d(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new cj(i.hasPendingWrites,i.fromCache),this.query=r}return y(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new fj(n._firestore,n._userDataWriter,r.key,r,new cj(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new mS(vS.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new fj(e._firestore,e._userDataWriter,t.doc.key,t.doc,new cj(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new fj(e._firestore,e._userDataWriter,t.doc.key,t.doc,new cj(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:dj(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function dj(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return hS()}}function pj(e,t){return e instanceof lj&&t instanceof lj?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof hj&&t instanceof hj&&e._firestore===t._firestore&&EF(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var vj=function(e){k(n,e);var t=I(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return y(n,[{key:"convertBytes",value:function(e){return new sU(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new bF(this.firestore,null,t)}}]),n}(oj);function mj(e){e=pF(e,bF);var t=pF(e.firestore,ZF),n=eU(t),r=new vj(t);return function(e,t){var n=new yS;return e.asyncQueue.enqueueAndForget(Ko(zo().mark((function r(){return zo().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Ko(zo().mark((function e(t,n,r){var i,a;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=pS(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new mS(vS.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=jL(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,BF(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new lj(t,r,e._key,n,new cj(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function yj(e){e=pF(e,wF);var t=pF(e.firestore,ZF),n=eU(t),r=new vj(t);return function(e,t){var n=new yS;return e.asyncQueue.enqueueAndForget(Ko(zo().mark((function r(){return zo().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=Ko(zo().mark((function e(t,n,r){var i,a,o,u,s;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,gO(t,n,!0);case 3:i=e.sent,a=new aM(n,i.Hi),o=a.Wu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=jL(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,BF(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new hj(t,r,e,n)}))}function gj(e,t,n){e=pF(e,bF);var r=pF(e.firestore,ZF),i=uj(e.converter,t,n);return _j(r,[kU(gU(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,mA.none())])}function kj(e,t,n){e=pF(e,bF);for(var r=pF(e.firestore,ZF),i=gU(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return _j(r,[("string"==typeof(t=Ku(t))||t instanceof cU?SU(i,"updateDoc",e._key,t,n,o):EU(i,"updateDoc",e._key,t)).toMutation(e._key,mA.exists(!0))])}function bj(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Ku(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||XF(n[s])||(u=n[s],s++);var c,l,f,h={includeMetadataChanges:u.includeMetadataChanges};if(XF(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(a=d.error)||void 0===a?void 0:a.bind(d),n[s+2]=null===(o=d.complete)||void 0===o?void 0:o.bind(d)}if(e instanceof bF)l=pF(e.firestore,ZF),f=FN(e._key.path),c={next:function(t){n[s]&&n[s](xj(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=pF(e,wF);l=pF(p.firestore,ZF),f=p._query;var v=new vj(l);c={next:function(e){n[s]&&n[s](new hj(l,v,p,e))},error:n[s+1],complete:n[s+2]},qU(e._query)}return function(e,t,n,r){var i=new CF(r),a=new JL(t,i,n);return e.asyncQueue.enqueueAndForget(Ko(zo().mark((function t(){return zo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=KL,t.next=3,HF(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.bc(),e.asyncQueue.enqueueAndForget(Ko(zo().mark((function t(){return zo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=GL,t.next=3,HF(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(eU(l),f,h,c)}function wj(e,t){return function(e,t){var n=new CF(t);return e.asyncQueue.enqueueAndForget(Ko(zo().mark((function t(){return zo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){pS(e).Ru.add(t),t.next()},t.next=3,HF(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.bc(),e.asyncQueue.enqueueAndForget(Ko(zo().mark((function t(){return zo().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){pS(e).Ru.delete(t)},t.next=3,HF(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(eU(e=pF(e,ZF)),XF(t)?t:{next:t})}function _j(e,t){return function(e,t){var n=new yS;return e.asyncQueue.enqueueAndForget(Ko(zo().mark((function r(){return zo().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=vM,r.next=3,WF(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(eU(e),t)}function xj(e,t,n){var r=n.docs.get(t._key),i=new vj(e);return new lj(e,i,t._key,r,new cj(n.hasPendingWrites,n.fromCache),t.converter)}var Ij={maxAttempts:5},Tj=function(){function e(t,n){d(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=gU(t)}return y(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=Ej(e,this._firestore),i=uj(r.converter,t,n),a=kU(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,mA.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=Ej(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Ku(t))||t instanceof cU?SU(this._dataReader,"WriteBatch.update",i._key,t,n,o):EU(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,mA.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=Ej(e,this._firestore);return this._mutations=this._mutations.concat(new RA(t._key,mA.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new mS(vS.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function Ej(e,t){if((e=Ku(e)).firestore!==t)throw new mS(vS.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var Sj=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r))._firestore=e,i}return y(n,[{key:"get",value:function(e){var t=this,r=Ej(e,this._firestore),i=new vj(this._firestore);return Bo(b(n.prototype),"get",this).call(this,e).then((function(e){return new lj(t._firestore,i,r._key,e._document,new cj(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){d(this,e),this._firestore=t,this._transaction=n,this._dataReader=gU(t)}return y(e,[{key:"get",value:function(e){var t=this,n=Ej(e,this._firestore),r=new sj(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return hS();var i=e[0];if(i.isFoundDocument())return new UU(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new UU(t._firestore,r,n._key,null,n.converter);throw hS()}))}},{key:"set",value:function(e,t,n){var r=Ej(e,this._firestore),i=uj(r.converter,t,n),a=kU(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=Ej(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Ku(t))||t instanceof cU?SU(this._dataReader,"Transaction.update",i._key,t,n,o):EU(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=Ej(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function Cj(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new xU("arrayUnion",t)}function Nj(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new IU("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){aS=e}(qs),Os(new Hu("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new ZF(new wS(e.getProvider("auth-internal")),new TS(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new mS(vS.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new fC(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),Gs(rS,"3.8.0",e),Gs(rS,"3.8.0","esm2017")}();var Aj="firebasestorage.googleapis.com",Rj="storageBucket",Pj=function(e){k(n,e);var t=I(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return d(this,n),(i=t.call(this,Dj(e),"Firebase Storage: ".concat(r," (").concat(Dj(e),")"))).status_=a,i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(_(i),n.prototype),i}return y(n,[{key:"status",get:function(){return this.status_},set:function(e){this.status_=e}},{key:"_codeEquals",value:function(e){return Dj(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(wu);function Dj(e){return"storage/"+e}function Oj(){return new Pj("unknown","An unknown error occurred, please check the error payload for server response.")}function Lj(){return new Pj("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}function Mj(){return new Pj("canceled","User canceled the upload/download.")}function Fj(){return new Pj("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Uj(e){return new Pj("invalid-argument",e)}function jj(){return new Pj("app-deleted","The Firebase app was deleted.")}function Vj(e){return new Pj("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function qj(e,t){return new Pj("invalid-format","String does not match format '"+e+"': "+t)}function Bj(e){throw new Pj("internal-error","Internal error: "+e)}var zj,Wj=function(){function e(t,n){d(this,e),this.bucket=t,this.path_=n}return y(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(i){return new e(t,"")}if(""===r.path)return r;throw new Pj("invalid-default-bucket","Invalid default bucket '"+t+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===Aj?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new Pj("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),Kj=function(){function e(t){d(this,e),this.promise_=Promise.reject(t)}return y(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function Hj(e){return"string"===typeof e||e instanceof String}function Gj(e){return Qj()&&e instanceof Blob}function Qj(){return"undefined"!==typeof Blob&&!ou()}function $j(e,t,n,r){if(r<t)throw Uj("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Uj("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Yj(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function Xj(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}function Jj(e,t){var n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(zj||(zj={}));var Zj=function(){function e(t,n,r,i,a,o,u,s,c,l,f){var h=this,p=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];d(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return y(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(s){i(s)}else if(null!==a){var u=Oj();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?jj():Mj());else i(Lj())}};this.canceled_?t(0,new eV(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new eV(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===zj.NO_ERROR,a=r.getStatus();if(n&&!Jj(a,e.additionalRetryCodes_)||!e.retry){var o=-1!==e.successCodes_.indexOf(a);t(!0,new eV(o,r))}else{var u=r.getErrorCode()===zj.ABORT;t(!1,new eV(!1,null,u))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}]),e}(),eV=y((function e(t,n,r){d(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function tV(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}function nV(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}function rV(e,t){t&&(e["X-Firebase-GMPID"]=t)}function iV(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}function aV(e,t,n,r,i,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=Xj(e.urlParams),s=e.url+u,c=Object.assign({},e.headers);return rV(c,t),tV(c,n),nV(c,a),iV(c,r),new Zj(s,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}function oV(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function uV(){for(var e=oV(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(Qj())return new Blob(n);throw new Pj("unsupported-environment","This browser doesn't seem to support creating Blobs")}function sV(e){if("undefined"===typeof atob)throw new Pj("unsupported-environment","".concat("base-64"," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));return atob(e)}var cV={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},lV=y((function e(t,n){d(this,e),this.data=t,this.contentType=n||null}));function fV(e,t){switch(e){case cV.RAW:return new lV(hV(t));case cV.BASE64:case cV.BASE64URL:return new lV(dV(e,t));case cV.DATA_URL:return new lV(function(e){var t=new pV(e);return t.base64?dV(cV.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw qj(cV.DATA_URL,"Malformed data URL.")}return hV(t)}(t.rest)}(t),new pV(t).contentType)}throw Oj()}function hV(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function dV(e,t){switch(e){case cV.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw qj(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case cV.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw qj(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=sV(t)}catch(c){if(c.message.includes("polyfill"))throw c;throw qj(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var pV=y((function e(t){d(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw qj(cV.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)}));var vV=function(){function e(t,n){d(this,e);var r=0,i="";Gj(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return y(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(Gj(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(Qj()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(uV.apply(null,i))}var a=n.map((function(e){return Hj(e)?fV(cV.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function mV(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function yV(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function gV(e,t){return t}var kV=y((function e(t,n,r,i){d(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||gV})),bV=null;function wV(){if(bV)return bV;var e=[];e.push(new kV("bucket")),e.push(new kV("generation")),e.push(new kV("metageneration")),e.push(new kV("name","fullPath",!0));var t=new kV("name");t.xform=function(e,t){return function(e){return!Hj(e)||e.length<2?e:yV(e)}(t)},e.push(t);var n=new kV("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new kV("timeCreated")),e.push(new kV("updated")),e.push(new kV("md5Hash",null,!0)),e.push(new kV("cacheControl",null,!0)),e.push(new kV("contentDisposition",null,!0)),e.push(new kV("contentEncoding",null,!0)),e.push(new kV("contentLanguage",null,!0)),e.push(new kV("contentType",null,!0)),e.push(new kV("metadata","customMetadata",!0)),bV=e}function _V(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new Wj(n,r);return t._makeStorageReference(i)}})}(r,e),r}function xV(e,t,n){var r=mV(t);return null===r?null:_V(e,r,n)}function IV(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var TV="prefixes",EV="items";function SV(e,t,n){var r=mV(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[TV]){var i,a=C(n[TV]);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),u=e._makeStorageReference(new Wj(t,o));r.prefixes.push(u)}}catch(h){a.e(h)}finally{a.f()}}if(n[EV]){var s,c=C(n[EV]);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=e._makeStorageReference(new Wj(t,l.name));r.items.push(f)}}catch(h){c.e(h)}finally{c.f()}}return r}(e,t,r)}var CV=y((function e(t,n,r,i){d(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function NV(e){if(!e)throw Oj()}function AV(e,t){return function(n,r){var i=xV(e,r,t);return NV(null!==i),i}}function RV(e,t){return function(n,r){var i=xV(e,r,t);return NV(null!==i),function(e,t,n,r){var i=mV(t);if(null===i)return null;if(!Hj(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return Yj("/b/"+o(i)+"/o/"+o(a),n,r)+Xj({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function PV(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Pj("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new Pj("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new Pj("quota-exceeded","Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new Pj("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function DV(e){var t=PV(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new Pj("object-not-found","Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function OV(e,t,n){var r=Yj(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new CV(r,"GET",AV(e,n),i);return a.errorHandler=DV(t),a}function LV(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=Yj(t.bucketOnlyServerUrl(),e.host,e._protocol),u=e.maxOperationRetryTime,s=new CV(o,"GET",function(e,t){return function(n,r){var i=SV(e,t,r);return NV(null!==i),i}}(e,t.bucket),u);return s.urlParams=a,s.errorHandler=PV(t),s}function MV(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function FV(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=MV(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+IV(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",f=vV.getBlob(c,r,l);if(null===f)throw Fj();var h={name:s.fullPath},d=Yj(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new CV(d,"POST",AV(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=PV(t),v}var UV=y((function e(t,n,r,i){d(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function jV(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){NV(!1)}return NV(!!n&&-1!==(t||["active"]).indexOf(n)),n}var VV=262144;function qV(e,t,n,r,i,a,o,u){var s=new UV(0,0);if(o?(s.current=o.current,s.total=o.total):(s.current=0,s.total=r.size()),r.size()!==s.total)throw new Pj("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=s.total-s.current,l=c;i>0&&(l=Math.min(l,i));var f=s.current,h=f+l,d={"X-Goog-Upload-Command":0===l?"finalize":c===l?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(s.current)},p=r.slice(f,h);if(null===p)throw Fj();var v=t.maxUploadRetryTime,m=new CV(n,"POST",(function(e,n){var i,o=jV(e,["active","final"]),u=s.current+l,c=r.size();return i="final"===o?AV(t,a)(e,n):null,new UV(u,c,"final"===o,i)}),v);return m.headers=d,m.body=p.uploadData(),m.progressCallback=u||null,m.errorHandler=PV(e),m}var BV={STATE_CHANGED:"state_changed"},zV={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function WV(e){switch(e){case"running":case"pausing":case"canceling":return zV.RUNNING;case"paused":return zV.PAUSED;case"success":return zV.SUCCESS;case"canceled":return zV.CANCELED;default:return zV.ERROR}}var KV=y((function e(t,n,r){d(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function HV(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var GV=function(){function e(){var t=this;d(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=zj.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=zj.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=zj.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return y(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw Bj("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw Bj("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw Bj("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw Bj("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw Bj("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),QV=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(GV);function $V(){return new QV}var YV=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;d(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=wV(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){if(r._request=void 0,r._chunkMultiplier=1,e._codeEquals("canceled"))r._needToFetchStatus=!0,r.completeTransitions_();else{var t=r.isExponentialBackoffExpired();if(Jj(e.status,[])){if(!t)return r.sleepTime=Math.max(2*r.sleepTime,1e3),r._needToFetchStatus=!0,void r.completeTransitions_();e=Lj()}r._error=e,r._transition("error")}},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals("canceled")?r.completeTransitions_():(r._error=e,r._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return y(e,[{key:"isExponentialBackoffExpired",value:function(){return this.sleepTime>this.maxSleepTime}},{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){var e=this;"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((function(){e.pendingTimeout=void 0,e._continueUpload()}),this.sleepTime):this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=l(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=MV(t,r,i),u={name:o.fullPath},s=Yj(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=IV(o,n),f=e.maxUploadRetryTime,h=new CV(s,"POST",(function(e){var t;jV(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){NV(!1)}return NV(Hj(t)),t}),f);return h.urlParams=u,h.headers=c,h.body=l,h.errorHandler=PV(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,$V,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new CV(n,"POST",(function(e){var t=jV(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){NV(!1)}n||NV(!1);var i=Number(n);return NV(!isNaN(i)),new UV(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=PV(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,$V,n,r);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=VV*this._chunkMultiplier,n=new UV(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=qV(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(s){return e._error=s,void e._transition("error")}var u=e._ref.storage._makeRequest(o,$V,i,a,!1);e._request=u,u.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){2*(VV*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=OV(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,$V,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=FV(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,$V,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Mj(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=WV(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new KV(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(WV(this._state)){case zV.SUCCESS:HV(this._resolve.bind(null,this.snapshot))();break;case zV.CANCELED:case zV.ERROR:HV(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(WV(this._state)){case zV.RUNNING:case zV.PAUSED:e.next&&HV(e.next.bind(e,this.snapshot))();break;case zV.SUCCESS:e.complete&&HV(e.complete.bind(e))();break;default:e.error&&HV(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),XV=function(){function e(t,n){d(this,e),this._service=t,this._location=n instanceof Wj?n:Wj.makeFromUrl(n,t.host)}return y(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new Wj(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return yV(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new Wj(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw Vj(e)}}]),e}();function JV(e,t,n){return ZV.apply(this,arguments)}function ZV(){return ZV=Ko(zo().mark((function e(t,n,r){var i,a,o,u;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,eq(t,o);case 3:if(u=e.sent,(i=n.prefixes).push.apply(i,h(u.prefixes)),(a=n.items).push.apply(a,h(u.items)),null==u.nextPageToken){e.next=9;break}return e.next=9,JV(t,n,u.nextPageToken);case 9:case"end":return e.stop()}}),e)}))),ZV.apply(this,arguments)}function eq(e,t){null!=t&&"number"===typeof t.maxResults&&$j("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=LV(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,$V)}function tq(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=Yj(t.fullServerUrl(),e.host,e._protocol),a=IV(n,r),o=e.maxOperationRetryTime,u=new CV(i,"PATCH",AV(e,r),o);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=DV(t),u}(e.storage,e._location,t,wV());return e.storage.makeRequestWithTokens(n,$V)}function nq(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=Yj(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new CV(r,"GET",RV(e,n),i);return a.errorHandler=DV(t),a}(e.storage,e._location,wV());return e.storage.makeRequestWithTokens(t,$V).then((function(e){if(null===e)throw new Pj("no-download-url","The given file does not have any download URLs.");return e}))}function rq(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=Yj(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new CV(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=DV(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,$V)}function iq(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Wj(e._location.bucket,n);return new XV(e.storage,r)}function aq(e,t){if(e instanceof cq){var n=e;if(null==n._bucket)throw new Pj("no-default-bucket","No default bucket found. Did you set the '"+Rj+"' property when initializing the app?");var r=new XV(n,n._bucket);return null!=t?aq(r,t):r}return void 0!==t?iq(e,t):e}function oq(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof cq)return new XV(e,t);throw Uj("To use ref(service, url), the first argument must be a Storage instance.")}return aq(e,t)}function uq(e,t){var n=null===t||void 0===t?void 0:t[Rj];return null==n?null:Wj.makeFromBucketSpec(n,e)}function sq(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:bu(i,e.app.options.projectId))}var cq=function(){function e(t,n,r,i,a){d(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=Aj,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Wj.makeFromBucketSpec(i,this._host):uq(this._host,this.app.options)}return y(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=Wj.makeFromBucketSpec(this._url,e):this._bucket=uq(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){$j("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){$j("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=Ko(zo().mark((function e(){var t,n;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=Ko(zo().mark((function e(){var t,n;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new XV(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new Kj(jj());var o=aV(e,this._appId,n,r,t,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then((function(){return i._requests.delete(o)}),(function(){return i._requests.delete(o)})),o}},{key:"makeRequestWithTokens",value:function(){var e=Ko(zo().mark((function e(t,n){var r,i,a,o;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=l(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),lq="@firebase/storage",fq="0.10.0",hq="storage";function dq(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new YV(e,new vV(t),n)}(e=Ku(e),t,n)}function pq(e){return function(e){e._throwIfRoot("getMetadata");var t=OV(e.storage,e._location,wV());return e.storage.makeRequestWithTokens(t,$V)}(e=Ku(e))}function vq(e){return function(e){var t={prefixes:[],items:[]};return JV(e,t).then((function(){return t}))}(e=Ku(e))}function mq(e,t){return oq(e=Ku(e),t)}function yq(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};sq(e,t,n,r)}function gq(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new cq(r,i,a,n,qs)}Os(new Hu(hq,gq,"PUBLIC").setMultipleInstances(!0)),Gs(lq,fq,""),Gs(lq,fq,"esm2017");var kq={apiKey:"AIzaSyBDbNtAemE1FfSuIiqecs3obaHH3ZwRQAM",authDomain:"online-booking-system-754dc.firebaseapp.com",projectId:"online-booking-system-754dc",storageBucket:"online-booking-system-754dc.appspot.com",messagingSenderId:"335041191531",appId:"1:335041191531:web:211b158c5fbde1967c9b2e"};Uv.initializeApp(kq);var bq=Bs(kq),wq=function(e,t){var n="string"==typeof e?e:t||"(default)",r=Ls("object"==typeof e?e:zs(),"firestore").getImmediate({identifier:n});if(!r._initialized){var i=mu("firestore");i&&kF.apply(void 0,[r].concat(h(i)))}return r}(bq),_q=(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zs(),t=arguments.length>1?arguments[1]:void 0,n=Ls(e=Ku(e),hq),r=n.getImmediate({identifier:t}),i=mu("storage");i&&yq.apply(void 0,[r].concat(h(i)))}(bq),Uv);function xq(e){var t=e.children,n=e.className,i=e.content,a=e.fluid,o=e.text,u=e.textAlign,s=Mi("ui",ji(o,"text"),ji(a,"fluid"),zi(u),"container",n),c=Hi(xq,e),l=Gi(xq,e);return r.createElement(l,Ye({},c,{className:s}),Xi(t)?i:t)}xq.handledProps=["as","children","className","content","fluid","text","textAlign"],xq.propTypes={};var Iq=xq;function Tq(e){var t=e.children,n=e.className,i=e.computer,a=e.color,o=e.floated,u=e.largeScreen,s=e.mobile,c=e.only,l=e.stretched,f=e.tablet,h=e.textAlign,d=e.verticalAlign,p=e.widescreen,v=e.width,m=Mi(a,ji(l,"stretched"),Bi(c,"only"),zi(h),Vi(o,"floated"),Wi(d),Ki(i,"wide computer"),Ki(u,"wide large screen"),Ki(s,"wide mobile"),Ki(f,"wide tablet"),Ki(p,"wide widescreen"),Ki(v,"wide"),"column",n),y=Hi(Tq,e),g=Gi(Tq,e);return r.createElement(g,Ye({},y,{className:m}),t)}Tq.handledProps=["as","children","className","color","computer","floated","largeScreen","mobile","only","stretched","tablet","textAlign","verticalAlign","widescreen","width"],Tq.propTypes={},Tq.create=Ia(Tq,(function(e){return{children:e}}));var Eq=Tq;function Sq(e){var t=e.centered,n=e.children,i=e.className,a=e.color,o=e.columns,u=e.divided,s=e.only,c=e.reversed,l=e.stretched,f=e.textAlign,h=e.verticalAlign,d=Mi(a,ji(t,"centered"),ji(u,"divided"),ji(l,"stretched"),Bi(s,"only"),Bi(c,"reversed"),zi(f),Wi(h),Ki(o,"column",!0),"row",i),p=Hi(Sq,e),v=Gi(Sq,e);return r.createElement(v,Ye({},p,{className:d}),n)}Sq.handledProps=["as","centered","children","className","color","columns","divided","only","reversed","stretched","textAlign","verticalAlign"],Sq.propTypes={};var Cq=Sq;function Nq(e){var t=e.celled,n=e.centered,i=e.children,a=e.className,o=e.columns,u=e.container,s=e.divided,c=e.doubling,l=e.inverted,f=e.padded,h=e.relaxed,d=e.reversed,p=e.stackable,v=e.stretched,m=e.textAlign,y=e.verticalAlign,g=Mi("ui",ji(n,"centered"),ji(u,"container"),ji(c,"doubling"),ji(l,"inverted"),ji(p,"stackable"),ji(v,"stretched"),qi(t,"celled"),qi(s,"divided"),qi(f,"padded"),qi(h,"relaxed"),Bi(d,"reversed"),zi(m),Wi(y),Ki(o,"column",!0),"grid",a),k=Hi(Nq,e),b=Gi(Nq,e);return r.createElement(b,Ye({},k,{className:g}),i)}Nq.handledProps=["as","celled","centered","children","className","columns","container","divided","doubling","inverted","padded","relaxed","reversed","stackable","stretched","textAlign","verticalAlign"],Nq.Column=Eq,Nq.Row=Cq,Nq.propTypes={};var Aq=Nq,Rq=/\s/;var Pq=function(e){for(var t=e.length;t--&&Rq.test(e.charAt(t)););return t},Dq=/^\s+/;var Oq=function(e){return e?e.slice(0,Pq(e)+1).replace(Dq,""):e},Lq=/^[-+]0x[0-9a-f]+$/i,Mq=/^0b[01]+$/i,Fq=/^0o[0-7]+$/i,Uq=parseInt;var jq=function(e){if("number"==typeof e)return e;if(Wr(e))return NaN;if(Et(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Et(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Oq(e);var n=Mq.test(e);return n||Fq.test(e)?Uq(e.slice(2),n?2:8):Lq.test(e)?NaN:+e},Vq=1/0;var qq=function(e){return e?(e=jq(e))===Vq||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0};var Bq=function(e){var t=qq(e),n=t%1;return t===t?n?t-n:t:0};var zq=function(e,t){return Je(t,(function(t){return e[t]}))};var Wq=function(e){return null==e?[]:zq(e,dr(e))},Kq=Math.max;var Hq=function(e,t,n,r){e=hr(e)?e:Wq(e),n=n&&!r?Bq(n):0;var i=e.length;return n<0&&(n=Kq(i+n,0)),ba(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&ia(e,t,n)>-1};var Gq=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e};var Qq=function(e){return"function"==typeof e?e:fi};var $q=function(e,t){return(En(e)?Gq:yi)(e,Qq(t))},Yq=["selected","defaultValue","defaultChecked","accept","autoCapitalize","autoComplete","autoCorrect","autoFocus","checked","disabled","enterKeyHint","form","id","inputMode","lang","list","max","maxLength","min","minLength","multiple","name","pattern","placeholder","readOnly","required","step","title","type","value"],Xq=[].concat(Yq,["onKeyDown","onKeyPress","onKeyUp","onFocus","onBlur","onChange","onInput","onClick","onContextMenu","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onSelect","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"]),Jq=["alt","height","src","srcSet","width","loading"],Zq=function(e,t){void 0===t&&(t={});var n=t,r=n.htmlProps,i=void 0===r?Xq:r,a=n.includeAria,o=void 0===a||a,u={},s={};return $q(e,(function(e,t){var n=o&&(/^aria-.*$/.test(t)||"role"===t);(Hq(i,t)||n?u:s)[t]=e})),[u,s]},eB="object"===typeof document&&null!==document,tB="object"===typeof window&&null!==window&&window.self===window,nB=function e(){return _a(e.override)?eB&&tB:e.override},rB=n(775),iB=n.n(rB),aB=function(e,t){"function"!==typeof e?null!==e&&"object"===typeof e&&(e.current=t):e(t)};function oB(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}var uB=n(33),sB=n(164);var cB=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).prevNode=void 0,t}Xe(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=sB.findDOMNode(this);this.prevNode=e,aB(this.props.innerRef,e)},n.componentDidUpdate=function(e){var t=sB.findDOMNode(this);this.prevNode!==t&&(this.prevNode=t,aB(this.props.innerRef,t)),e.innerRef!==this.props.innerRef&&aB(this.props.innerRef,t)},n.componentWillUnmount=function(){aB(this.props.innerRef,null),delete this.prevNode},n.render=function(){return this.props.children},t}(r.Component),lB=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).currentNode=void 0,t.handleRefOverride=function(e){var n=t.props,r=n.children,i=n.innerRef;aB(r.ref,e),aB(i,e),t.currentNode=e},t}Xe(t,e);var n=t.prototype;return n.componentDidUpdate=function(e){e.innerRef!==this.props.innerRef&&aB(this.props.innerRef,this.currentNode)},n.componentWillUnmount=function(){delete this.currentNode},n.render=function(){var e=this.props.children;return r.cloneElement(e,{ref:this.handleRefOverride})},t}(r.Component),fB=["children","innerRef"],hB=function(e){var t=e.children,n=e.innerRef,i=oB(e,fB),a=r.Children.only(t),o=uB.isForwardRef(a)?lB:cB,u=a&&i&&Object.keys(i).length>0?r.cloneElement(a,i):a;return r.createElement(o,{innerRef:n},u)},dB=n(854),pB=n.n(dB),vB=Math.max,mB=Math.min;var yB=function(e,t,n){return e>=mB(t,n)&&e<vB(t,n)};var gB=function(e,t,n){return t=qq(t),void 0===n?(n=t,t=0):n=qq(n),e=jq(e),yB(e,t,n)};var kB=function(e){return e&&e.length?e[0]:void 0},bB=function(e,t){if(Yi([t,e],_a))return!1;if(t.target&&(Oi(t.target,"setAttribute","data-suir-click-target",!0),document.querySelector("[data-suir-click-target=true]")))return Oi(t.target,"removeAttribute","data-suir-click-target"),e.contains(t.target);var n=t.clientX,r=t.clientY;if(Yi([n,r],_a))return!1;var i=e.getClientRects();if(!e.offsetWidth||!e.offsetHeight||!i||!i.length)return!1;var a=kB(i),o=a.top,u=a.bottom,s=a.left,c=a.right;return!Yi([o,u,s,c],_a)&&(gB(r,o,u+.001)&&gB(n,s,c+.001))},wB=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleRef=function(e){aB(t.props.innerRef,e)},t}Xe(t,e);var n=t.prototype;return n.componentDidMount=function(){Oi(this.props,"onMount",null,this.props)},n.componentWillUnmount=function(){Oi(this.props,"onUnmount",null,this.props)},n.render=function(){if(!nB())return null;var e=this.props,t=e.children,n=e.mountNode,i=void 0===n?document.body:n;return(0,sB.createPortal)(r.createElement(hB,{innerRef:this.handleRef},t),i)},t}(r.Component);wB.handledProps=["children","innerRef","mountNode","onMount","onUnmount"],wB.propTypes={};var _B=wB,xB=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))||this).contentRef=r.createRef(),t.triggerRef=r.createRef(),t.latestDocumentMouseDownEvent=null,t.handleDocumentMouseDown=function(e){t.latestDocumentMouseDownEvent=e},t.handleDocumentClick=function(e){var n=t.props.closeOnDocumentClick,r=t.latestDocumentMouseDownEvent;t.latestDocumentMouseDownEvent=null,!t.contentRef.current||bB(t.triggerRef.current,e)||r&&bB(t.contentRef.current,r)||bB(t.contentRef.current,e)||n&&t.close(e)},t.handleEscape=function(e){t.props.closeOnEscape&&pB().getCode(e)===pB().Escape&&t.close(e)},t.handlePortalMouseLeave=function(e){var n=t.props,r=n.closeOnPortalMouseLeave,i=n.mouseLeaveDelay;r&&e.target===t.contentRef.current&&(t.mouseLeaveTimer=t.closeWithTimeout(e,i))},t.handlePortalMouseEnter=function(){t.props.closeOnPortalMouseLeave&&clearTimeout(t.mouseLeaveTimer)},t.handleTriggerBlur=function(e){for(var n=t.props,r=n.trigger,i=n.closeOnTriggerBlur,a=arguments.length,o=new Array(a>1?a-1:0),u=1;u<a;u++)o[u-1]=arguments[u];Oi.apply(void 0,[r,"props.onBlur",e].concat(o));var s=e.relatedTarget||document.activeElement,c=Oi(t.contentRef.current,"contains",s);i&&!c&&t.close(e)},t.handleTriggerClick=function(e){for(var n=t.props,r=n.trigger,i=n.closeOnTriggerClick,a=n.openOnTriggerClick,o=t.state.open,u=arguments.length,s=new Array(u>1?u-1:0),c=1;c<u;c++)s[c-1]=arguments[c];Oi.apply(void 0,[r,"props.onClick",e].concat(s)),o&&i?t.close(e):!o&&a&&t.open(e)},t.handleTriggerFocus=function(e){for(var n=t.props,r=n.trigger,i=n.openOnTriggerFocus,a=arguments.length,o=new Array(a>1?a-1:0),u=1;u<a;u++)o[u-1]=arguments[u];Oi.apply(void 0,[r,"props.onFocus",e].concat(o)),i&&t.open(e)},t.handleTriggerMouseLeave=function(e){clearTimeout(t.mouseEnterTimer);for(var n=t.props,r=n.trigger,i=n.closeOnTriggerMouseLeave,a=n.mouseLeaveDelay,o=arguments.length,u=new Array(o>1?o-1:0),s=1;s<o;s++)u[s-1]=arguments[s];Oi.apply(void 0,[r,"props.onMouseLeave",e].concat(u)),i&&(t.mouseLeaveTimer=t.closeWithTimeout(e,a))},t.handleTriggerMouseEnter=function(e){clearTimeout(t.mouseLeaveTimer);for(var n=t.props,r=n.trigger,i=n.mouseEnterDelay,a=n.openOnTriggerMouseEnter,o=arguments.length,u=new Array(o>1?o-1:0),s=1;s<o;s++)u[s-1]=arguments[s];Oi.apply(void 0,[r,"props.onMouseEnter",e].concat(u)),a&&(t.mouseEnterTimer=t.openWithTimeout(e,i))},t.open=function(e){Oi(t.props,"onOpen",e,Ye({},t.props,{open:!0})),t.setState({open:!0})},t.openWithTimeout=function(e,n){var r=Ye({},e);return setTimeout((function(){return t.open(r)}),n||0)},t.close=function(e){t.setState({open:!1}),Oi(t.props,"onClose",e,Ye({},t.props,{open:!1}))},t.closeWithTimeout=function(e,n){var r=Ye({},e);return setTimeout((function(){return t.close(r)}),n||0)},t.handleMount=function(){Oi(t.props,"onMount",null,t.props)},t.handleUnmount=function(){Oi(t.props,"onUnmount",null,t.props)},t.handleTriggerRef=function(e){t.triggerRef.current=e,aB(t.props.triggerRef,e)},t}Xe(t,e);var n=t.prototype;return n.componentWillUnmount=function(){clearTimeout(this.mouseEnterTimer),clearTimeout(this.mouseLeaveTimer)},n.render=function(){var e=this.props,t=e.children,n=e.eventPool,i=e.mountNode,a=e.trigger,o=this.state.open;return r.createElement(r.Fragment,null,o&&r.createElement(r.Fragment,null,r.createElement(_B,{innerRef:this.contentRef,mountNode:i,onMount:this.handleMount,onUnmount:this.handleUnmount},t),r.createElement(iB(),{name:"mouseleave",on:this.handlePortalMouseLeave,pool:n,target:this.contentRef}),r.createElement(iB(),{name:"mouseenter",on:this.handlePortalMouseEnter,pool:n,target:this.contentRef}),r.createElement(iB(),{name:"mousedown",on:this.handleDocumentMouseDown,pool:n}),r.createElement(iB(),{name:"click",on:this.handleDocumentClick,pool:n}),r.createElement(iB(),{name:"keydown",on:this.handleEscape,pool:n})),a&&r.createElement(hB,{innerRef:this.handleTriggerRef},r.cloneElement(a,{onBlur:this.handleTriggerBlur,onClick:this.handleTriggerClick,onFocus:this.handleTriggerFocus,onMouseLeave:this.handleTriggerMouseLeave,onMouseEnter:this.handleTriggerMouseEnter})))},t}(ea);xB.handledProps=["children","closeOnDocumentClick","closeOnEscape","closeOnPortalMouseLeave","closeOnTriggerBlur","closeOnTriggerClick","closeOnTriggerMouseLeave","defaultOpen","eventPool","mountNode","mouseEnterDelay","mouseLeaveDelay","onClose","onMount","onOpen","onUnmount","open","openOnTriggerClick","openOnTriggerFocus","openOnTriggerMouseEnter","trigger","triggerRef"],xB.propTypes={},xB.defaultProps={closeOnDocumentClick:!0,closeOnEscape:!0,eventPool:"default",openOnTriggerClick:!0},xB.autoControlledProps=["open"],xB.Inner=_B;var IB=xB;function TB(e){var t=e.blurring,n=e.className,i=e.children,a=e.content,o=e.dimmed,u=Mi(ji(t,"blurring"),ji(o,"dimmed"),"dimmable",n),s=Hi(TB,e),c=Gi(TB,e);return r.createElement(c,Ye({},s,{className:u}),Xi(i)?a:i)}TB.handledProps=["as","blurring","children","className","content","dimmed"],TB.propTypes={};var EB=TB,SB=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))||this).containerRef=(0,r.createRef)(),t.contentRef=(0,r.createRef)(),t.handleClick=function(e){var n=t.contentRef.current;Oi(t.props,"onClick",e,t.props),n&&n!==e.target&&bB(n,e)||Oi(t.props,"onClickOutside",e,t.props)},t}Xe(t,e);var n=t.prototype;return n.componentDidMount=function(){var e=this.props.active;this.toggleStyles(e)},n.componentDidUpdate=function(e){var t=this.props.active;e.active!==t&&this.toggleStyles(t)},n.toggleStyles=function(e){var t=this.containerRef.current;t&&t.style&&(e?t.style.setProperty("display","flex","important"):t.style.removeProperty("display"))},n.render=function(){var e=this.props,n=e.active,i=e.children,a=e.className,o=e.content,u=e.disabled,s=e.inverted,c=e.page,l=e.simple,f=e.verticalAlign,h=Mi("ui",ji(n,"active transition visible"),ji(u,"disabled"),ji(s,"inverted"),ji(c,"page"),ji(l,"simple"),Wi(f),"dimmer",a),d=Hi(t,this.props),p=Gi(t,this.props),v=Xi(i)?o:i;return r.createElement(hB,{innerRef:this.containerRef},r.createElement(p,Ye({},d,{className:h,onClick:this.handleClick}),v&&r.createElement("div",{className:"content",ref:this.contentRef},v)))},t}(r.Component);SB.handledProps=["active","as","children","className","content","disabled","inverted","onClick","onClickOutside","page","simple","verticalAlign"],SB.propTypes={};var CB=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handlePortalMount=function(){nB()&&(document.body.classList.add("dimmed"),document.body.classList.add("dimmable"))},t.handlePortalUnmount=function(){nB()&&(document.body.classList.remove("dimmed"),document.body.classList.remove("dimmable"))},t}return Xe(t,e),t.prototype.render=function(){var e=this.props,n=e.active,i=e.page,a=Hi(t,this.props);return i?r.createElement(IB,{closeOnEscape:!1,closeOnDocumentClick:!1,onMount:this.handlePortalMount,onUnmount:this.handlePortalUnmount,open:n,openOnTriggerClick:!1},r.createElement(SB,Ye({},a,{active:n,page:i}))):r.createElement(SB,Ye({},a,{active:n,page:i}))},t}(r.Component);function NB(e){var t=e.children,n=e.className,i=e.content,a=Mi("detail",n),o=Hi(NB,e),u=Gi(NB,e);return r.createElement(u,Ye({},o,{className:a}),Xi(t)?i:t)}CB.handledProps=["active","page"],CB.propTypes={},CB.Dimmable=EB,CB.Inner=SB,CB.create=Ia(CB,(function(e){return{content:e}})),NB.handledProps=["as","children","className","content"],NB.propTypes={},NB.create=Ia(NB,(function(e){return{content:e}}));var AB=NB;function RB(e){var t=e.children,n=e.circular,i=e.className,a=e.color,o=e.content,u=e.size,s=e.tag,c=Mi("ui",a,u,ji(n,"circular"),ji(s,"tag"),"labels",i),l=Hi(RB,e),f=Gi(RB,e);return r.createElement(f,Ye({},l,{className:c}),Xi(t)?o:t)}RB.handledProps=["as","children","circular","className","color","content","size","tag"],RB.propTypes={};var PB=RB,DB=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){var n=t.props.onClick;n&&n(e,t.props)},t.handleIconOverrides=function(e){return{onClick:function(n){Oi(e,"onClick",n),Oi(t.props,"onRemove",n,t.props)}}},t}return Xe(t,e),t.prototype.render=function(){var e=this.props,n=e.active,i=e.attached,a=e.basic,o=e.children,u=e.circular,s=e.className,c=e.color,l=e.content,f=e.corner,h=e.detail,d=e.empty,p=e.floating,v=e.horizontal,m=e.icon,y=e.image,g=e.onRemove,k=e.pointing,b=e.prompt,w=e.removeIcon,_=e.ribbon,x=e.size,I=e.tag,T=Mi("ui",c,(!0===k?"pointing":("left"===k||"right"===k)&&k+" pointing")||("above"===k||"below"===k)&&"pointing "+k,x,ji(n,"active"),ji(a,"basic"),ji(u,"circular"),ji(d,"empty"),ji(p,"floating"),ji(v,"horizontal"),ji(!0===y,"image"),ji(b,"prompt"),ji(I,"tag"),qi(f,"corner"),qi(_,"ribbon"),Vi(i,"attached"),"label",s),E=Hi(t,this.props),S=Gi(t,this.props);if(!Xi(o))return r.createElement(S,Ye({},E,{className:T,onClick:this.handleClick}),o);var C=Ji(w)?"delete":w;return r.createElement(S,Ye({className:T,onClick:this.handleClick},E),Lo.create(m,{autoGenerateKey:!1}),"boolean"!==typeof y&&FB.create(y,{autoGenerateKey:!1}),l,AB.create(h,{autoGenerateKey:!1}),g&&Lo.create(C,{autoGenerateKey:!1,overrideProps:this.handleIconOverrides}))},t}(r.Component);function OB(e){var t=e.children,n=e.className,i=e.content,a=e.size,o=Mi("ui",a,n,"images"),u=Hi(OB,e),s=Gi(OB,e);return r.createElement(s,Ye({},u,{className:o}),Xi(t)?i:t)}DB.handledProps=["active","as","attached","basic","children","circular","className","color","content","corner","detail","empty","floating","horizontal","icon","image","onClick","onRemove","pointing","prompt","removeIcon","ribbon","size","tag"],DB.propTypes={},DB.Detail=AB,DB.Group=PB,DB.create=Ia(DB,(function(e){return{content:e}})),OB.handledProps=["as","children","className","content","size"],OB.propTypes={};var LB=OB;function MB(e){var t=e.avatar,n=e.bordered,i=e.centered,a=e.children,o=e.circular,u=e.className,s=e.content,c=e.dimmer,l=e.disabled,f=e.floated,h=e.fluid,d=e.hidden,p=e.href,v=e.inline,m=e.label,y=e.rounded,g=e.size,k=e.spaced,b=e.verticalAlign,w=e.wrapped,_=e.ui,x=Mi(ji(_,"ui"),g,ji(t,"avatar"),ji(n,"bordered"),ji(o,"circular"),ji(i,"centered"),ji(l,"disabled"),ji(h,"fluid"),ji(d,"hidden"),ji(v,"inline"),ji(y,"rounded"),qi(k,"spaced"),Vi(f,"floated"),Wi(b),"image",u),I=Hi(MB,e),T=Zq(I,{htmlProps:Jq}),E=T[0],S=T[1],C=Gi(MB,e,(function(){if(!_a(c)||!_a(m)||!_a(w)||!Xi(a))return"div"}));return Xi(a)?Xi(s)?"img"===C?r.createElement(C,Ye({},S,E,{className:x})):r.createElement(C,Ye({},S,{className:x,href:p}),CB.create(c,{autoGenerateKey:!1}),DB.create(m,{autoGenerateKey:!1}),r.createElement("img",E)):r.createElement(C,Ye({},I,{className:x}),s):r.createElement(C,Ye({},I,{className:x}),a)}MB.handledProps=["as","avatar","bordered","centered","children","circular","className","content","dimmer","disabled","floated","fluid","hidden","href","inline","label","rounded","size","spaced","ui","verticalAlign","wrapped"],MB.Group=LB,MB.propTypes={},MB.defaultProps={as:"img",ui:!0},MB.create=Ia(MB,(function(e){return{src:e}}));var FB=MB;function UB(e){var t=e.children,n=e.className,i=e.content,a=Mi("sub header",n),o=Hi(UB,e),u=Gi(UB,e);return r.createElement(u,Ye({},o,{className:a}),Xi(t)?i:t)}UB.handledProps=["as","children","className","content"],UB.propTypes={},UB.create=Ia(UB,(function(e){return{content:e}}));var jB=UB;function VB(e){var t=e.children,n=e.className,i=e.content,a=Mi("content",n),o=Hi(VB,e),u=Gi(VB,e);return r.createElement(u,Ye({},o,{className:a}),Xi(t)?i:t)}VB.handledProps=["as","children","className","content"],VB.propTypes={};var qB=VB;function BB(e){var t=e.attached,n=e.block,i=e.children,a=e.className,o=e.color,u=e.content,s=e.disabled,c=e.dividing,l=e.floated,f=e.icon,h=e.image,d=e.inverted,p=e.size,v=e.sub,m=e.subheader,y=e.textAlign,g=Mi("ui",o,p,ji(n,"block"),ji(s,"disabled"),ji(c,"dividing"),Vi(l,"floated"),ji(!0===f,"icon"),ji(!0===h,"image"),ji(d,"inverted"),ji(v,"sub"),qi(t,"attached"),zi(y),"header",a),k=Hi(BB,e),b=Gi(BB,e);if(!Xi(i))return r.createElement(b,Ye({},k,{className:g}),i);var w=Lo.create(f,{autoGenerateKey:!1}),_=FB.create(h,{autoGenerateKey:!1}),x=jB.create(m,{autoGenerateKey:!1});return w||_?r.createElement(b,Ye({},k,{className:g}),w||_,(u||x)&&r.createElement(qB,null,u,x)):r.createElement(b,Ye({},k,{className:g}),u,x)}BB.handledProps=["as","attached","block","children","className","color","content","disabled","dividing","floated","icon","image","inverted","size","sub","subheader","textAlign"],BB.propTypes={},BB.Content=qB,BB.Subheader=jB;var zB=BB;function WB(e){var t=e.children,n=e.className,i=e.compact,a=e.content,o=e.horizontal,u=e.piled,s=e.raised,c=e.size,l=e.stacked,f=Mi("ui",c,ji(i,"compact"),ji(o,"horizontal"),ji(u,"piled"),ji(s,"raised"),ji(l,"stacked"),"segments",n),h=Hi(WB,e),d=Gi(WB,e);return r.createElement(d,Ye({},h,{className:f}),Xi(t)?a:t)}WB.handledProps=["as","children","className","compact","content","horizontal","piled","raised","size","stacked"],WB.propTypes={};var KB=WB;function HB(e){var t=e.children,n=e.className,i=e.content,a=Mi("inline",n),o=Hi(HB,e),u=Gi(HB,e);return r.createElement(u,Ye({},o,{className:a}),Xi(t)?i:t)}HB.handledProps=["as","children","className","content"],HB.propTypes={};var GB=HB;function QB(e){var t=e.attached,n=e.basic,i=e.children,a=e.circular,o=e.className,u=e.clearing,s=e.color,c=e.compact,l=e.content,f=e.disabled,h=e.floated,d=e.inverted,p=e.loading,v=e.placeholder,m=e.padded,y=e.piled,g=e.raised,k=e.secondary,b=e.size,w=e.stacked,_=e.tertiary,x=e.textAlign,I=e.vertical,T=Mi("ui",s,b,ji(n,"basic"),ji(a,"circular"),ji(u,"clearing"),ji(c,"compact"),ji(f,"disabled"),ji(d,"inverted"),ji(p,"loading"),ji(v,"placeholder"),ji(y,"piled"),ji(g,"raised"),ji(k,"secondary"),ji(w,"stacked"),ji(_,"tertiary"),ji(I,"vertical"),qi(t,"attached"),qi(m,"padded"),zi(x),Vi(h,"floated"),"segment",o),E=Hi(QB,e),S=Gi(QB,e);return r.createElement(S,Ye({},E,{className:T}),Xi(i)?l:i)}QB.handledProps=["as","attached","basic","children","circular","className","clearing","color","compact","content","disabled","floated","inverted","loading","padded","piled","placeholder","raised","secondary","size","stacked","tertiary","textAlign","vertical"],QB.Group=KB,QB.Inline=GB,QB.propTypes={};var $B=QB;function YB(e){var t=e.children,n=e.className,i=e.content,a=e.textAlign,o=Mi(zi(a),"description",n),u=Hi(YB,e),s=Gi(YB,e);return r.createElement(s,Ye({},u,{className:o}),Xi(t)?i:t)}YB.handledProps=["as","children","className","content","textAlign"],YB.propTypes={};var XB=YB;function JB(e){var t=e.children,n=e.className,i=e.content,a=e.textAlign,o=Mi(zi(a),"header",n),u=Hi(JB,e),s=Gi(JB,e);return r.createElement(s,Ye({},u,{className:o}),Xi(t)?i:t)}JB.handledProps=["as","children","className","content","textAlign"],JB.propTypes={};var ZB=JB;function ez(e){var t=e.children,n=e.className,i=e.content,a=e.textAlign,o=Mi(zi(a),"meta",n),u=Hi(ez,e),s=Gi(ez,e);return r.createElement(s,Ye({},u,{className:o}),Xi(t)?i:t)}ez.handledProps=["as","children","className","content","textAlign"],ez.propTypes={};var tz=ez;function nz(e){var t=e.children,n=e.className,i=e.content,a=e.description,o=e.extra,u=e.header,s=e.meta,c=e.textAlign,l=Mi(ji(o,"extra"),zi(c),"content",n),f=Hi(nz,e),h=Gi(nz,e);return Xi(t)?Xi(i)?r.createElement(h,Ye({},f,{className:l}),xa(ZB,(function(e){return{content:e}}),u,{autoGenerateKey:!1}),xa(tz,(function(e){return{content:e}}),s,{autoGenerateKey:!1}),xa(XB,(function(e){return{content:e}}),a,{autoGenerateKey:!1})):r.createElement(h,Ye({},f,{className:l}),i):r.createElement(h,Ye({},f,{className:l}),t)}nz.handledProps=["as","children","className","content","description","extra","header","meta","textAlign"],nz.propTypes={};var rz=nz;function iz(e){var t=e.centered,n=e.children,i=e.className,a=e.content,o=e.doubling,u=e.items,s=e.itemsPerRow,c=e.stackable,l=e.textAlign,f=Mi("ui",ji(t,"centered"),ji(o,"doubling"),ji(c,"stackable"),zi(l),Ki(s),"cards",i),h=Hi(iz,e),d=Gi(iz,e);if(!Xi(n))return r.createElement(d,Ye({},h,{className:f}),n);if(!Xi(a))return r.createElement(d,Ye({},h,{className:f}),a);var p=ki(u,(function(e){var t,n=null!=(t=e.key)?t:[e.header,e.description].join("-");return r.createElement(oz,Ye({key:n},e))}));return r.createElement(d,Ye({},h,{className:f}),p)}iz.handledProps=["as","centered","children","className","content","doubling","items","itemsPerRow","stackable","textAlign"],iz.propTypes={};var az=iz,oz=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){var n=t.props.onClick;n&&n(e,t.props)},t}return Xe(t,e),t.prototype.render=function(){var e=this.props,n=e.centered,i=e.children,a=e.className,o=e.color,u=e.content,s=e.description,c=e.extra,l=e.fluid,f=e.header,h=e.href,d=e.image,p=e.link,v=e.meta,m=e.onClick,y=e.raised,g=Mi("ui",o,ji(n,"centered"),ji(l,"fluid"),ji(p,"link"),ji(y,"raised"),"card",a),k=Hi(t,this.props),b=Gi(t,this.props,(function(){if(m)return"a"}));return Xi(i)?Xi(u)?r.createElement(b,Ye({},k,{className:g,href:h,onClick:this.handleClick}),FB.create(d,{autoGenerateKey:!1,defaultProps:{ui:!1,wrapped:!0}}),(s||f||v)&&r.createElement(rz,{description:s,header:f,meta:v}),c&&r.createElement(rz,{extra:!0},c)):r.createElement(b,Ye({},k,{className:g,href:h,onClick:this.handleClick}),u):r.createElement(b,Ye({},k,{className:g,href:h,onClick:this.handleClick}),i)},t}(r.Component);function uz(e){var t=e.children,n=e.className,i=e.content,a=Mi(n,"description"),o=Hi(uz,e),u=Gi(uz,e);return r.createElement(u,Ye({},o,{className:a}),Xi(t)?i:t)}oz.handledProps=["as","centered","children","className","color","content","description","extra","fluid","header","href","image","link","meta","onClick","raised"],oz.propTypes={},oz.Content=rz,oz.Description=XB,oz.Group=az,oz.Header=ZB,oz.Meta=tz,uz.handledProps=["as","children","className","content"],uz.propTypes={},uz.create=Ia(uz,(function(e){return{content:e}}));var sz=uz;function cz(e){var t=e.children,n=e.className,i=e.content,a=Mi("header",n),o=Hi(cz,e),u=Gi(cz,e);return r.createElement(u,Ye({},o,{className:a}),Xi(t)?i:t)}cz.handledProps=["as","children","className","content"],cz.propTypes={},cz.create=Ia(cz,(function(e){return{content:e}}));var lz=cz;function fz(e){var t=e.children,n=e.className,i=e.content,a=e.description,o=e.floated,u=e.header,s=e.verticalAlign,c=Mi(Vi(o,"floated"),Wi(s),"content",n),l=Hi(fz,e),f=Gi(fz,e);return Xi(t)?r.createElement(f,Ye({},l,{className:c}),lz.create(u),sz.create(a),i):r.createElement(f,Ye({},l,{className:c}),t)}fz.handledProps=["as","children","className","content","description","floated","header","verticalAlign"],fz.propTypes={},fz.create=Ia(fz,(function(e){return{content:e}}));var hz=fz;function dz(e){var t=e.className,n=e.verticalAlign,i=Mi(Wi(n),t),a=Hi(dz,e);return r.createElement(Lo,Ye({},a,{className:i}))}dz.handledProps=["className","verticalAlign"],dz.propTypes={},dz.create=Ia(dz,(function(e){return{name:e}}));var pz=dz,vz=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){t.props.disabled||Oi(t.props,"onClick",e,t.props)},t}return Xe(t,e),t.prototype.render=function(){var e=this.props,n=e.active,i=e.children,a=e.className,o=e.content,u=e.description,s=e.disabled,c=e.header,l=e.icon,f=e.image,h=e.value,d=Gi(t,this.props),p=Mi(ji(n,"active"),ji(s,"disabled"),ji("li"!==d,"item"),a),v=Hi(t,this.props),m="li"===d?{value:h}:{"data-value":h};if(!Xi(i))return r.createElement(d,Ye({},m,{role:"listitem",className:p,onClick:this.handleClick},v),i);var y=pz.create(l,{autoGenerateKey:!1}),g=FB.create(f,{autoGenerateKey:!1});if(!(0,r.isValidElement)(o)&&ga(o))return r.createElement(d,Ye({},m,{role:"listitem",className:p,onClick:this.handleClick},v),y||g,hz.create(o,{autoGenerateKey:!1,defaultProps:{header:c,description:u}}));var k=lz.create(c,{autoGenerateKey:!1}),b=sz.create(u,{autoGenerateKey:!1});return y||g?r.createElement(d,Ye({},m,{role:"listitem",className:p,onClick:this.handleClick},v),y||g,(o||k||b)&&r.createElement(hz,null,k,b,o)):r.createElement(d,Ye({},m,{role:"listitem",className:p,onClick:this.handleClick},v),k,b,o)},t}(r.Component);vz.handledProps=["active","as","children","className","content","description","disabled","header","icon","image","onClick","value"],vz.propTypes={},vz.create=Ia(vz,(function(e){return{content:e}}));var mz=vz;function yz(e){var t=e.children,n=e.className,i=e.content,a=Hi(yz,e),o=Gi(yz,e),u=Mi(ji("ul"!==o&&"ol"!==o,"list"),n);return r.createElement(o,Ye({},a,{className:u}),Xi(t)?i:t)}yz.handledProps=["as","children","className","content"],yz.propTypes={};var gz=yz,kz=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleItemOverrides=function(e){return{onClick:function(n,r){Oi(e,"onClick",n,r),Oi(t.props,"onItemClick",n,r)}}},t}return Xe(t,e),t.prototype.render=function(){var e=this,n=this.props,i=n.animated,a=n.bulleted,o=n.celled,u=n.children,s=n.className,c=n.content,l=n.divided,f=n.floated,h=n.horizontal,d=n.inverted,p=n.items,v=n.link,m=n.ordered,y=n.relaxed,g=n.selection,k=n.size,b=n.verticalAlign,w=Mi("ui",k,ji(i,"animated"),ji(a,"bulleted"),ji(o,"celled"),ji(l,"divided"),ji(h,"horizontal"),ji(d,"inverted"),ji(v,"link"),ji(m,"ordered"),ji(g,"selection"),qi(y,"relaxed"),Vi(f,"floated"),Wi(b),"list",s),_=Hi(t,this.props),x=Gi(t,this.props);return Xi(u)?Xi(c)?r.createElement(x,Ye({role:"list",className:w},_),ki(p,(function(t){return mz.create(t,{overrideProps:e.handleItemOverrides})}))):r.createElement(x,Ye({role:"list",className:w},_),c):r.createElement(x,Ye({role:"list",className:w},_),u)},t}(r.Component);kz.handledProps=["animated","as","bulleted","celled","children","className","content","divided","floated","horizontal","inverted","items","link","onItemClick","ordered","relaxed","selection","size","verticalAlign"],kz.propTypes={},kz.Content=hz,kz.Description=sz,kz.Header=lz,kz.Icon=pz,kz.Item=mz,kz.List=gz;var bz=kz;var wz=function(){var e=l(r.useState([]),2),t=e[0],n=e[1],i=Ie(),a=new URLSearchParams(i.search).get("type");return r.useEffect((function(){bj(WU(xF(wq,"categories")),(function(e){var t=[];e.forEach((function(e){t.push(e.data())})),n(t)}))}),[]),(0,Ev.jsx)(bz,{animated:!0,selection:!0,children:t.map((function(e){return(0,Ev.jsx)(bz.Item,{as:Ge,to:"".concat(i.pathname,"?type=").concat(e.name),active:a===e.name,children:e.name},e.name)}))})};var _z=function(e,t){return(0,Ev.jsxs)(oz,{as:Ge,to:"/bookManage/bookEdit/".concat(e.id),style:{width:"135px",height:"250px"},centered:!0,children:[(0,Ev.jsx)(FB,{as:"img",src:e.bookCoverUrl||"https://react.semantic-ui.com/images/wireframe/image.png",size:"small",style:{width:"135px",height:"200px",objectFit:"cover"}}),(0,Ev.jsx)(oz.Content,{style:{padding:"10px 5px 10px 5px"},children:(0,Ev.jsx)(oz.Header,{style:{fontSize:"12px",overflowWrap:"word-wrap",textAlign:"left"},children:e.bookName})})]},e.id)};var xz=function(){var e=l(r.useState([]),2),t=e[0],n=e[1],i=Ie(),a=new URLSearchParams(i.search).get("type");return r.useEffect((function(){a?_q.firestore().collection("books").where("bookType","==",a).orderBy("bookName","asc").get().then((function(e){var t=e.docs.map((function(e){var t=e.id;return as(as({},e.data()),{},{id:t})}));n(t)})):_q.firestore().collection("books").orderBy("bookName","asc").get().then((function(e){var t=e.docs.map((function(e){var t=e.id;return as(as({},e.data()),{},{id:t})}));n(t)}))}),[a]),(0,Ev.jsx)(Iq,{fluid:!0,children:(0,Ev.jsxs)(Aq,{style:{margin:"10px 20px 10px 20px"},children:[(0,Ev.jsxs)(Aq.Row,{children:[(0,Ev.jsx)(Aq.Column,{width:2,children:(0,Ev.jsx)(zB,{children:"\u66f8\u7c4d\u5206\u985e"})}),(0,Ev.jsx)(Aq.Column,{width:14,children:(0,Ev.jsx)(zB,{children:"\u66f8\u7c4d\u5217\u8868"})})]}),(0,Ev.jsxs)(Aq.Row,{stretched:!0,children:[(0,Ev.jsx)(Aq.Column,{width:2,children:(0,Ev.jsx)($B,{children:(0,Ev.jsx)(wz,{})})}),(0,Ev.jsx)(Aq.Column,{width:14,children:(0,Ev.jsx)(Aq.Row,{children:(0,Ev.jsx)($B,{children:(0,Ev.jsx)(Aq,{columns:7,children:t.map((function(e){return(0,Ev.jsx)(Aq.Column,{centered:!0,children:(0,Ev.jsx)(oz.Group,{children:(0,r.createElement)(_z,as(as({},e),{},{key:e.id}))})})}))})})})})]})]})})};function Iz(e){var t=e.children,n=e.className,i=e.content,a=e.hidden,o=e.visible,u=Mi(ji(o,"visible"),ji(a,"hidden"),"content",n),s=Hi(Iz,e),c=Gi(Iz,e);return r.createElement(c,Ye({},s,{className:u}),Xi(t)?i:t)}Iz.handledProps=["as","children","className","content","hidden","visible"],Iz.propTypes={};var Tz=Iz;function Ez(e){var t=e.attached,n=e.basic,i=e.buttons,a=e.children,o=e.className,u=e.color,s=e.compact,c=e.content,l=e.floated,f=e.fluid,h=e.icon,d=e.inverted,p=e.labeled,v=e.negative,m=e.positive,y=e.primary,g=e.secondary,k=e.size,b=e.toggle,w=e.vertical,_=e.widths,x=Mi("ui",u,k,ji(n,"basic"),ji(s,"compact"),ji(f,"fluid"),ji(h,"icon"),ji(d,"inverted"),ji(p,"labeled"),ji(v,"negative"),ji(m,"positive"),ji(y,"primary"),ji(g,"secondary"),ji(b,"toggle"),ji(w,"vertical"),qi(t,"attached"),Vi(l,"floated"),Ki(_),"buttons",o),I=Hi(Ez,e),T=Gi(Ez,e);return _a(i)?r.createElement(T,Ye({},I,{className:x}),Xi(a)?c:a):r.createElement(T,Ye({},I,{className:x}),ki(i,(function(e){return Rz.create(e)})))}Ez.handledProps=["as","attached","basic","buttons","children","className","color","compact","content","floated","fluid","icon","inverted","labeled","negative","positive","primary","secondary","size","toggle","vertical","widths"],Ez.propTypes={};var Sz=Ez;function Cz(e){var t=e.className,n=e.text,i=Mi("or",t),a=Hi(Cz,e),o=Gi(Cz,e);return r.createElement(o,Ye({},a,{className:i,"data-text":n}))}Cz.handledProps=["as","className","text"],Cz.propTypes={};var Nz=Cz,Az=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))||this).ref=(0,r.createRef)(),t.computeElementType=function(){var e=t.props,n=e.attached,r=e.label;if(!_a(n)||!_a(r))return"div"},t.computeTabIndex=function(e){var n=t.props,r=n.disabled,i=n.tabIndex;return _a(i)?r?-1:"div"===e?0:void 0:i},t.focus=function(e){return Oi(t.ref.current,"focus",e)},t.handleClick=function(e){t.props.disabled?e.preventDefault():Oi(t.props,"onClick",e,t.props)},t.hasIconClass=function(){var e=t.props,n=e.labelPosition,r=e.children,i=e.content,a=e.icon;return!0===a||a&&(n||Xi(r)&&_a(i))},t}Xe(t,e);var n=t.prototype;return n.computeButtonAriaRole=function(e){var t=this.props.role;return _a(t)?"button"!==e?"button":void 0:t},n.render=function(){var e=this.props,n=e.active,i=e.animated,a=e.attached,o=e.basic,u=e.children,s=e.circular,c=e.className,l=e.color,f=e.compact,h=e.content,d=e.disabled,p=e.floated,v=e.fluid,m=e.icon,y=e.inverted,g=e.label,k=e.labelPosition,b=e.loading,w=e.negative,_=e.positive,x=e.primary,I=e.secondary,T=e.size,E=e.toggle,S=e.type,C=Mi(l,T,ji(n,"active"),ji(o,"basic"),ji(s,"circular"),ji(f,"compact"),ji(v,"fluid"),ji(this.hasIconClass(),"icon"),ji(y,"inverted"),ji(b,"loading"),ji(w,"negative"),ji(_,"positive"),ji(x,"primary"),ji(I,"secondary"),ji(E,"toggle"),qi(i,"animated"),qi(a,"attached")),N=Mi(qi(k||!!g,"labeled")),A=Mi(ji(d,"disabled"),Vi(p,"floated")),R=Hi(t,this.props),P=Gi(t,this.props,this.computeElementType),D=this.computeTabIndex(P);if(!_a(g)){var O=Mi("ui",C,"button",c),L=Mi("ui",N,"button",c,A),M=DB.create(g,{defaultProps:{basic:!0,pointing:"left"===k?"right":"left"},autoGenerateKey:!1});return r.createElement(P,Ye({},R,{className:L,onClick:this.handleClick}),"left"===k&&M,r.createElement(hB,{innerRef:this.ref},r.createElement("button",{className:O,"aria-pressed":E?!!n:void 0,disabled:d,type:S,tabIndex:D},Lo.create(m,{autoGenerateKey:!1})," ",h)),("right"===k||!k)&&M)}var F=Mi("ui",C,A,N,"button",c),U=!Xi(u),j=this.computeButtonAriaRole(P);return r.createElement(hB,{innerRef:this.ref},r.createElement(P,Ye({},R,{className:F,"aria-pressed":E?!!n:void 0,disabled:d&&"button"===P||void 0,onClick:this.handleClick,role:j,type:S,tabIndex:D}),U&&u,!U&&Lo.create(m,{autoGenerateKey:!1}),!U&&h))},t}(r.Component);Az.handledProps=["active","animated","as","attached","basic","children","circular","className","color","compact","content","disabled","floated","fluid","icon","inverted","label","labelPosition","loading","negative","onClick","positive","primary","role","secondary","size","tabIndex","toggle","type"],Az.propTypes={},Az.defaultProps={as:"button"},Az.Content=Tz,Az.Group=Sz,Az.Or=Nz,Az.create=Ia(Az,(function(e){return{content:e}}));var Rz=Az;var Pz=function(e,t,n){"__proto__"==t&&Ci?Ci(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n},Dz=Object.prototype.hasOwnProperty;var Oz=function(e,t,n){var r=e[t];Dz.call(e,t)&&et(r,n)&&(void 0!==n||t in e)||Pz(e,t,n)};var Lz=function(e,t,n,r){if(!Et(e))return e;for(var i=-1,a=(t=ri(t,e)).length,o=a-1,u=e;null!=u&&++i<a;){var s=ii(t[i]),c=n;if("__proto__"===s||"constructor"===s||"prototype"===s)return e;if(i!=o){var l=u[s];void 0===(c=r?r(l,s,u):void 0)&&(c=Et(l)?l:Gn(t[i+1])?[]:{})}Oz(u,s,c),u=u[s]}return e};var Mz=function(e,t,n){return null==e?e:Lz(e,t,n)},Fz=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))||this).inputRef=(0,r.createRef)(),t.labelRef=(0,r.createRef)(),t.canToggle=function(){var e=t.props,n=e.disabled,r=e.radio,i=e.readOnly,a=t.state.checked;return!n&&!i&&!(r&&a)},t.computeTabIndex=function(){var e=t.props,n=e.disabled,r=e.tabIndex;return _a(r)?n?-1:0:r},t.handleClick=function(e){var n=t.props.id,r=t.state,i=r.checked,a=r.indeterminate,o=Oi(t.inputRef.current,"contains",e.target),u=Oi(t.labelRef.current,"contains",e.target),s=!u&&!o,c=!_a(n);u&&c||Oi(t.props,"onClick",e,Ye({},t.props,{checked:!i,indeterminate:!!a})),t.isClickFromMouse&&(t.isClickFromMouse=!1,u&&!c&&t.handleChange(e),s&&t.handleChange(e),u&&c&&e.stopPropagation())},t.handleChange=function(e){var n=t.state.checked;t.canToggle()&&(Oi(t.props,"onChange",e,Ye({},t.props,{checked:!n,indeterminate:!1})),t.setState({checked:!n,indeterminate:!1}))},t.handleMouseDown=function(e){var n=t.state,r=n.checked,i=n.indeterminate;Oi(t.props,"onMouseDown",e,Ye({},t.props,{checked:!!r,indeterminate:!!i})),e.defaultPrevented||Oi(t.inputRef.current,"focus"),e.preventDefault()},t.handleMouseUp=function(e){var n=t.state,r=n.checked,i=n.indeterminate;t.isClickFromMouse=!0,Oi(t.props,"onMouseUp",e,Ye({},t.props,{checked:!!r,indeterminate:!!i}))},t.setIndeterminate=function(){var e=t.state.indeterminate;Mz(t.inputRef,"current.indeterminate",!!e)},t}Xe(t,e);var n=t.prototype;return n.componentDidMount=function(){this.setIndeterminate()},n.componentDidUpdate=function(){this.setIndeterminate()},n.render=function(){var e=this.props,n=e.className,i=e.disabled,a=e.label,o=e.id,u=e.name,s=e.radio,c=e.readOnly,l=e.slider,f=e.toggle,h=e.type,d=e.value,p=this.state,v=p.checked,m=p.indeterminate,y=Mi("ui",ji(v,"checked"),ji(i,"disabled"),ji(m,"indeterminate"),ji(_a(a),"fitted"),ji(s,"radio"),ji(c,"read-only"),ji(l,"slider"),ji(f,"toggle"),"checkbox",n),g=Hi(t,this.props),k=Gi(t,this.props),b=Zq(g,{htmlProps:Yq}),w=b[0],_=b[1],x=Ea(a,{defaultProps:{htmlFor:o},autoGenerateKey:!1})||r.createElement("label",{htmlFor:o});return r.createElement(k,Ye({},_,{className:y,onClick:this.handleClick,onChange:this.handleChange,onMouseDown:this.handleMouseDown,onMouseUp:this.handleMouseUp}),r.createElement(hB,{innerRef:this.inputRef},r.createElement("input",Ye({},w,{checked:v,className:"hidden",disabled:i,id:o,name:u,readOnly:!0,tabIndex:this.computeTabIndex(),type:h,value:d}))),r.createElement(hB,{innerRef:this.labelRef},x))},t}(ea);function Uz(e){var t=e.slider,n=e.toggle,i=e.type,a=Hi(Uz,e),o=!(t||n)||void 0;return r.createElement(Fz,Ye({},a,{type:i,radio:o,slider:t,toggle:n}))}Fz.handledProps=["as","checked","className","defaultChecked","defaultIndeterminate","disabled","fitted","id","indeterminate","label","name","onChange","onClick","onMouseDown","onMouseUp","radio","readOnly","slider","tabIndex","toggle","type","value"],Fz.propTypes={},Fz.defaultProps={type:"checkbox"},Fz.autoControlledProps=["checked","indeterminate"],Uz.handledProps=["slider","toggle","type"],Uz.propTypes={},Uz.defaultProps={type:"radio"};var jz=Uz;function Vz(e){var t=e.children,n=e.className,i=e.content,a=e.control,o=e.disabled,u=e.error,s=e.inline,c=e.label,l=e.required,f=e.type,h=e.width,d=e.id,p=Mi(ji(o,"disabled"),ji(u,"error"),ji(s,"inline"),ji(l,"required"),Ki(h,"wide"),"field",n),v=Hi(Vz,e),m=Gi(Vz,e),y=oi(u,"pointing","above"),g=DB.create(u,{autoGenerateKey:!1,defaultProps:{prompt:!0,pointing:y,id:d?d+"-error-message":void 0,role:"alert","aria-atomic":!0}}),k=("below"===y||"right"===y)&&g,b=("above"===y||"left"===y)&&g;if(_a(a))return _a(c)?r.createElement(m,Ye({},v,{className:p,id:d}),Xi(t)?i:t):r.createElement(m,Ye({},v,{className:p,id:d}),k,Ea(c,{autoGenerateKey:!1}),b);var w={"aria-describedby":d&&u?d+"-error-message":null,"aria-invalid":!!u||void 0},_=Ye({},v,{content:i,children:t,disabled:o,required:l,type:f,id:d});return"input"!==a||"checkbox"!==f&&"radio"!==f?a===Fz||a===jz?r.createElement(m,{className:p},k,(0,r.createElement)(a,Ye({},w,_,{label:c})),b):r.createElement(m,{className:p},Ea(c,{defaultProps:{htmlFor:d},autoGenerateKey:!1}),k,(0,r.createElement)(a,Ye({},w,_)),b):r.createElement(m,{className:p},r.createElement("label",null,k,(0,r.createElement)(a,Ye({},w,_))," ",c,b))}Vz.handledProps=["as","children","className","content","control","disabled","error","id","inline","label","required","type","width"],Vz.propTypes={};var qz=Vz;function Bz(e){var t=e.control,n=Hi(Bz,e),i=Gi(Bz,e);return r.createElement(i,Ye({},n,{control:t}))}Bz.handledProps=["as","control"],Bz.propTypes={},Bz.defaultProps={as:qz,control:Rz};var zz=Bz;function Wz(e){var t=e.control,n=Hi(Wz,e),i=Gi(Wz,e);return r.createElement(i,Ye({},n,{control:t}))}Wz.handledProps=["as","control"],Wz.propTypes={},Wz.defaultProps={as:qz,control:Fz};var Kz=Wz;var Hz=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var a=e[t];a&&(i[r++]=a)}return i};var Gz=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0};var Qz=function(e,t){var n=!0;return yi(e,(function(e,r,i){return n=!!t(e,r,i)})),n};var $z=function(e,t,n){var r=En(e)?Gz:Qz;return n&&$i(e,t,n)&&(t=void 0),r(e,vi(t,3))};var Yz=function(e,t,n,r){var i=-1,a=aa,o=!0,u=e.length,s=[],c=t.length;if(!u)return s;n&&(t=Je(t,Xn(n))),r?(a=oa,o=!1):t.length>=200&&(a=yn,o=!1,t=new vn(t));e:for(;++i<u;){var l=e[i],f=null==n?l:n(l);if(l=r||0!==l?l:0,o&&f===f){for(var h=c;h--;)if(t[h]===f)continue e;s.push(l)}else a(t,f,r)||s.push(l)}return s};var Xz=function(e){return On(e)&&hr(e)},Jz=Di((function(e,t){return Xz(e)?Yz(e,t):[]})),Zz=Jz;var eW=function(e){return function(t,n,r){var i=Object(t);if(!hr(t)){var a=vi(n,3);t=dr(t),n=function(e){return a(i[e],e,i)}}var o=e(t,n,r);return o>-1?i[a?t[o]:o]:void 0}},tW=Math.max;var nW=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Bq(n);return i<0&&(i=tW(r+i,0)),ta(e,vi(t,3),i)},rW=eW(nW);var iW=function(e,t,n){var r=null==e?0:e.length;return r?(t=n||void 0===t?1:Bq(t),_i(e,0,(t=r-t)<0?0:t)):[]},aW=Object.prototype.hasOwnProperty;var oW=function(e){if(null==e)return!0;if(hr(e)&&(En(e)||"string"==typeof e||"function"==typeof e.splice||Kn(e)||rr(e)||Vn(e)))return!e.length;var t=Pr(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(ur(e))return!fr(e).length;for(var n in e)if(aW.call(e,n))return!1;return!0},uW=hi("length"),sW="\\ud800-\\udfff",cW="["+sW+"]",lW="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",fW="\\ud83c[\\udffb-\\udfff]",hW="[^"+sW+"]",dW="(?:\\ud83c[\\udde6-\\uddff]){2}",pW="[\\ud800-\\udbff][\\udc00-\\udfff]",vW="(?:"+lW+"|"+fW+")"+"?",mW="[\\ufe0e\\ufe0f]?",yW=mW+vW+("(?:\\u200d(?:"+[hW,dW,pW].join("|")+")"+mW+vW+")*"),gW="(?:"+[hW+lW+"?",lW,dW,pW,cW].join("|")+")",kW=RegExp(fW+"(?="+fW+")|"+gW+yW,"g");var bW=function(e){for(var t=kW.lastIndex=0;kW.test(e);)++t;return t};var wW=function(e){return po(e)?bW(e):uW(e)};var _W=function(e){if(null==e)return 0;if(hr(e))return ba(e)?wW(e):e.length;var t=Pr(e);return"[object Map]"==t||"[object Set]"==t?e.size:fr(e).length},xW=mt?mt.isConcatSpreadable:void 0;var IW=function(e){return En(e)||Vn(e)||!!(xW&&e&&e[xW])};var TW=function e(t,n,r,i,a){var o=-1,u=t.length;for(r||(r=IW),a||(a=[]);++o<u;){var s=t[o];n>0&&r(s)?n>1?e(s,n-1,r,i,a):Tn(a,s):i||(a[a.length]=s)}return a},EW=Di((function(e,t){return Xz(e)?Yz(e,TW(t,1,Xz,!0)):[]})),SW=EW,CW=Di((function(e){return la(TW(e,1,Xz,!0))}));var NW=function(e,t){return Ur(e,t)};var AW=function(e,t,n){for(var r=-1,i=t.length,a={};++r<i;){var o=t[r],u=ai(e,o);n(u,o)&&Lz(a,ri(o,e),u)}return a};var RW=function(e,t){return AW(e,t,(function(t,n){return ci(e,n)}))};var PW=function(e){return(null==e?0:e.length)?TW(e,1):[]};var DW=function(e){return Pi(Ei(e,void 0,PW),e+"")}((function(e,t){return null==e?{}:RW(e,t)})),OW=n(613),LW=n.n(OW),MW=function(e){function t(){return e.apply(this,arguments)||this}return Xe(t,e),t.prototype.render=function(){var e=this.props,n=e.className,i=e.name,a=Mi(i,"flag",n),o=Hi(t,this.props),u=Gi(t,this.props);return r.createElement(u,Ye({},o,{className:a}))},t}(r.PureComponent);MW.handledProps=["as","className","name"],MW.propTypes={},MW.defaultProps={as:"i"},MW.create=Ia(MW,(function(e){return{name:e}}));var FW=MW;function UW(e){var t=e.className,n=Mi("divider",t),i=Hi(UW,e),a=Gi(UW,e);return r.createElement(a,Ye({},i,{className:n}))}UW.handledProps=["as","className"],UW.propTypes={};var jW=UW,VW=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleClick=function(e){Oi(t.props,"onClick",e,t.props)},t}return Xe(t,e),t.prototype.render=function(){var e=this.props,n=e.active,i=e.children,a=e.className,o=e.content,u=e.disabled,s=e.description,c=e.flag,l=e.icon,f=e.image,h=e.label,d=e.selected,p=e.text,v=Mi(ji(n,"active"),ji(u,"disabled"),ji(d,"selected"),"item",a),m=_a(l)?function(e,t){return Yi(r.Children.toArray(e),{type:t})}(i,"DropdownMenu")&&"dropdown":l,y=Hi(t,this.props),g=Gi(t,this.props),k={role:"option","aria-disabled":u,"aria-checked":n,"aria-selected":d};if(!Xi(i))return r.createElement(g,Ye({},y,k,{className:v,onClick:this.handleClick}),i);var b=FW.create(c,{autoGenerateKey:!1}),w=Lo.create(m,{autoGenerateKey:!1}),_=FB.create(f,{autoGenerateKey:!1}),x=DB.create(h,{autoGenerateKey:!1}),I=xa("span",(function(e){return{children:e}}),s,{defaultProps:{className:"description"},autoGenerateKey:!1}),T=xa("span",(function(e){return{children:e}}),Xi(o)?p:o,{defaultProps:{className:"text"},autoGenerateKey:!1});return r.createElement(g,Ye({},y,k,{className:v,onClick:this.handleClick}),_,w,b,x,I,T)},t}(r.Component);VW.handledProps=["active","as","children","className","content","description","disabled","flag","icon","image","label","onClick","selected","text","value"],VW.propTypes={},VW.create=Ia(VW,(function(e){return e}));var qW=VW;function BW(e){var t=e.children,n=e.className,i=e.content,a=e.icon,o=Mi("header",n),u=Hi(BW,e),s=Gi(BW,e);return Xi(t)?r.createElement(s,Ye({},u,{className:o}),Lo.create(a,{autoGenerateKey:!1}),i):r.createElement(s,Ye({},u,{className:o}),t)}BW.handledProps=["as","children","className","content","icon"],BW.propTypes={},BW.create=Ia(BW,(function(e){return{content:e}}));var zW=BW;function WW(e){var t=e.children,n=e.className,i=e.content,a=e.direction,o=e.open,u=e.scrolling,s=Mi(a,ji(o,"visible"),ji(u,"scrolling"),"menu transition",n),c=Hi(WW,e),l=Gi(WW,e);return r.createElement(l,Ye({},c,{className:s}),Xi(t)?i:t)}WW.handledProps=["as","children","className","content","direction","open","scrolling"],WW.propTypes={};var KW=WW,HW=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleChange=function(e){var n=oi(e,"target.value");Oi(t.props,"onChange",e,Ye({},t.props,{value:n}))},t}return Xe(t,e),t.prototype.render=function(){var e=this.props,n=e.autoComplete,i=e.className,a=e.tabIndex,o=e.type,u=e.value,s=Mi("search",i),c=Hi(t,this.props);return r.createElement("input",Ye({},c,{"aria-autocomplete":"list",autoComplete:n,className:s,onChange:this.handleChange,tabIndex:a,type:o,value:u}))},t}(r.Component);HW.handledProps=["as","autoComplete","className","tabIndex","type","value"],HW.propTypes={},HW.defaultProps={autoComplete:"off",type:"text"},HW.create=Ia(HW,(function(e){return{type:e}}));var GW=HW;function QW(e){var t=e.children,n=e.className,i=e.content,a=Mi("divider",n),o=Hi(QW,e),u=Gi(QW,e);return r.createElement(u,Ye({"aria-atomic":!0,"aria-live":"polite",role:"alert"},o,{className:a}),Xi(t)?i:t)}QW.handledProps=["as","children","className","content"],QW.propTypes={},QW.create=Ia(QW,(function(e){return{content:e}}));var $W=QW,YW=/[\\^$.*+?()[\]{}|]/g,XW=RegExp(YW.source);var JW=function(e){return(e=ni(e))&&XW.test(e)?e.replace(YW,"\\$&"):e};var ZW=function(e,t){var n=[];return yi(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n};var eK=function(e,t){return(En(e)?Cn:ZW)(e,vi(t,3))};function tK(e){var t=e.additionLabel,n=e.additionPosition,i=e.allowAdditions,a=e.deburr,o=e.multiple,u=e.options,s=e.search,c=e.searchQuery,l=e.value,f=u;if(o&&(f=eK(f,(function(e){return!Hq(l,e.value)}))),s&&c)if(St(s))f=s(f,c);else{var h=a?Oa(c):c,d=new RegExp(JW(h),"i");f=eK(f,(function(e){return d.test(a?Oa(e.text):e.text)}))}if(i&&s&&c&&!Yi(f,{text:c})){var p={key:"addition",text:[r.isValidElement(t)?r.cloneElement(t,{key:"addition-label"}):t||"",r.createElement("b",{key:"addition-query"},c)],value:c,className:"addition","data-additional":!0};"top"===n?f.unshift(p):f.push(p)}return f}tK.handledProps=[];var nK=function(e,t,n,r,i){return i(e,(function(e,i,a){n=r?(r=!1,e):t(n,e,i,a)})),n};var rK=function(e,t,n){var r=En(e)?Aa:nK,i=arguments.length<3;return r(e,vi(t,4),n,i,yi)};function iK(e){var t,n=e.additionLabel,r=e.additionPosition,i=e.allowAdditions,a=e.deburr,o=e.multiple,u=e.options,s=e.search,c=e.searchQuery,l=e.selectedIndex,f=e.value,h=tK({value:f,options:u,searchQuery:c,additionLabel:n,additionPosition:r,allowAdditions:i,deburr:a,multiple:o,search:s}),d=rK(h,(function(e,t,n){return t.disabled||e.push(n),e}),[]);if(!l||l<0){var p=d[0];t=o?p:nW(h,["value",f])||d[0]}else if(o)t=rW(d,(function(e){return e>=l})),l>=h.length-1&&(t=d[d.length-1]);else{var v=nW(h,["value",f]);t=Hq(d,v)?v:void 0}return(!t||t<0)&&(t=d[0]),t}var aK=function(e,t){return _a(e)?t:e},oK=function(e){return e?e.map((function(e){return DW(e,["key","value"])})):e};function uK(e){var t=e.flag,n=e.image,i=e.text;return St(i)?i:{content:r.createElement(r.Fragment,null,FW.create(t),FB.create(n),i)}}var sK=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))||this).searchRef=(0,r.createRef)(),t.sizerRef=(0,r.createRef)(),t.ref=(0,r.createRef)(),t.handleChange=function(e,n){Oi(t.props,"onChange",e,Ye({},t.props,{value:n}))},t.closeOnChange=function(e){var n=t.props,r=n.closeOnChange,i=n.multiple;(Ji(r)?!i:r)&&t.close(e,ua)},t.closeOnEscape=function(e){t.props.closeOnEscape&&pB().getCode(e)===pB().Escape&&(e.preventDefault(),t.close(e))},t.moveSelectionOnKeyDown=function(e){var n,r=t.props,i=r.multiple,a=r.selectOnNavigation;if(t.state.open){var o=((n={})[pB().ArrowDown]=1,n[pB().ArrowUp]=-1,n)[pB().getCode(e)];if(void 0!==o){e.preventDefault();var u=t.getSelectedIndexAfterMove(o);!i&&a&&t.makeSelectedItemActive(e,u),t.setState({selectedIndex:u})}}},t.openOnSpace=function(e){var n,r,i,a=t.state.focus&&!t.state.open&&pB().getCode(e)===pB().Spacebar,o="INPUT"!==(null==(n=e.target)?void 0:n.tagName)&&"TEXTAREA"!==(null==(r=e.target)?void 0:r.tagName)&&!0!==(null==(i=e.target)?void 0:i.isContentEditable);a&&(o&&e.preventDefault(),t.open(e))},t.openOnArrow=function(e){var n=t.state,r=n.focus,i=n.open;if(r&&!i){var a=pB().getCode(e);a!==pB().ArrowDown&&a!==pB().ArrowUp||(e.preventDefault(),t.open(e))}},t.makeSelectedItemActive=function(e,n){var r=t.state,i=r.open,a=r.value,o=t.props.multiple,u=t.getSelectedItem(n),s=oi(u,"value"),c=oi(u,"disabled");if(_a(s)||!i||c)return a;var l=o?CW(a,[s]):s;return(o?!!SW(l,a).length:l!==a)&&(t.setState({value:l}),t.handleChange(e,l),u["data-additional"]&&Oi(t.props,"onAddItem",e,Ye({},t.props,{value:s}))),a},t.selectItemOnEnter=function(e){var n=t.props.search,r=t.state,i=r.open,a=r.selectedIndex;if(i&&(pB().getCode(e)===pB().Enter||!n&&pB().getCode(e)===pB().Spacebar)){e.preventDefault();var o=_W(tK({value:t.state.value,options:t.props.options,searchQuery:t.state.searchQuery,additionLabel:t.props.additionLabel,additionPosition:t.props.additionPosition,allowAdditions:t.props.allowAdditions,deburr:t.props.deburr,multiple:t.props.multiple,search:t.props.search}));if(!n||0!==o){var u=t.makeSelectedItemActive(e,a);t.setState({selectedIndex:iK({additionLabel:t.props.additionLabel,additionPosition:t.props.additionPosition,allowAdditions:t.props.allowAdditions,deburr:t.props.deburr,multiple:t.props.multiple,search:t.props.search,selectedIndex:a,value:u,options:t.props.options,searchQuery:""})}),t.closeOnChange(e),t.clearSearchQuery(),n&&Oi(t.searchRef.current,"focus")}}},t.removeItemOnBackspace=function(e){var n=t.props,r=n.multiple,i=n.search,a=t.state,o=a.searchQuery,u=a.value;if(pB().getCode(e)===pB().Backspace&&!o&&i&&r&&!oW(u)){e.preventDefault();var s=iW(u);t.setState({value:s}),t.handleChange(e,s)}},t.closeOnDocumentClick=function(e){t.props.closeOnBlur&&(t.ref.current&&bB(t.ref.current,e)||t.close())},t.handleMouseDown=function(e){t.isMouseDown=!0,Oi(t.props,"onMouseDown",e,t.props),document.addEventListener("mouseup",t.handleDocumentMouseUp)},t.handleDocumentMouseUp=function(){t.isMouseDown=!1,document.removeEventListener("mouseup",t.handleDocumentMouseUp)},t.handleClick=function(e){var n=t.props,r=n.minCharacters,i=n.search,a=t.state,o=a.open,u=a.searchQuery;if(Oi(t.props,"onClick",e,t.props),e.stopPropagation(),!i)return t.toggle(e);o?Oi(t.searchRef.current,"focus"):u.length>=r||1===r?t.open(e):Oi(t.searchRef.current,"focus")},t.handleIconClick=function(e){var n=t.props.clearable,r=t.hasValue();Oi(t.props,"onClick",e,t.props),e.stopPropagation(),n&&r?t.clearValue(e):t.toggle(e)},t.handleItemClick=function(e,n){var r=t.props,i=r.multiple,a=r.search,o=t.state.value,u=n.value;if(e.stopPropagation(),(i||n.disabled)&&e.nativeEvent.stopImmediatePropagation(),!n.disabled){var s=n["data-additional"],c=i?CW(t.state.value,[u]):u;(i?!!SW(c,o).length:c!==o)&&(t.setState({value:c}),t.handleChange(e,c)),t.clearSearchQuery(),Oi(a?t.searchRef.current:t.ref.current,"focus"),t.closeOnChange(e),s&&Oi(t.props,"onAddItem",e,Ye({},t.props,{value:u}))}},t.handleFocus=function(e){t.state.focus||(Oi(t.props,"onFocus",e,t.props),t.setState({focus:!0}))},t.handleBlur=function(e){var n=oi(e,"currentTarget");if(!n||!n.contains(document.activeElement)){var r=t.props,i=r.closeOnBlur,a=r.multiple,o=r.selectOnBlur;t.isMouseDown||(Oi(t.props,"onBlur",e,t.props),o&&!a&&(t.makeSelectedItemActive(e,t.state.selectedIndex),i&&t.close()),t.setState({focus:!1}),t.clearSearchQuery())}},t.handleSearchChange=function(e,n){var r=n.value;e.stopPropagation();var i=t.props.minCharacters,a=t.state.open,o=r;Oi(t.props,"onSearchChange",e,Ye({},t.props,{searchQuery:o})),t.setState({searchQuery:o,selectedIndex:0}),!a&&o.length>=i?t.open():a&&1!==i&&o.length<i&&t.close()},t.handleKeyDown=function(e){t.moveSelectionOnKeyDown(e),t.openOnArrow(e),t.openOnSpace(e),t.selectItemOnEnter(e),Oi(t.props,"onKeyDown",e)},t.getSelectedItem=function(e){var n=tK({value:t.state.value,options:t.props.options,searchQuery:t.state.searchQuery,additionLabel:t.props.additionLabel,additionPosition:t.props.additionPosition,allowAdditions:t.props.allowAdditions,deburr:t.props.deburr,multiple:t.props.multiple,search:t.props.search});return oi(n,"["+e+"]")},t.getItemByValue=function(e){var n=t.props.options;return rW(n,{value:e})},t.getDropdownAriaOptions=function(){var e=t.props,n=e.loading,r=e.disabled,i=e.search,a=e.multiple,o={role:i?"combobox":"listbox","aria-busy":n,"aria-disabled":r,"aria-expanded":!!t.state.open};return"listbox"===o.role&&(o["aria-multiselectable"]=a),o},t.clearSearchQuery=function(){var e=t.state.searchQuery;void 0!==e&&""!==e&&t.setState({searchQuery:""})},t.handleLabelClick=function(e,n){e.stopPropagation(),t.setState({selectedLabel:n.value}),Oi(t.props,"onLabelClick",e,n)},t.handleLabelRemove=function(e,n){e.stopPropagation();var r=t.state.value,i=Zz(r,n.value);t.setState({value:i}),t.handleChange(e,i)},t.getSelectedIndexAfterMove=function(e,n){void 0===n&&(n=t.state.selectedIndex);var r=tK({value:t.state.value,options:t.props.options,searchQuery:t.state.searchQuery,additionLabel:t.props.additionLabel,additionPosition:t.props.additionPosition,allowAdditions:t.props.allowAdditions,deburr:t.props.deburr,multiple:t.props.multiple,search:t.props.search});if(void 0!==r&&!$z(r,"disabled")){var i=r.length-1,a=n+e;return!t.props.wrapSelection&&(a>i||a<0)?a=n:a>i?a=0:a<0&&(a=i),r[a].disabled?t.getSelectedIndexAfterMove(e,a):a}},t.handleIconOverrides=function(e){var n=t.props.clearable;return{className:Mi(n&&t.hasValue()&&"clear",e.className),onClick:function(n){Oi(e,"onClick",n,e),t.handleIconClick(n)}}},t.clearValue=function(e){var n=t.props.multiple?[]:"";t.setState({value:n}),t.handleChange(e,n)},t.computeSearchInputTabIndex=function(){var e=t.props,n=e.disabled,r=e.tabIndex;return _a(r)?n?-1:0:r},t.computeSearchInputWidth=function(){var e=t.state.searchQuery;if(t.sizerRef.current&&e){t.sizerRef.current.style.display="inline",t.sizerRef.current.textContent=e;var n=Math.ceil(t.sizerRef.current.getBoundingClientRect().width);return t.sizerRef.current.style.removeProperty("display"),n}},t.computeTabIndex=function(){var e=t.props,n=e.disabled,r=e.search,i=e.tabIndex;if(!r)return n?-1:_a(i)?0:i},t.handleSearchInputOverrides=function(e){return{onChange:function(n,r){Oi(e,"onChange",n,r),t.handleSearchChange(n,r)}}},t.hasValue=function(){var e=t.props.multiple,n=t.state.value;return e?!oW(n):!_a(n)&&""!==n},t.scrollSelectedItemIntoView=function(){if(t.ref.current){var e=t.ref.current.querySelector(".menu.visible");if(e){var n=e.querySelector(".item.selected");if(n){var r=n.offsetTop<e.scrollTop,i=n.offsetTop+n.clientHeight>e.scrollTop+e.clientHeight;r?e.scrollTop=n.offsetTop:i&&(e.scrollTop=n.offsetTop+n.clientHeight-e.clientHeight)}}}},t.setOpenDirection=function(){if(t.ref.current){var e=t.ref.current.querySelector(".menu.visible");if(e){var n=t.ref.current.getBoundingClientRect(),r=e.clientHeight,i=document.documentElement.clientHeight-n.top-n.height-r,a=n.top-r,o=i<0&&a>i;!o!==!t.state.upward&&t.setState({upward:o})}}},t.open=function(e,n){void 0===e&&(e=null),void 0===n&&(n=!0);var r=t.props,i=r.disabled,a=r.search;i||(a&&Oi(t.searchRef.current,"focus"),Oi(t.props,"onOpen",e,t.props),n&&t.setState({open:!0}),t.scrollSelectedItemIntoView())},t.close=function(e,n){void 0===n&&(n=t.handleClose),t.state.open&&(Oi(t.props,"onClose",e,t.props),t.setState({open:!1},n))},t.handleClose=function(){var e=document.activeElement===t.searchRef.current;!e&&t.ref.current&&t.ref.current.blur();var n=document.activeElement===t.ref.current,r=e||n;t.setState({focus:r})},t.toggle=function(e){return t.state.open?t.close(e):t.open(e)},t.renderText=function(){var e,n=t.props,r=n.multiple,i=n.placeholder,a=n.search,o=n.text,u=t.state,s=u.searchQuery,c=u.selectedIndex,l=u.value,f=u.open,h=t.hasValue(),d=Mi(i&&!h&&"default","text",a&&s&&"filtered"),p=i;return o?p=o:f&&!r?e=t.getSelectedItem(c):h&&(e=t.getItemByValue(l)),$W.create(e?uK(e):p,{defaultProps:{className:d}})},t.renderSearchInput=function(){var e=t.props,n=e.search,i=e.searchInput,a=t.state.searchQuery;return n&&r.createElement(hB,{innerRef:t.searchRef},GW.create(i,{defaultProps:{style:{width:t.computeSearchInputWidth()},tabIndex:t.computeSearchInputTabIndex(),value:a},overrideProps:t.handleSearchInputOverrides}))},t.renderSearchSizer=function(){var e=t.props,n=e.search,i=e.multiple;return n&&i&&r.createElement("span",{className:"sizer",ref:t.sizerRef})},t.renderLabels=function(){var e=t.props,n=e.multiple,r=e.renderLabel,i=t.state,a=i.selectedLabel,o=i.value;if(n&&!oW(o)){var u=ki(o,t.getItemByValue);return ki(Hz(u),(function(e,n){var i={active:e.value===a,as:"a",key:aK(e.key,e.value),onClick:t.handleLabelClick,onRemove:t.handleLabelRemove,value:e.value};return DB.create(r(e,n,i),{defaultProps:i})}))}},t.renderOptions=function(){var e=t.props,n=e.lazyLoad,i=e.multiple,a=e.search,o=e.noResultsMessage,u=t.state,s=u.open,c=u.selectedIndex,l=u.value;if(n&&!s)return null;var f=tK({value:t.state.value,options:t.props.options,searchQuery:t.state.searchQuery,additionLabel:t.props.additionLabel,additionPosition:t.props.additionPosition,allowAdditions:t.props.allowAdditions,deburr:t.props.deburr,multiple:t.props.multiple,search:t.props.search});if(null!==o&&a&&oW(f))return r.createElement("div",{className:"message"},o);var h=i?function(e){return Hq(l,e)}:function(e){return e===l};return ki(f,(function(e,n){return qW.create(Ye({active:h(e.value),selected:c===n},e,{key:aK(e.key,e.value),style:Ye({},e.style,{pointerEvents:"all"})}),{generateKey:!1,overrideProps:function(e){return{onClick:function(n,r){null==e.onClick||e.onClick(n,r),t.handleItemClick(n,r)}}}})}))},t.renderMenu=function(){var e=t.props,n=e.children,i=e.direction,a=e.header,o=t.state.open,u=t.getDropdownMenuAriaOptions();if(!Xi(n)){var s=r.Children.only(n),c=Mi(i,ji(o,"visible"),s.props.className);return(0,r.cloneElement)(s,Ye({className:c},u))}return r.createElement(KW,Ye({},u,{direction:i,open:o}),zW.create(a,{autoGenerateKey:!1}),t.renderOptions())},t}Xe(t,e);var n=t.prototype;return n.getInitialAutoControlledState=function(){return{focus:!1,searchQuery:""}},t.getAutoControlledStateFromProps=function(e,t,n){var r={__options:e.options,__value:t.value};return(!LW()(n.__value,t.value)||!NW(oK(e.options),oK(n.__options)))&&(r.selectedIndex=iK({additionLabel:e.additionLabel,additionPosition:e.additionPosition,allowAdditions:e.allowAdditions,deburr:e.deburr,multiple:e.multiple,search:e.search,selectedIndex:t.selectedIndex,value:t.value,options:e.options,searchQuery:t.searchQuery})),r},n.componentDidMount=function(){this.state.open&&this.open(null,!1)},n.shouldComponentUpdate=function(e,t){return!LW()(e,this.props)||!LW()(t,this.state)},n.componentDidUpdate=function(e,t){var n=this.props,r=n.closeOnBlur,i=n.minCharacters,a=n.openOnFocus,o=n.search;if(!t.focus&&this.state.focus){if(!this.isMouseDown){var u=!o||o&&1===i&&!this.state.open;a&&u&&this.open()}}else t.focus&&!this.state.focus&&!this.isMouseDown&&r&&this.close();!t.open&&this.state.open?(this.setOpenDirection(),this.scrollSelectedItemIntoView()):t.open&&this.state.open,t.selectedIndex!==this.state.selectedIndex&&this.scrollSelectedItemIntoView()},n.getDropdownMenuAriaOptions=function(){var e=this.props,t=e.search,n=e.multiple,r={};return t&&(r["aria-multiselectable"]=n,r.role="listbox"),r},n.render=function(){var e=this.props,n=e.basic,i=e.button,a=e.className,o=e.compact,u=e.disabled,s=e.error,c=e.fluid,l=e.floating,f=e.icon,h=e.inline,d=e.item,p=e.labeled,v=e.loading,m=e.multiple,y=e.pointing,g=e.search,k=e.selection,b=e.scrolling,w=e.simple,_=e.trigger,x=this.state,I=x.focus,T=x.open,E=x.upward,S=Mi("ui",ji(T,"active visible"),ji(u,"disabled"),ji(s,"error"),ji(v,"loading"),ji(n,"basic"),ji(i,"button"),ji(o,"compact"),ji(c,"fluid"),ji(l,"floating"),ji(h,"inline"),ji(p,"labeled"),ji(d,"item"),ji(m,"multiple"),ji(g,"search"),ji(k,"selection"),ji(w,"simple"),ji(b,"scrolling"),ji(E,"upward"),qi(y,"pointing"),"dropdown",a),C=Hi(t,this.props),N=Gi(t,this.props),A=this.getDropdownAriaOptions(N,this.props);return r.createElement(hB,{innerRef:this.ref},r.createElement(N,Ye({},C,A,{className:S,onBlur:this.handleBlur,onClick:this.handleClick,onKeyDown:this.handleKeyDown,onMouseDown:this.handleMouseDown,onFocus:this.handleFocus,onChange:this.handleChange,tabIndex:this.computeTabIndex()}),this.renderLabels(),this.renderSearchInput(),this.renderSearchSizer(),_||this.renderText(),Lo.create(f,{overrideProps:this.handleIconOverrides,autoGenerateKey:!1}),this.renderMenu(),T&&r.createElement(iB(),{name:"keydown",on:this.closeOnEscape}),T&&r.createElement(iB(),{name:"click",on:this.closeOnDocumentClick}),I&&r.createElement(iB(),{name:"keydown",on:this.removeItemOnBackspace})))},t}(ea);function cK(e){var t=e.control,n=Hi(cK,e),i=Gi(cK,e);return r.createElement(i,Ye({},n,{control:t}))}sK.handledProps=["additionLabel","additionPosition","allowAdditions","as","basic","button","children","className","clearable","closeOnBlur","closeOnChange","closeOnEscape","compact","deburr","defaultOpen","defaultSearchQuery","defaultSelectedLabel","defaultUpward","defaultValue","direction","disabled","error","floating","fluid","header","icon","inline","item","labeled","lazyLoad","loading","minCharacters","multiple","noResultsMessage","onAddItem","onBlur","onChange","onClick","onClose","onFocus","onLabelClick","onMouseDown","onOpen","onSearchChange","open","openOnFocus","options","placeholder","pointing","renderLabel","scrolling","search","searchInput","searchQuery","selectOnBlur","selectOnNavigation","selectedLabel","selection","simple","tabIndex","text","trigger","upward","value","wrapSelection"],sK.propTypes={},sK.defaultProps={additionLabel:"Add ",additionPosition:"top",closeOnBlur:!0,closeOnEscape:!0,deburr:!1,icon:"dropdown",minCharacters:1,noResultsMessage:"No results found.",openOnFocus:!0,renderLabel:uK,searchInput:"text",selectOnBlur:!0,selectOnNavigation:!0,wrapSelection:!0},sK.autoControlledProps=["open","searchQuery","selectedLabel","value","upward"],sK.Divider=jW,sK.Header=zW,sK.Item=qW,sK.Menu=KW,sK.SearchInput=GW,sK.Text=$W,cK.handledProps=["as","control"],cK.propTypes={},cK.defaultProps={as:qz,control:sK};var lK=cK;function fK(e){var t=e.children,n=e.className,i=e.grouped,a=e.inline,o=e.unstackable,u=e.widths,s=Mi(ji(i,"grouped"),ji(a,"inline"),ji(o,"unstackable"),Ki(u,null,!0),"fields",n),c=Hi(fK,e),l=Gi(fK,e);return r.createElement(l,Ye({},c,{className:s}),t)}fK.handledProps=["as","children","className","grouped","inline","unstackable","widths"],fK.propTypes={};var hK=fK,dK=function(e){function t(){for(var n,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return(n=e.call.apply(e,[this].concat(a))||this).inputRef=(0,r.createRef)(),n.computeIcon=function(){var e=n.props,t=e.loading,r=e.icon;return _a(r)?t?"spinner":void 0:r},n.computeTabIndex=function(){var e=n.props,t=e.disabled,r=e.tabIndex;return _a(r)?t?-1:void 0:r},n.focus=function(e){return n.inputRef.current.focus(e)},n.select=function(){return n.inputRef.current.select()},n.handleChange=function(e){var t=oi(e,"target.value");Oi(n.props,"onChange",e,Ye({},n.props,{value:t}))},n.handleChildOverrides=function(e,t){return Ye({},t,e.props,{ref:function(t){aB(e.ref,t),n.inputRef.current=t}})},n.partitionProps=function(){var e=n.props,r=e.disabled,i=e.type,a=n.computeTabIndex(),o=Hi(t,n.props),u=Zq(o),s=u[0],c=u[1];return[Ye({},s,{disabled:r,type:i,tabIndex:a,onChange:n.handleChange,ref:n.inputRef}),c]},n}return Xe(t,e),t.prototype.render=function(){var e=this,n=this.props,i=n.action,a=n.actionPosition,o=n.children,u=n.className,s=n.disabled,c=n.error,l=n.fluid,f=n.focus,h=n.icon,d=n.iconPosition,p=n.input,v=n.inverted,m=n.label,y=n.labelPosition,g=n.loading,k=n.size,b=n.transparent,w=n.type,_=Mi("ui",k,ji(s,"disabled"),ji(c,"error"),ji(l,"fluid"),ji(f,"focus"),ji(v,"inverted"),ji(g,"loading"),ji(b,"transparent"),Vi(a,"action")||ji(i,"action"),Vi(d,"icon")||ji(h||g,"icon"),Vi(y,"labeled")||ji(m,"labeled"),"input",u),x=Gi(t,this.props),I=this.partitionProps(),T=I[0],E=I[1];if(!Xi(o)){var S=ki(r.Children.toArray(o),(function(t){return"input"!==t.type?t:(0,r.cloneElement)(t,e.handleChildOverrides(t,T))}));return r.createElement(x,Ye({},E,{className:_}),S)}var C=Rz.create(i,{autoGenerateKey:!1}),N=DB.create(m,{defaultProps:{className:Mi("label",Hq(y,"corner")&&y)},autoGenerateKey:!1});return r.createElement(x,Ye({},E,{className:_}),"left"===a&&C,"right"!==y&&N,Ta(p||w,{defaultProps:T,autoGenerateKey:!1}),Lo.create(this.computeIcon(),{autoGenerateKey:!1}),"left"!==a&&C,"right"===y&&N)},t}(r.Component);dK.handledProps=["action","actionPosition","as","children","className","disabled","error","fluid","focus","icon","iconPosition","input","inverted","label","labelPosition","loading","onChange","size","tabIndex","transparent","type"],dK.propTypes={},dK.defaultProps={type:"text"},dK.create=Ia(dK,(function(e){return{type:e}}));var pK=dK;function vK(e){var t=e.control,n=Hi(vK,e),i=Gi(vK,e);return r.createElement(i,Ye({},n,{control:t}))}vK.handledProps=["as","control"],vK.propTypes={},vK.defaultProps={as:qz,control:pK};var mK=vK;function yK(e){var t=e.control,n=Hi(yK,e),i=Gi(yK,e);return r.createElement(i,Ye({},n,{control:t}))}yK.handledProps=["as","control"],yK.propTypes={},yK.defaultProps={as:qz,control:jz};var gK=yK;function kK(e){return r.createElement(sK,Ye({},e,{selection:!0}))}kK.handledProps=["options"],kK.propTypes={},kK.Divider=sK.Divider,kK.Header=sK.Header,kK.Item=sK.Item,kK.Menu=sK.Menu;var bK=kK;function wK(e){var t=e.control,n=e.options,i=Hi(wK,e),a=Gi(wK,e);return r.createElement(a,Ye({},i,{control:t,options:n}))}wK.handledProps=["as","control","options"],wK.propTypes={},wK.defaultProps={as:qz,control:bK};var _K=wK,xK=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))||this).ref=(0,r.createRef)(),t.focus=function(){return t.ref.current.focus()},t.handleChange=function(e){var n=oi(e,"target.value");Oi(t.props,"onChange",e,Ye({},t.props,{value:n}))},t.handleInput=function(e){var n=oi(e,"target.value");Oi(t.props,"onInput",e,Ye({},t.props,{value:n}))},t}return Xe(t,e),t.prototype.render=function(){var e=this.props,n=e.rows,i=e.value,a=Hi(t,this.props),o=Gi(t,this.props);return r.createElement(hB,{innerRef:this.ref},r.createElement(o,Ye({},a,{onChange:this.handleChange,onInput:this.handleInput,rows:n,value:i})))},t}(r.Component);xK.handledProps=["as","onChange","onInput","rows","value"],xK.propTypes={},xK.defaultProps={as:"textarea",rows:3};var IK=xK;function TK(e){var t=e.control,n=Hi(TK,e),i=Gi(TK,e);return r.createElement(i,Ye({},n,{control:t}))}TK.handledProps=["as","control"],TK.propTypes={},TK.defaultProps={as:qz,control:IK};var EK=TK,SK=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleSubmit=function(e){var n=t.props.action;"string"!==typeof n&&Oi(e,"preventDefault");for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];Oi.apply(void 0,[t.props,"onSubmit",e,t.props].concat(i))},t}return Xe(t,e),t.prototype.render=function(){var e=this.props,n=e.action,i=e.children,a=e.className,o=e.error,u=e.inverted,s=e.loading,c=e.reply,l=e.size,f=e.success,h=e.unstackable,d=e.warning,p=e.widths,v=Mi("ui",l,ji(o,"error"),ji(u,"inverted"),ji(s,"loading"),ji(c,"reply"),ji(f,"success"),ji(h,"unstackable"),ji(d,"warning"),Ki(p,null,!0),"form",a),m=Hi(t,this.props),y=Gi(t,this.props);return r.createElement(y,Ye({},m,{action:n,className:v,onSubmit:this.handleSubmit}),i)},t}(r.Component);SK.handledProps=["action","as","children","className","error","inverted","loading","onSubmit","reply","size","success","unstackable","warning","widths"],SK.propTypes={},SK.defaultProps={as:"form"},SK.Field=qz,SK.Button=zz,SK.Checkbox=Kz,SK.Dropdown=lK,SK.Group=hK,SK.Input=mK,SK.Radio=gK,SK.Select=_K,SK.TextArea=EK;var CK=SK;function NK(e){var t=e.children,n=e.className,i=e.content,a=Mi("content",n),o=Hi(NK,e),u=Gi(NK,e);return r.createElement(u,Ye({},o,{className:a}),Xi(t)?i:t)}NK.handledProps=["as","children","className","content"],NK.propTypes={};var AK=NK;function RK(e){var t=e.children,n=e.className,i=e.content,a=Mi("header",n),o=Hi(RK,e),u=Gi(RK,e);return r.createElement(u,Ye({},o,{className:a}),Xi(t)?i:t)}RK.handledProps=["as","children","className","content"],RK.propTypes={},RK.create=Ia(RK,(function(e){return{content:e}}));var PK=RK;function DK(e){var t=e.children,n=e.className,i=e.content,a=Mi("content",n),o=Hi(DK,e),u=Gi(DK,e);return r.createElement(u,Ye({},o,{className:a}),Xi(t)?i:t)}DK.handledProps=["as","children","className","content"],DK.propTypes={},DK.defaultProps={as:"li"},DK.create=Ia(DK,(function(e){return{content:e}}));var OK=DK;function LK(e){var t=e.children,n=e.className,i=e.items,a=Mi("list",n),o=Hi(LK,e),u=Gi(LK,e);return r.createElement(u,Ye({},o,{className:a}),Xi(t)?ki(i,OK.create):t)}LK.handledProps=["as","children","className","items"],LK.propTypes={},LK.defaultProps={as:"ul"},LK.create=Ia(LK,(function(e){return{items:e}}));var MK=LK,FK=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(t=e.call.apply(e,[this].concat(r))||this).handleDismiss=function(e){var n=t.props.onDismiss;n&&n(e,t.props)},t}return Xe(t,e),t.prototype.render=function(){var e=this.props,n=e.attached,i=e.children,a=e.className,o=e.color,u=e.compact,s=e.content,c=e.error,l=e.floating,f=e.header,h=e.hidden,d=e.icon,p=e.info,v=e.list,m=e.negative,y=e.onDismiss,g=e.positive,k=e.size,b=e.success,w=e.visible,_=e.warning,x=Mi("ui",o,k,ji(u,"compact"),ji(c,"error"),ji(l,"floating"),ji(h,"hidden"),ji(d,"icon"),ji(p,"info"),ji(m,"negative"),ji(g,"positive"),ji(b,"success"),ji(w,"visible"),ji(_,"warning"),qi(n,"attached"),"message",a),I=y&&r.createElement(Lo,{name:"close",onClick:this.handleDismiss}),T=Hi(t,this.props),E=Gi(t,this.props);return Xi(i)?r.createElement(E,Ye({},T,{className:x}),I,Lo.create(d,{autoGenerateKey:!1}),(!_a(f)||!_a(s)||!_a(v))&&r.createElement(AK,null,PK.create(f,{autoGenerateKey:!1}),MK.create(v,{autoGenerateKey:!1}),Sa(s,{autoGenerateKey:!1}))):r.createElement(E,Ye({},T,{className:x}),I,i)},t}(r.Component);FK.handledProps=["as","attached","children","className","color","compact","content","error","floating","header","hidden","icon","info","list","negative","onDismiss","positive","size","success","visible","warning"],FK.propTypes={},FK.Content=AK,FK.Header=PK,FK.List=MK,FK.Item=OK;var UK=function(){var e=Te(),t=l(r.useState("register"),2),n=t[0],i=t[1],a=l(r.useState(""),2),o=a[0],u=a[1],s=l(r.useState("user"),2),c=s[0],f=s[1],h=l(r.useState(""),2),d=h[0],p=h[1],v=l(r.useState(""),2),m=v[0],y=v[1],g=l(r.useState(!1),2),k=g[0],b=g[1];return(0,Ev.jsxs)(Iq,{children:[(0,Ev.jsxs)(Vo,{widths:"2",children:[(0,Ev.jsx)(Vo.Item,{active:"register"===n,onClick:function(){y(""),i("register")},children:"\u8a3b\u518a"}),(0,Ev.jsx)(Vo.Item,{active:"signin"===n,onClick:function(){y(""),i("signin")},children:"\u767b\u5165"})]}),(0,Ev.jsxs)(CK,{onSubmit:function(){b(!0);var t=Tv();"register"===n?Sh(t,o,d).then((function(){e("/"),b(!1)})).catch((function(e){switch(e.code){case"auth/email-already-in-use":y("\u4fe1\u7bb1\u5df2\u5b58\u5728");break;case"auth/invalid-email":y("\u4fe1\u7bb1\u683c\u5f0f\u4e0d\u6b63\u78ba");break;case"auth/weak-password":y("\u5bc6\u78bc\u5f37\u5ea6\u4e0d\u8db3")}b(!1)})):"signin"===n&&Nh(t,o,d).then((function(){e("/"),b(!1)})).catch((function(e){switch(e.code){case"auth/invalid-email":y("\u4fe1\u7bb1\u683c\u5f0f\u4e0d\u6b63\u78ba");break;case"auth/user-not-found":y("\u7528\u6236\u4e0d\u5b58\u5728");break;case"auth/wrong-password":y("\u5bc6\u78bc\u932f\u8aa4")}b(!1)}))},children:[(0,Ev.jsx)(CK.Input,{label:"\u4fe1\u7bb1",value:o,onChange:function(e){return u(e.target.value)},placeholder:"\u8acb\u8f38\u5165\u4fe1\u7bb1",required:!0}),(0,Ev.jsx)(CK.Input,{label:"\u5bc6\u78bc",value:d,onChange:function(e){return p(e.target.value)},placeholder:"\u8acb\u8f38\u5165\u5bc6\u78bc",type:"password",required:!0}),(0,Ev.jsx)(CK.Input,{value:c,onChange:function(e){return f(e.target.value)},style:{display:"none"}}),m&&(0,Ev.jsx)(FK,{negative:!0,children:m}),(0,Ev.jsxs)(CK.Button,{loading:k,children:["register"===n&&"\u8a3b\u518a","signin"===n&&"\u767b\u5165"]})]})]})};var jK=function(){var e=l(r.useState(""),2);return e[0],e[1],(0,Ev.jsx)("div",{children:(0,Ev.jsx)("h2",{children:" UserSet here!"})})};function VK(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new mS("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function qK(){if("undefined"===typeof Uint8Array)throw new mS("unimplemented","Uint8Arrays are not available in this environment.")}function BK(){if("undefined"==typeof atob)throw new mS("unimplemented","Blobs are unavailable in Firestore in this environment.")}var zK=function(){function e(t){d(this,e),this._delegate=t}return y(e,[{key:"toBase64",value:function(){return BK(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return qK(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return BK(),new e(sU.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return qK(),new e(sU.fromUint8Array(t))}}]),e}();function WK(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=C(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var KK=function(){function e(){d(this,e)}return y(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){uU(e=pF(e,ZF));var n=eU(e),r=e._freezeSettings(),i=new sF;return nU(n,i,new oF(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){uU(e=pF(e,ZF));var t=eU(e),n=e._freezeSettings(),r=new sF;return nU(t,r,new uF(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new mS(vS.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new yS;return e._queue.enqueueAndForgetEvenWhileRestricted(Ko(zo().mark((function n(){return zo().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=Ko(zo().mark((function e(t){var n;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ZS.C()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,ZS.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(rO(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),HK=function(){function e(t,n,r){var i=this;d(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof fC||(this._appCompat=t)}return y(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||lS("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};kF(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return rU(this._delegate)}},{key:"disableNetwork",value:function(){return iU(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&lF("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new yS;return e.asyncQueue.enqueueAndForget(Ko(zo().mark((function n(){return zo().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=EM,n.next=3,WF(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(eU(e=pF(e,ZF)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return wj(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new mS("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new oH(this,xF(this._delegate,e))}catch(t){throw JK(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new XK(this,IF(this._delegate,e))}catch(t){throw JK(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new rH(this,function(e,t){if(e=pF(e,gF),cF("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new mS(vS.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new wF(e,null,function(e){return new LN(OS.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw JK(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=pF(e,ZF);var r=Object.assign(Object.assign({},Ij),n);return function(e){if(e.maxAttempts<1)throw new mS(vS.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new yS;return e.asyncQueue.enqueueAndForget(Ko(zo().mark((function i(){var a;return zo().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,KF(e);case 2:a=i.sent,new RF(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(eU(e),(function(n){return t(new Sj(e,n))}),r)}(this._delegate,(function(n){return e(new QK(t,n))}))}},{key:"batch",value:function(){var e=this;return eU(this._delegate),new $K(new Tj(this._delegate,(function(t){return _j(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return aU(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return oU(this._delegate,e).then((function(e){return e?new rH(t,e):null}))}}]),e}(),GK=function(e){k(n,e);var t=I(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return y(n,[{key:"convertBytes",value:function(e){return new zK(new sU(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return XK.forKey(t,this.firestore,null)}}]),n}(oj);var QK=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new GK(t)}return y(e,[{key:"get",value:function(e){var t=this,n=uH(e);return this._delegate.get(n).then((function(e){return new tH(t._firestore,new lj(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=uH(e);return n?(VK("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=uH(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=uH(e);return this._delegate.delete(t),this}}]),e}(),$K=function(){function e(t){d(this,e),this._delegate=t}return y(e,[{key:"set",value:function(e,t,n){var r=uH(e);return n?(VK("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=uH(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=uH(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),YK=function(){function e(t,n,r){d(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return y(e,[{key:"fromFirestore",value:function(e,t){var n=new fj(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new nH(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new GK(t),n),i.set(n,a)),a}}]),e}();YK.INSTANCES=new WeakMap;var XK=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new GK(t)}return y(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new oH(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new oH(this.firestore,xF(this._delegate,e))}catch(t){throw JK(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Ku(e))instanceof bF&&TF(this._delegate,e)}},{key:"set",value:function(e,t){t=VK("DocumentReference.set",t);try{return t?gj(this._delegate,e,t):gj(this._delegate,e)}catch(n){throw JK(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?kj(this._delegate,e):kj.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw JK(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return _j(pF(e.firestore,ZF),[new RA(e._key,mA.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=ZK(n),a=eH(n,(function(t){return new tH(e.firestore,new lj(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return bj(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?mj(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=pF(e,bF);var t=pF(e.firestore,ZF);return QF(eU(t),e._key,{source:"server"}).then((function(n){return xj(t,e,n)}))}(this._delegate):function(e){e=pF(e,bF);var t=pF(e.firestore,ZF);return QF(eU(t),e._key).then((function(n){return xj(t,e,n)}))}(this._delegate),t.then((function(e){return new tH(n.firestore,new lj(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(YK.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new mS("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new bF(n._delegate,r,new FS(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new bF(n._delegate,r,t))}}]),e}();function JK(e,t,n){return e.message=e.message.replace(t,n),e}function ZK(e){var t,n=C(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!WK(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function eH(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=WK(e[0])?e[0]:WK(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var tH=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return y(e,[{key:"ref",get:function(){return new XK(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return pj(this._delegate,e._delegate)}}]),e}(),nH=function(e){k(n,e);var t=I(n);function n(){return d(this,n),t.apply(this,arguments)}return y(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||hS()}(void 0!==t),t}}]),n}(tH),rH=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new GK(t)}return y(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,WU(this._delegate,function(e,t,n){var r=t,i=VU("where",e);return KU._create(i,r,n)}(t,n,r)))}catch(i){throw JK(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,WU(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=t,r=VU("orderBy",e);return GU._create(r,n)}(t,n)))}catch(r){throw JK(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,WU(this._delegate,function(e){return vF("limit",e),QU._create("limit",e,"F")}(t)))}catch(n){throw JK(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,WU(this._delegate,function(e){return vF("limitToLast",e),QU._create("limitToLast",e,"L")}(t)))}catch(n){throw JK(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,WU(this._delegate,YU.apply(void 0,arguments)))}catch(t){throw JK(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,WU(this._delegate,XU.apply(void 0,arguments)))}catch(t){throw JK(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,WU(this._delegate,ZU.apply(void 0,arguments)))}catch(t){throw JK(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,WU(this._delegate,ej.apply(void 0,arguments)))}catch(t){throw JK(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return EF(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?yj(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=pF(e,wF);var t=pF(e.firestore,ZF),n=eU(t),r=new vj(t);return $F(n,e._query,{source:"server"}).then((function(n){return new hj(t,r,e,n)}))}(this._delegate):function(e){e=pF(e,wF);var t=pF(e.firestore,ZF),n=eU(t),r=new vj(t);return qU(e._query),$F(n,e._query).then((function(n){return new hj(t,r,e,n)}))}(this._delegate),t.then((function(e){return new aH(n.firestore,new hj(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=ZK(n),a=eH(n,(function(t){return new aH(e.firestore,new hj(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return bj(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(YK.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),iH=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return y(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new nH(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),aH=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return y(e,[{key:"query",get:function(){return new rH(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new nH(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new iH(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new nH(n._firestore,r))}))}},{key:"isEqual",value:function(e){return pj(this._delegate,e._delegate)}}]),e}(),oH=function(e){k(n,e);var t=I(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return y(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new XK(this.firestore,e):null}},{key:"doc",value:function(e){try{return new XK(this.firestore,void 0===e?IF(this._delegate):IF(this._delegate,e))}catch(t){throw JK(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=pF(e.firestore,ZF),r=IF(e),i=uj(e.converter,t);return _j(n,[kU(gU(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,mA.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new XK(t.firestore,e)}))}},{key:"isEqual",value:function(e){return TF(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(YK.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(rH);function uH(e){return pF(e,bF)}var sH,cH=function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=T(cU,n)}return y(e,[{key:"isEqual",value:function(e){return(e=Ku(e))instanceof cU&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(MS.keyField().canonicalString())}}]),e}(),lH=function(){function e(t){d(this,e),this._delegate=t}return y(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new _U("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new bU("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=Cj.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=Nj.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new TU("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),fH={Firestore:HK,GeoPoint:fU,Timestamp:RS,Blob:zK,Transaction:QK,WriteBatch:$K,DocumentReference:XK,DocumentSnapshot:tH,Query:rH,QueryDocumentSnapshot:nH,QuerySnapshot:aH,CollectionReference:oH,FieldPath:cH,FieldValue:lH,setLogLevel:function(e){!function(e){oS.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new Hu("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},fH)))})(sH=Uv,(function(e,t){return new HK(e,t,new KK)})),sH.registerVersion("@firebase/firestore-compat","0.3.0");var hH=function(){function e(t,n,r){d(this,e),this._delegate=t,this.task=n,this.ref=r}return y(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),dH=function(){function e(t,n){d(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return y(e,[{key:"snapshot",get:function(){return new hH(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new hH(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new hH(e,i,i._ref))}:{next:t.next?function(e){return t.next(new hH(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),pH=function(){function e(t,n){d(this,e),this._delegate=t,this._service=n}return y(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new vH(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new vH(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),vH=function(){function e(t,n){d(this,e),this._delegate=t,this.storage=n}return y(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return iq(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new dH(dq(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cV.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=fV(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new dH(new YV(this._delegate,new vV(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return vq(this._delegate).then((function(t){return new pH(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return eq(e=Ku(e),t)}(this._delegate,e||void 0).then((function(e){return new pH(e,t.storage)}))}},{key:"getMetadata",value:function(){return pq(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return tq(e=Ku(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return function(e){return nq(e=Ku(e))}(this._delegate)}},{key:"delete",value:function(){return this._throwIfRoot("delete"),function(e){return rq(e=Ku(e))}(this._delegate)}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw Vj(e)}}]),e}(),mH=function(){function e(t,n){d(this,e),this.app=t,this._delegate=n}return y(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(yH(e))throw Uj("ref() expected a child path but got a URL, use refFromURL instead.");return new vH(mq(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!yH(e))throw Uj("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Wj.makeFromUrl(e,this._delegate.host)}catch(t){throw Uj("refFromUrl() expected a valid full URL but got an invalid one.")}return new vH(mq(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};yq(this._delegate,e,t,n)}}]),e}();function yH(e){return/^[A-Za-z]+:\/\//.test(e)}function gH(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new mH(r,i)}function kH(e){var t=e.children,n=e.className,i=e.content,a=Mi("header",n),o=Hi(kH,e),u=Gi(kH,e);return r.createElement(u,Ye({},o,{className:a}),Xi(t)?i:t)}!function(e){var t={TaskState:zV,TaskEvent:BV,StringFormat:cV,Storage:mH,Reference:vH};e.INTERNAL.registerComponent(new Hu("storage-compat",gH,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.2.0")}(Uv),kH.handledProps=["as","children","className","content"],kH.propTypes={},kH.create=Ia(kH,(function(e){return{content:e}}));var bH=kH;function wH(e){var t=e.children,n=e.className,i=e.content,a=Mi("description",n),o=Hi(wH,e),u=Gi(wH,e);return r.createElement(u,Ye({},o,{className:a}),Xi(t)?i:t)}wH.handledProps=["as","children","className","content"],wH.propTypes={},wH.create=Ia(wH,(function(e){return{content:e}}));var _H=wH;function xH(e){var t=e.children,n=e.className,i=e.content,a=Mi("extra",n),o=Hi(xH,e),u=Gi(xH,e);return r.createElement(u,Ye({},o,{className:a}),Xi(t)?i:t)}xH.handledProps=["as","children","className","content"],xH.propTypes={},xH.create=Ia(xH,(function(e){return{content:e}}));var IH=xH;function TH(e){var t=e.children,n=e.className,i=e.content,a=Mi("meta",n),o=Hi(TH,e),u=Gi(TH,e);return r.createElement(u,Ye({},o,{className:a}),Xi(t)?i:t)}TH.handledProps=["as","children","className","content"],TH.propTypes={},TH.create=Ia(TH,(function(e){return{content:e}}));var EH=TH;function SH(e){var t=e.children,n=e.className,i=e.content,a=e.description,o=e.extra,u=e.header,s=e.meta,c=e.verticalAlign,l=Mi(Wi(c),"content",n),f=Hi(SH,e),h=Gi(SH,e);return Xi(t)?r.createElement(h,Ye({},f,{className:l}),bH.create(u,{autoGenerateKey:!1}),EH.create(s,{autoGenerateKey:!1}),_H.create(a,{autoGenerateKey:!1}),IH.create(o,{autoGenerateKey:!1}),i):r.createElement(h,Ye({},f,{className:l}),t)}SH.handledProps=["as","children","className","content","description","extra","header","meta","verticalAlign"],SH.propTypes={};var CH=SH;function NH(e){var t=e.children,n=e.className,i=e.content,a=e.divided,o=e.items,u=e.link,s=e.relaxed,c=e.unstackable,l=Mi("ui",ji(a,"divided"),ji(u,"link"),ji(c,"unstackable"),qi(s,"relaxed"),"items",n),f=Hi(NH,e),h=Gi(NH,e);if(!Xi(t))return r.createElement(h,Ye({},f,{className:l}),t);if(!Xi(i))return r.createElement(h,Ye({},f,{className:l}),i);var d=ki(o,(function(e){var t=e.childKey,n=oB(e,["childKey"]),i=null!=t?t:[n.content,n.description,n.header,n.meta].join("-");return r.createElement(OH,Ye({},n,{key:i}))}));return r.createElement(h,Ye({},f,{className:l}),d)}NH.handledProps=["as","children","className","content","divided","items","link","relaxed","unstackable"],NH.propTypes={};var AH=NH;function RH(e){var t=e.size,n=Hi(RH,e);return r.createElement(FB,Ye({},n,{size:t,ui:!!t,wrapped:!0}))}RH.handledProps=["size"],RH.propTypes={},RH.create=Ia(RH,(function(e){return{src:e}}));var PH=RH;function DH(e){var t=e.children,n=e.className,i=e.content,a=e.description,o=e.extra,u=e.header,s=e.image,c=e.meta,l=Mi("item",n),f=Hi(DH,e),h=Gi(DH,e);return Xi(t)?r.createElement(h,Ye({},f,{className:l}),PH.create(s,{autoGenerateKey:!1}),r.createElement(CH,{content:i,description:a,extra:o,header:u,meta:c})):r.createElement(h,Ye({},f,{className:l}),t)}DH.handledProps=["as","children","className","content","description","extra","header","image","meta"],DH.Content=CH,DH.Description=_H,DH.Extra=IH,DH.Group=AH,DH.Header=bH,DH.Image=PH,DH.Meta=EH,DH.propTypes={};var OH=DH;var LH=function(){var e=function(){var e=r.useContext(we).matches,t=e[e.length-1];return t?t.params:{}}().bookId,t=l(r.useState({}),2),n=t[0],i=t[1],a=l(r.useState(n.bookName),2),o=a[0],u=a[1],s=l(r.useState(n.bookISBN),2),c=s[0],f=s[1],h=l(r.useState(n.bookAuthor),2),d=h[0],p=h[1],v=l(r.useState(n.bookType),2),m=v[0],y=v[1],g=l(r.useState([]),2),k=g[0],b=g[1],w=l(r.useState(!1),2),_=w[0],x=w[1],I=l(r.useState(!1),2),T=I[0],E=I[1];r.useEffect((function(){_q.firestore().collection("books").doc(e).get().then((function(e){var t=e.data();i(t)}))})),r.useEffect((function(){_q.firestore().collection("categories").get().then((function(e){var t=e.docs.map((function(e){return e.data()}));b(t)}))}),[]);var S=k.map((function(e){return{text:e.name,value:e.name}}));return(0,Ev.jsxs)(Iq,{children:[(0,Ev.jsx)(zB,{style:{margin:"20px 20px 20px 0px"},children:"\u65b0\u589e\u66f8\u7c4d"}),(0,Ev.jsx)(Aq,{children:(0,Ev.jsx)(Aq.Row,{stretched:!0,children:(0,Ev.jsx)(Aq.Column,{children:(0,Ev.jsx)(OH.Group,{children:(0,Ev.jsxs)(OH,{children:[(0,Ev.jsx)(OH.Image,{src:n.bookCoverUrl||"https://react.semantic-ui.com/images/wireframe/image.png",size:"medium"}),(0,Ev.jsx)(OH.Content,{children:(0,Ev.jsx)(OH.Meta,{children:(0,Ev.jsx)($B,{children:(0,Ev.jsxs)(CK,{children:[(0,Ev.jsx)(CK.Input,{label:"\u66f8\u540d",placeholder:"\u8f38\u5165\u66f8\u540d",value:o,onChange:function(e){u(e.target.value)}}),(0,Ev.jsx)(CK.Input,{label:"ISBN",placeholder:"\u8f38\u5165ISBN",value:c,onChange:function(e){f(e.target.value)}}),(0,Ev.jsx)(CK.Input,{label:"\u4f5c\u8005",placeholder:"\u8f38\u5165\u4f5c\u8005",value:d,onChange:function(e){p(e.target.value)}}),(0,Ev.jsx)(CK.Dropdown,{label:"\u5206\u985e",placeholder:"\u9078\u64c7\u66f8\u7c4d\u5206\u985e",options:S,selection:!0,value:m,onChange:function(e,t){var n=t.value;return y(n)}}),(0,Ev.jsxs)("div",{children:[(0,Ev.jsx)(Rz,{positive:!0,loading:_,onClick:function(){x(!0)},children:"\u4fee\u6539"}),(0,Ev.jsx)(Rz,{negative:!0,loading:T,onClick:function(){E(!0)},children:"\u522a\u9664"})]})]})})})})]})})})})})]})};var MH=function(){var e=l(r.useState([]),2),t=e[0],n=e[1],i=Ie(),a=new URLSearchParams(i.search).get("type");return r.useEffect((function(){a?_q.firestore().collection("books").orderBy("bookName","asc").where("bookType","==",a).get().then((function(e){var t=e.docs.map((function(e){var t=e.id;return as(as({},e.data()),{},{id:t})}));n(t)})):_q.firestore().collection("books").orderBy("bookName","asc").get().then((function(e){var t=e.docs.map((function(e){var t=e.id;return as(as({},e.data()),{},{id:t})}));n(t)}))}),[a]),(0,Ev.jsx)(Iq,{fluid:!0,children:(0,Ev.jsxs)(Aq,{style:{margin:"10px 20px 10px 20px"},children:[(0,Ev.jsxs)(Aq.Row,{children:[(0,Ev.jsx)(Aq.Column,{width:2,children:(0,Ev.jsx)(zB,{children:"\u66f8\u7c4d\u5206\u985e"})}),(0,Ev.jsx)(Aq.Column,{width:14,children:(0,Ev.jsx)(zB,{children:"\u66f8\u7c4d\u5217\u8868"})})]}),(0,Ev.jsxs)(Aq.Row,{stretched:!0,children:[(0,Ev.jsx)(Aq.Column,{width:2,children:(0,Ev.jsx)($B,{children:(0,Ev.jsx)(wz,{})})}),(0,Ev.jsxs)(Aq.Column,{width:14,children:[(0,Ev.jsx)(Aq.Row,{children:(0,Ev.jsx)($B,{children:(0,Ev.jsxs)(Vo,{secondary:!0,children:[(0,Ev.jsx)(Vo.Menu,{children:(0,Ev.jsx)(Sv,{})}),(0,Ev.jsx)(Vo.Menu,{position:"right",children:(0,Ev.jsx)(Rz,{as:Ge,to:"/bookManage/bookLaunch",primary:!0,children:"\u65b0\u589e\u66f8\u7c4d"})})]})})}),(0,Ev.jsx)(Aq.Row,{children:(0,Ev.jsx)($B,{children:(0,Ev.jsx)(Aq,{columns:7,children:t.map((function(e){return(0,Ev.jsx)(Aq.Column,{centered:!0,children:(0,Ev.jsx)(oz.Group,{children:(0,r.createElement)(_z,as(as({},e),{},{key:e.id}))})})}))})})})]})]})]})})};function FH(){return window}function UH(e,t,n){return jH.apply(this,arguments)}function jH(){return jH=Ko(zo().mark((function e(t,n,r){var i,a,o,u,s;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=FH(),o=a.BuildInfo,Mc(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,KH(n.sessionId);case 4:return u=e.sent,s={},ql()?s.ibi=o.packageName:Ul()?s.apn=o.packageName:Nc(t,"operation-not-supported-in-this-environment"),o.displayName&&(s.appDisplayName=o.displayName),s.sessionId=u,e.abrupt("return",hv(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s));case 10:case"end":return e.stop()}}),e)}))),jH.apply(this,arguments)}function VH(){return(VH=Ko(zo().mark((function e(t){var n,r,i;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=FH(),r=n.BuildInfo,i={},ql()?i.iosBundleId=r.packageName:Ul()?i.androidPackageName=r.packageName:Nc(t,"operation-not-supported-in-this-environment"),e.next=5,Bp(t,i);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qH(e){var t=FH().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:iu();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function BH(e,t,n){return zH.apply(this,arguments)}function zH(){return zH=Ko(zo().mark((function e(t,n,r){var i,a,o;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=FH(),a=i.cordova,o=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var u=null;function s(){var t;e();var n=null===(t=a.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout((function(){i(Ac(t,"redirect-cancelled-by-user"))}),2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),Ul()&&document.addEventListener("visibilitychange",l,!1),o=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),u&&window.clearTimeout(u)}}));case 5:return e.prev=5,o(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),zH.apply(this,arguments)}function WH(e){var t,n,r,i,a,o,u,s,c,l,f=FH();Oc("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Oc("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Oc("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Oc("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Oc("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function KH(e){return HH.apply(this,arguments)}function HH(){return(HH=Ko(zo().mark((function e(t){var n,r,i;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=GH(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function GH(e){if(Mc(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var QH=function(e){k(n,e);var t=I(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return y(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),Bo(b(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=Ko(zo().mark((function e(){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(jp);function $H(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:eG(),postBody:null,tenantId:e.tenantId,error:Ac(e,"no-auth-event")}}function YH(e,t){return tG()._set(nG(e),t)}function XH(e){return JH.apply(this,arguments)}function JH(){return(JH=Ko(zo().mark((function e(t){var n;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,tG()._get(nG(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,tG()._remove(nG(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ZH(e,t){var n,r,i=function(e){var t=rG(e),n=t.link?decodeURIComponent(t.link):void 0,r=rG(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return rG(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=rG(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?Ac(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function eG(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function tG(){return Uc(ad)}function nG(e){return Rl("authEvent",e.config.apiKey,e.name)}function rG(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t=S(e.split("?"));t[0];return Lu(t.slice(1).join("?"))}var iG=function(){function e(){d(this,e),this._redirectPersistence=ud,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Lp,this._overrideRedirectResult=Ip}return y(e,[{key:"_initialize",value:function(){var e=Ko(zo().mark((function e(t){var n,r;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new QH(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){Nc(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=Ko(zo().mark((function e(t,n,r,i){var a,o,u,s;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return WH(t),e.next=3,this._initialize(t);case 3:return a=e.sent,e.next=6,a.initialized();case 6:return a.resetRedirect(),gp.clear(),e.next=10,this._originValidation(t);case 10:return o=$H(t,r,i),e.next=13,YH(t,o);case 13:return e.next=15,UH(t,o,n);case 15:return u=e.sent,e.next=18,qH(u);case 18:return s=e.sent,e.abrupt("return",BH(t,a,s));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return VH.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=FH(),r=n.universalLinks,i=n.handleOpenURL,a=n.BuildInfo,o=setTimeout(Ko(zo().mark((function n(){return zo().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,XH(e);case 2:t.onEvent(oG());case 3:case"end":return n.stop()}}),n)}))),500),u=function(){var n=Ko(zo().mark((function n(r){var i,a;return zo().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(o),n.next=3,XH(e);case 3:i=n.sent,a=null,i&&(null===r||void 0===r?void 0:r.url)&&(a=ZH(i,r.url)),t.onEvent(a||oG());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,u);var s=i,c="".concat(a.packageName.toLowerCase(),"://");FH().handleOpenURL=function(){var e=Ko(zo().mark((function e(t){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(c)&&u({url:t}),"function"===typeof s)try{s(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),aG=iG;function oG(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ac("no-auth-event")}}function uG(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function sG(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:iu();return!("file:"!==uG()&&"ionic:"!==uG()&&"capacitor:"!==uG()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function cG(){return cu()&&11===(null===document||void 0===document?void 0:document.documentMode)}function lG(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:iu();return/Edge\/\d+/.test(e)}function fG(){try{var e=self.localStorage,t=ld();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:iu();return cG()||lG(e)}()||fu()}catch(n){return hG()&&fu()}return!1}function hG(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function dG(){return("http:"===uG()||"https:"===uG()||uu()||sG())&&!(su()||ou())&&fG()&&!hG()}function pG(){return sG()&&"undefined"!==typeof document}function vG(){return mG.apply(this,arguments)}function mG(){return(mG=Ko(zo().mark((function e(){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(pG()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),1e3);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var yG={LOCAL:"local",NONE:"none",SESSION:"session"},gG=Oc,kG="persistence";function bG(e,t){gG(Object.values(yG).includes(t),e,"invalid-persistence-type"),su()?gG(t!==yG.SESSION,e,"unsupported-persistence-type"):ou()?gG(t===yG.NONE,e,"unsupported-persistence-type"):hG()?gG(t===yG.NONE||t===yG.LOCAL&&fu(),e,"unsupported-persistence-type"):gG(t===yG.NONE||fG(),e,"unsupported-persistence-type")}function wG(e){return _G.apply(this,arguments)}function _G(){return(_G=Ko(zo().mark((function e(t){var n,r;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=xG(),r=Rl(kG,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function xG(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var IG=Oc,TG=function(){function e(){d(this,e),this.browserResolver=Uc(vv),this.cordovaResolver=Uc(aG),this.underlyingResolver=null,this._redirectPersistence=ud,this._completeRedirectFn=Lp,this._overrideRedirectResult=Ip}return y(e,[{key:"_initialize",value:function(){var e=Ko(zo().mark((function e(t){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=Ko(zo().mark((function e(t,n,r,i){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=Ko(zo().mark((function e(t,n,r,i){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return pG()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return IG(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=Ko(zo().mark((function e(){var t;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,vG();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function EG(e){return e.unwrap()}function SG(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new PG(e,function(e,t){var n,r=Ku(e),i=t;return Oc(t.customData.operationType,r,"argument-error"),Oc(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),Jh._fromError(r,i)}(e,t));else if(r){var i=CG(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function CG(e){var t=(e instanceof wu?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof wu)&&"temporaryProof"in t&&"phoneNumber"in t)return rp.credentialFromResult(e);var n,r=t.providerId;if(!r||r===vc)return null;switch(r){case pc:n=Vf;break;case hc:n=jf;break;case dc:n=qf;break;case mc:n=Wf;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?Bf._create(r,u):Ef._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new Uf(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof wu?n.credentialFromError(e):n.credentialFromResult(e)}function NG(e,t){return t.catch((function(t){throw t instanceof wu&&SG(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,CG(t)),additionalUserInfo:Qh(e),user:DG.getOrCreate(r)}}))}function AG(e,t){return RG.apply(this,arguments)}function RG(){return(RG=Ko(zo().mark((function e(t,n){var r;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return NG(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var PG=function(){function e(t,n){d(this,e),this.resolver=n,this.auth=t.wrapped()}return y(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return NG(EG(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),DG=function(){function e(t){d(this,e),this._delegate=t,this.multiFactor=function(e){var t=Ku(e);return td.has(t)||td.set(t,ed._fromUser(t)),td.get(t)}(t)}return y(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=Ko(zo().mark((function e(t){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",NG(this.auth,fh(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=Ko(zo().mark((function e(t,n){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",AG(this.auth,Xd(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=Ko(zo().mark((function e(t){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",NG(this.auth,vp(this._delegate,t,TG)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=Ko(zo().mark((function e(t){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wG(Ql(this.auth));case 2:return e.abrupt("return",Rp(this._delegate,t,TG));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=Ko(zo().mark((function e(t){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",NG(this.auth,dh(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return AG(this.auth,function(e,t,n){return Zd.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return NG(this.auth,function(e,t,n){return pp.apply(this,arguments)}(this._delegate,e,TG))}},{key:"reauthenticateWithRedirect",value:function(){var e=Ko(zo().mark((function e(t){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,wG(Ql(this.auth));case 2:return e.abrupt("return",Np(this._delegate,t,TG));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return Lh.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=Ko(zo().mark((function e(t){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zf(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return Vh(Ku(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return Vh(Ku(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return np.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return jh.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return Mh.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();DG.USER_MAP=new WeakMap;var OG=Oc,LG=function(){function e(t,n){if(d(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;OG(r,"invalid-api-key",{appName:t.name}),OG(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?TG:void 0;this._delegate=n.initialize({options:{persistence:FG(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(Ic),this.linkUnderlyingAuth()}return y(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?DG.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){Yl(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return xh.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return Ih(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return _h.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=Ko(zo().mark((function e(t,n){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",NG(this._delegate,Sh(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return Oh.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Of.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=Ko(zo().mark((function e(){var t;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return OG(dG(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,Dp(this._delegate,TG);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",NG(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){Ql(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=MG(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=MG(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return Ah.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return wh.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=Ko(zo().mark((function e(t){var n,r;return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:bG(this._delegate,t),e.t0=t,e.next=e.t0===yG.SESSION?4:e.t0===yG.LOCAL?6:e.t0===yG.NONE?11:13;break;case 4:return n=ud,e.abrupt("break",14);case 6:return e.next=8,Uc(Ad)._isAvailable();case 8:return r=e.sent,n=r?Ad:ad,e.abrupt("break",14);case 11:return n=Al,e.abrupt("break",14);case 13:return e.abrupt("return",Nc("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return NG(this._delegate,function(e){return $f.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return NG(this._delegate,ch(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return NG(this._delegate,function(e,t){return yh.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return NG(this._delegate,Nh(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return NG(this._delegate,function(e,t,n){return Rh.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return AG(this._delegate,function(e,t,n){return Yd.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=Ko(zo().mark((function e(t){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return OG(dG(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",NG(this._delegate,hp(this._delegate,t,TG)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=Ko(zo().mark((function e(t){return zo().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return OG(dG(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,wG(this._delegate);case 3:return e.abrupt("return",Sp(this._delegate,t,TG));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return Eh.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function MG(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&DG.getOrCreate(e))},error:t,complete:n}}function FG(e,t){var n=function(e,t){var n=xG();if(!n)return[];var r=Rl(kG,e,t);switch(n.getItem(r)){case yG.NONE:return[Al];case yG.LOCAL:return[Ad,ud];case yG.SESSION:return[ud];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(Ad)||n.push(Ad),"undefined"!==typeof window)for(var r=0,i=[ad,ud];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(Al)||n.push(Al),n}LG.Persistence=yG;var UG=function(){function e(){d(this,e),this.providerId="phone",this._delegate=new rp(EG(Uv.auth()))}return y(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return rp.credential(e,t)}}]),e}();UG.PHONE_SIGN_IN_METHOD=rp.PHONE_SIGN_IN_METHOD,UG.PROVIDER_ID=rp.PROVIDER_ID;var jG=Oc,VG=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Uv.app();d(this,e),jG(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new Gd(t,n,i.auth()),this.type=this._delegate.type}return y(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();!function(e){e.INTERNAL.registerComponent(new Hu("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new LG(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:yc,PASSWORD_RESET:gc,RECOVER_EMAIL:kc,REVERT_SECOND_FACTOR_ADDITION:bc,VERIFY_AND_CHANGE_EMAIL:wc,VERIFY_EMAIL:_c}},EmailAuthProvider:Lf,FacebookAuthProvider:jf,GithubAuthProvider:qf,GoogleAuthProvider:Vf,OAuthProvider:Uf,SAMLAuthProvider:zf,PhoneAuthProvider:UG,PhoneMultiFactorGenerator:yv,RecaptchaVerifier:VG,TwitterAuthProvider:Wf,Auth:LG,AuthCredential:Zl,Error:wu}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.3.0")}(Uv);var qG=function(){var e=Te(),t=l(r.useState(""),2),n=t[0],i=t[1],a=l(r.useState(""),2),o=a[0],u=a[1],s=l(r.useState(""),2),c=s[0],f=s[1],h=l(r.useState(""),2),d=h[0],p=h[1],v=l(r.useState(null),2),m=v[0],y=v[1],g=l(r.useState([]),2),k=g[0],b=g[1],w=l(r.useState(!1),2),_=w[0],x=w[1];r.useEffect((function(){_q.firestore().collection("categories").get().then((function(e){var t=e.docs.map((function(e){return e.data()}));b(t)}))}),[]);var I=k.map((function(e){return{text:e.name,value:e.name}})),T=m?URL.createObjectURL(m):"https://react.semantic-ui.com/images/wireframe/image.png";return(0,Ev.jsxs)(Iq,{children:[(0,Ev.jsx)(zB,{style:{margin:"20px 0px 20px 0px"},children:"\u65b0\u589e\u66f8\u7c4d"}),(0,Ev.jsxs)(CK,{onSubmit:function(){x(!0);var t=_q.firestore().collection("books").doc();if(m){var r=_q.storage().ref("post-images/"+t.id),i={contentType:m.type};r.put(m,i).then((function(){r.getDownloadURL().then((function(r){t.set({bookName:n,bookISBN:o,bookAuthor:c,bookType:d,bookCoverUrl:r}).then((function(){alert("\u65b0\u589e\u6210\u529f"),x(!1),e("/bookManage")}))}))}))}else t.set({bookName:n,bookISBN:o,bookAuthor:c,bookType:d,bookCoverUrl:"https://react.semantic-ui.com/images/wireframe/image.png"}).then((function(){alert("\u65b0\u589e\u6210\u529f"),x(!1),e("/bookManage")}));t.set({bookName:n,bookISBN:o,bookAuthor:c,bookType:d,bookCoverUrl:"https://react.semantic-ui.com/images/wireframe/image.png"}).then((function(){alert("\u65b0\u589e\u6210\u529f"),x(!1),e("/bookManage")}))},children:[(0,Ev.jsx)(FB,{src:T,size:"small",floated:"left"}),(0,Ev.jsx)(Rz,{basic:!0,as:"label",htmlFor:"post-image",children:"\u4e0a\u50b3\u66f8\u7c4d\u5716\u7247"}),(0,Ev.jsx)(CK.Input,{id:"post-image",type:"file",style:{display:"none"},onChange:function(e){y(e.target.files[0])},required:!0}),(0,Ev.jsx)(CK.Input,{label:"\u66f8\u540d",placeholder:"\u8f38\u5165\u66f8\u540d",value:n,onChange:function(e){i(e.target.value)},required:!0}),(0,Ev.jsx)(CK.Input,{label:"ISBN",placeholder:"\u8f38\u5165ISBN",value:o,onChange:function(e){u(e.target.value)},required:!0}),(0,Ev.jsx)(CK.Input,{label:"\u4f5c\u8005",placeholder:"\u8f38\u5165\u4f5c\u8005",value:c,onChange:function(e){f(e.target.value)},required:!0}),(0,Ev.jsx)(CK.Dropdown,{label:"\u5206\u985e",placeholder:"\u9078\u64c7\u66f8\u7c4d\u5206\u985e",options:I,selection:!0,value:d,onChange:function(e,t){var n=t.value;return p(n)},required:!0}),(0,Ev.jsx)(CK.Button,{loading:_,children:"\u65b0\u589e"})]})]})};var BG=function(){return(0,Ev.jsxs)("div",{children:[(0,Ev.jsx)("h2",{children:" Nothing to see here!"}),(0,Ev.jsx)("p",{children:(0,Ev.jsx)(Ge,{to:"/",children:"Go to home page"})})]})};var zG=function(){return(0,Ev.jsx)(He,{children:(0,Ev.jsx)(Ve,{children:(0,Ev.jsxs)(Ue,{path:"/",element:(0,Ev.jsx)(Rv,{}),children:[(0,Ev.jsx)(Ue,{index:!0,element:(0,Ev.jsx)(xz,{})}),(0,Ev.jsx)(Ue,{path:"signin",element:(0,Ev.jsx)(UK,{})}),(0,Ev.jsx)(Ue,{path:"userSet",element:(0,Ev.jsx)(jK,{})}),(0,Ev.jsx)(Ue,{path:"bookManage/bookEdit/:bookId",element:(0,Ev.jsx)(LH,{})}),(0,Ev.jsx)(Ue,{path:"bookManage",element:(0,Ev.jsx)(MH,{})}),(0,Ev.jsx)(Ue,{path:"bookManage/bookLaunch",element:(0,Ev.jsx)(qG,{})}),(0,Ev.jsx)(Ue,{path:"*",element:(0,Ev.jsx)(BG,{})})]})})})};a.createRoot(document.getElementById("root")).render((0,Ev.jsx)(r.StrictMode,{children:(0,Ev.jsx)(zG,{})}))}()}();
//# sourceMappingURL=main.8d328702.js.map